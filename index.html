<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"tonymistark.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="安静地坐着学习">
<meta property="og:type" content="website">
<meta property="og:title" content="BLOG">
<meta property="og:url" content="https://tonymistark.github.io/index.html">
<meta property="og:site_name" content="BLOG">
<meta property="og:description" content="安静地坐着学习">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Ice">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://tonymistark.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>BLOG</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-W6L4L92Z6Z"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-W6L4L92Z6Z');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?99c70b2174a7fbe4af476f28bafb19a3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/./atom.xml" title="BLOG" type="application/atom+xml">
<link rel="alternate" href="/./rss2.xml" title="BLOG" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">BLOG</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">用心记录思想</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2024/01/29/design-pattern/facade/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/29/design-pattern/facade/" class="post-title-link" itemprop="url">Facade 门面（外观）模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-01-29 22:15:32 / Modified: 22:28:59" itemprop="dateCreated datePublished" datetime="2024-01-29T22:15:32+08:00">2024-01-29</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>7 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="意图"><a href="#意图" class="headerlink" title="意图"></a>意图</h2><p>Facade是一种结构化设计模式，它为库、框架或任何其他复杂的类集提供了一个简化的接口。</p>
<div align="center"> <img src="/images/facade.png"/></div>


<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>设想一下，您必须让代码处理属于复杂库或框架的大量对象。通常，您需要初始化所有这些对象，跟踪依赖关系，以正确的顺序执行方法，等等。</p>
<p>因此，类的业务逻辑将与第三方类的实现细节紧密耦合，从而难以理解和维护。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>Facade是一个类，它为包含许多移动部件的复杂子系统提供简单的接口。与直接使用子系统相比，外观可能提供有限的功能。但是，它只包含客户真正关心的那些功能。</p>
<p>Having a facade is handy when you need to integrate your app with a sophisticated library that has dozens of features, but you just need a tiny bit of its functionality.<br>当你需要将你的应用与一个复杂的库集成时，拥有一个外观是很方便的，这个库有几十个功能，但你只需要它的一小部分功能。</p>
<p>例如，一个将猫的搞笑短视频上传到社交媒体的应用程序可能会使用专业的视频转换库。然而，它真正需要的只是一个带有单一方法 <code>encode(filename, format)</code> 的类。在创建这样一个类并将其与视频转换库连接之后，您将拥有第一个外观。</p>
<h2 id="现实世界的类比"><a href="#现实世界的类比" class="headerlink" title="现实世界的类比"></a>现实世界的类比</h2><div align="center"> <img src="/images/facade-live-example.png"/>通过电话订购。</div>


<p>当你打电话给一家商店下电话订单时，接线员是你对商店所有服务和部门的门面。运营商为您提供一个简单的语音界面，用于订购系统、支付网关和各种交付服务。</p>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><div align="center"> <img src="/images/facade-structure.png"/></div>


<ol>
<li><strong>Facade</strong>提供了对子系统功能的特定部分的方便访问。它知道在哪里引导客户的请求，以及如何操作所有的活动部件。</li>
<li>可以创建一个<strong>Additional Facade</strong>类，以防止使用不相关的功能污染单个facade，这些功能可能会使其成为另一个复杂的结构。客户端和其他立面都可以使用其他立面。</li>
<li><strong>复杂子系统</strong>由几十个不同的对象组成。为了让它们都做一些有意义的事情，你必须深入研究子系统的实现细节，比如以正确的顺序初始化对象，并以正确的格式为它们提供数据。子系统类不知道facade的存在。他们在系统内运作，并直接相互合作。</li>
<li>客户端使用facade而不是直接调用子系统对象。</li>
</ol>
<h2 id="伪代码"><a href="#伪代码" class="headerlink" title="伪代码"></a>伪代码</h2><p>在本例中，Facade模式简化了与复杂视频转换框架的交互。</p>
<div align="center"> <img src="/images/facade-example1.png"/>在一个facade类中隔离多个依赖项的示例。</div>


<p>与其让你的代码直接与几十个框架类一起工作，不如创建一个facade类来封装这些功能，并将其隐藏在代码的其余部分中。这种结构还可以帮助您最大限度地减少升级到框架的未来版本或用另一个版本替换它的工作。你在应用中唯一需要改变的是facade方法的实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// These are some of the classes of a complex 3rd-party video</span></span><br><span class="line"><span class="comment">// conversion framework. We don&#x27;t control that code, therefore</span></span><br><span class="line"><span class="comment">// can&#x27;t simplify it.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VideoFile</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OggCompressionCodec</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MPEG4CompressionCodec</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CodecFactory</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BitrateReader</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AudioMixer</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// We create a facade class to hide the framework&#x27;s complexity</span></span><br><span class="line"><span class="comment">// behind a simple interface. It&#x27;s a trade-off between</span></span><br><span class="line"><span class="comment">// functionality and simplicity.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VideoConverter</span> is</span><br><span class="line">    method <span class="title function_">convert</span><span class="params">(filename, format)</span>:File <span class="type">is</span></span><br><span class="line">        <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">VideoFile</span>(filename)</span><br><span class="line">        sourceCodec = (<span class="keyword">new</span> <span class="title class_">CodecFactory</span>).extract(file)</span><br><span class="line">        <span class="keyword">if</span> (format == <span class="string">&quot;mp4&quot;</span>)</span><br><span class="line">            destinationCodec = <span class="keyword">new</span> <span class="title class_">MPEG4CompressionCodec</span>()</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            destinationCodec = <span class="keyword">new</span> <span class="title class_">OggCompressionCodec</span>()</span><br><span class="line">        buffer = BitrateReader.read(filename, sourceCodec)</span><br><span class="line">        result = BitrateReader.convert(buffer, destinationCodec)</span><br><span class="line">        result = (<span class="keyword">new</span> <span class="title class_">AudioMixer</span>()).fix(result)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">File</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Application classes don&#x27;t depend on a billion classes</span></span><br><span class="line"><span class="comment">// provided by the complex framework. Also, if you decide to</span></span><br><span class="line"><span class="comment">// switch frameworks, you only need to rewrite the facade class.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Application</span> is</span><br><span class="line">    method <span class="title function_">main</span><span class="params">()</span> <span class="type">is</span></span><br><span class="line">        <span class="variable">convertor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">VideoConverter</span>()</span><br><span class="line">        mp4 = convertor.convert(<span class="string">&quot;funny-cats-video.ogg&quot;</span>, <span class="string">&quot;mp4&quot;</span>)</span><br><span class="line">        mp4.save()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="适用性"><a href="#适用性" class="headerlink" title="适用性"></a>适用性</h2><ul>
<li><p><strong>当您需要一个有限但直接的接口到一个复杂的子系统时，请使用Facade模式。</strong></p>
</li>
<li><p>通常，子系统会随着时间的推移变得更加复杂。即使应用设计模式通常也会导致创建更多的类。子系统可能变得更加灵活，更容易在各种上下文中重用，但它需要从客户端获得的配置和样板代码的数量越来越大。Facade试图通过提供子系统最常用功能的快捷方式来解决这个问题，以满足大多数客户的需求。</p>
</li>
<li><p>当你想把一个子系统组织成层时，使用Facade。</p>
</li>
<li><p>创建外观以定义子系统每个级别的入口点。您可以通过要求多个子系统仅通过外观进行通信来减少它们之间的耦合。例如，让我们回到我们的视频转换框架。它可以分为两个层次：视频和音频相关。对于每一层，您可以创建一个外观，然后使每一层的类通过这些外观相互通信。这种方法看起来与Mediator模式非常相似。</p>
</li>
</ul>
<h2 id="如何实施"><a href="#如何实施" class="headerlink" title="如何实施"></a>如何实施</h2><ol>
<li>检查是否有可能提供比现有子系统已经提供的接口更简单的接口。如果这个接口使客户机代码独立于许多子系统的类，那么您就走对了路。</li>
<li>在一个新的facade类中decompose并实现这个接口。facade应该将客户端代码的调用重定向到子系统的适当对象。facade应该负责初始化子系统并管理其进一步的生命周期，除非客户端代码已经这样做了。</li>
<li>要从模式中获得全部好处，请使所有客户机代码仅通过外观与子系统通信。现在，客户端代码受到保护，不受子系统代码中任何更改的影响。例如，当子系统升级到新版本时，您只需要修改外观中的代码。</li>
<li>如果外观变得太大，考虑将其行为的一部分提取到一个新的、改进的外观类中。</li>
</ol>
<h2 id="利弊"><a href="#利弊" class="headerlink" title="利弊"></a>利弊</h2><ul>
<li><p>利：您可以将代码与子系统的复杂性隔离开来。</p>
</li>
<li><p> 弊：facade可以成为耦合到应用程序的所有类的god对象。</p>
</li>
</ul>
<h2 id="与其他模式的关系"><a href="#与其他模式的关系" class="headerlink" title="与其他模式的关系"></a>与其他模式的关系</h2><ul>
<li><p>Facade为现有对象定义了一个新的接口，而Adapter试图使现有接口可用。Adapter通常只包装一个对象，而Facade则处理整个对象子系统。</p>
</li>
<li><p>当您只想隐藏从客户端代码创建子系统对象的方式时，抽象工厂可以作为Facade的替代方案。</p>
</li>
<li><p>Flyweight展示了如何制作许多小对象，而Facade展示了如何制作代表整个子系统的单个对象。</p>
</li>
<li><p>Facade和Mediator有着类似的工作：它们试图组织许多紧密耦合的类之间的协作。</p>
<ul>
<li>Facade为对象子系统定义了一个简化的接口，但它没有引入任何新功能。子系统本身不知道facade。子系统内的对象可以直接通信。</li>
<li>Mediator集中系统组件之间的通信。组件只知道中介对象，不直接通信。</li>
</ul>
</li>
<li><p>Facade类通常可以转换为Singleton，因为在大多数情况下，单个facade对象就足够了。</p>
</li>
<li><p>Facade与Proxy类似，都缓冲一个复杂的实体并自己初始化它。与Facade不同，Proxy与其服务对象具有相同的接口，这使得它们可以互换。</p>
</li>
</ul>
<h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2024/01/28/design-pattern/decorator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/28/design-pattern/decorator/" class="post-title-link" itemprop="url">Decorator 装饰器模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-01-28 13:26:52 / Modified: 13:56:30" itemprop="dateCreated datePublished" datetime="2024-01-28T13:26:52+08:00">2024-01-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-pattern/" itemprop="url" rel="index"><span itemprop="name">design-pattern</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>6.5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>24 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Decorator-装饰器模式"><a href="#Decorator-装饰器模式" class="headerlink" title="Decorator 装饰器模式"></a>Decorator 装饰器模式</h1><h2 id="Intent-意图"><a href="#Intent-意图" class="headerlink" title="Intent 意图"></a>Intent 意图</h2><p><strong>Decorator</strong>  is a structural design pattern that lets you attach new behaviors to objects by placing these objects inside special wrapper objects that contain the behaviors.<br><strong>装饰器</strong>是一种结构化设计模式，它允许您将新行为附加到对象，方法是将这些对象放置在包含行为的特殊包装器对象中。</p>
<div align="center"> <img src="/images/decorator.png"/></div>


<h2 id="Problem-问题"><a href="#Problem-问题" class="headerlink" title="Problem  问题"></a>Problem  问题</h2><p>Imagine that you’re working on a notification library which lets other programs notify their users about important events.<br>假设您正在处理一个通知库，该库允许其他程序通知其用户有关重要事件。</p>
<p>The initial version of the library was based on the <code>Notifier</code> class that had only a few fields, a constructor and a single <code>send</code> method. The method could accept a message argument from a client and send the message to a list of emails that were passed to the notifier via its constructor. A third-party app which acted as a client was supposed to create and configure the notifier object once, and then use it each time something important happened.<br>该库的初始版本基于只有几个字段、一个构造函数和一个 <code>send</code> 方法的 <code>Notifier</code> 类。该方法可以接受来自客户端的消息参数，并将消息发送到通过其构造函数传递给通知程序的电子邮件列表。作为客户端的第三方应用程序应该创建和配置一次通知程序对象，然后在每次发生重要事件时使用它。</p>
<div align="center"> <img src="/images/decorator-problem1.png"/>A program could use the notifier class to send notifications about important events to a predefined set of emails.</br>程序可以使用notifier类将有关重要事件的通知发送到一组预定义的电子邮件。</div>


<p>At some point, you realize that users of the library expect more than just email notifications. Many of them would like to receive an SMS about critical issues. Others would like to be notified on Facebook and, of course, the corporate users would love to get Slack notifications.在某种程度上，您意识到图书馆的用户期望的不仅仅是电子邮件通知。他们中的许多人希望收到关于关键问题的短信。其他人希望在Facebook上获得通知，当然，企业用户也希望获得Slack通知。</p>
<div align="center"> <img src="/images/decorator-problem2.png"/>Each notification type is implemented as a notifier’s subclass.</br>每个通知类型都作为通知程序的子类实现。</div>


<p>How hard can that be? You extended the <code>Notifier</code> class and put the additional notification methods into new subclasses. Now the client was supposed to instantiate the desired notification class and use it for all further notifications.<br>这能有多难您扩展了 <code>Notifier</code> 类，并将额外的通知方法放入新的子类中。现在，客户端应该实例化所需的通知类，并将其用于所有进一步的通知。</p>
<p>But then someone reasonably asked you, “Why can’t you use several notification types at once? If your house is on fire, you’d probably want to be informed through every channel.”<br>但是后来有人合理地问你，“为什么你不能同时使用几种通知类型？如果你的房子着火了，你可能希望通过各种渠道得到通知。“</p>
<p>You tried to address that problem by creating special subclasses which combined several notification methods within one class. However, it quickly became apparent that this approach would bloat the code immensely, not only the library code but the client code as well.<br>您试图通过创建特殊的子类来解决这个问题，这些子类在一个类中组合了几个通知方法。然而，很快就发现这种方法会极大地膨胀代码，不仅是库代码，而且还有客户机代码。</p>
<div align="center"> <img src="/images/decorator-problem2.png"/>Combinatorial explosion of subclasses.</br>子类的组合爆炸。</div>


<p>You have to find some other way to structure notifications classes so that their number won’t accidentally break some Guinness record.您必须找到其他方法来构造通知类，以便它们的数量不会意外地打破吉尼斯记录。</p>
<h2 id="Solution-解决方案"><a href="#Solution-解决方案" class="headerlink" title="Solution  解决方案"></a>Solution  解决方案</h2><p>Extending a class is the first thing that comes to mind when you need to alter an object’s behavior. However, inheritance has several serious caveats that you need to be aware of.<br>当您需要改变对象的行为时，首先想到的是扩展类。然而，继承有几个严重的警告，你需要知道。</p>
<ul>
<li>Inheritance is static. You can’t alter the behavior of an existing object at runtime. You can only replace the whole object with another one that’s created from a different subclass.<br>继承是静态的。不能在运行时改变现有对象的行为。你只能用另一个从不同子类创建的对象替换整个对象。</li>
<li>Subclasses can have just one parent class. In most languages, inheritance doesn’t let a class inherit behaviors of multiple classes at the same time.<br>子类只能有一个父类。在大多数语言中，继承不会让一个类同时继承多个类的行为。</li>
</ul>
<p>One of the ways to overcome these caveats is by using <em>Aggregation</em> or <em>Composition</em>  instead of <em>Inheritance</em>. Both of the alternatives work almost the same way: one object <em>has a</em> reference to another and delegates it some work, whereas with inheritance, the object itself <em>is</em> able to do that work, inheriting the behavior from its superclass.<br>克服这些警告的方法之一是使用聚合或组合而不是继承。这两种替代方法的工作方式几乎相同：一个对象引用另一个对象并委托它一些工作，而继承，对象本身能够完成这项工作，从其超类继承行为。</p>
<p>With this new approach you can easily substitute the linked “helper” object with another, changing the behavior of the container at runtime. An object can use the behavior of various classes, having references to multiple objects and delegating them all kinds of work. Aggregation&#x2F;composition is the key principle behind many design patterns, including Decorator. On that note, let’s return to the pattern discussion.<br>使用这种新方法，您可以轻松地将链接的“helper”对象替换为另一个对象，从而在运行时更改容器的行为。一个对象可以使用各种类的行为，引用多个对象并将各种工作委托给它们。聚合&#x2F;组合是许多设计模式背后的关键原则，包括Decorator。在这一点上，让我们回到模式讨论。</p>
<div align="center"> <img src="/images/decorator-solution1.png"/>Inheritance vs. Aggregation</br>继承与聚合</div>


<p>“Wrapper” is the alternative nickname for the Decorator pattern that clearly expresses the main idea of the pattern. A <em>wrapper</em> is an object that can be linked with some <em>target</em> object. The wrapper contains the same set of methods as the target and delegates to it all requests it receives. However, the wrapper may alter the result by doing something either before or after it passes the request to the target.<br>“Wrapper”是Decorator模式的另一个昵称，它清楚地表达了该模式的主要思想。包装器是可以与某个目标对象链接的对象。包装器包含与目标相同的方法集，并将其接收的所有请求委托给它。但是，包装器可以在将请求传递给目标之前或之后执行某些操作，从而改变结果。</p>
<p>When does a simple wrapper become the real decorator? As I mentioned, the wrapper implements the same interface as the wrapped object. That’s why from the client’s perspective these objects are identical. Make the wrapper’s reference field accept any object that follows that interface. This will let you cover an object in multiple wrappers, adding the combined behavior of all the wrappers to it.<br>什么时候简单的包装器变成了真实的装饰器？正如我提到的，包装器实现了与被包装对象相同的接口。这就是为什么从客户的角度来看，这些对象是相同的。使包装器的引用字段接受该接口后面的任何对象。这将允许您在多个包装器中覆盖一个对象，并将所有包装器的组合行为添加到该对象中。</p>
<p>In our notifications example, let’s leave the simple email notification behavior inside the base <code>Notifier</code> class, but turn all other notification methods into decorators.<br>在我们的通知示例中，让我们将简单的电子邮件通知行为留在基类 <code>Notifier</code> 中，但将所有其他通知方法转换为装饰器。</p>
<div align="center"> <img src="/images/decorator-solution2.png"/>Various notification methods become decorators.</br>各种通知方法成为装饰器。</div>


<p>The client code would need to wrap a basic notifier object into a set of decorators that match the client’s preferences. The resulting objects will be structured as a stack.客户机代码需要将一个基本的通知程序对象包装到一组符合客户机偏好的装饰器中。生成的对象将被构造为堆栈。</p>
<div align="center"> <img src="/images/decorator-solution2.png"/>Apps might configure complex stacks of notification decorators.</br>应用程序可能会配置复杂的通知装饰器堆栈。</div>


<p>The last decorator in the stack would be the object that the client actually works with. Since all decorators implement the same interface as the base notifier, the rest of the client code won’t care whether it works with the “pure” notifier object or the decorated one.<br>堆栈中的最后一个装饰器将是客户端实际使用的对象。由于所有装饰器都实现了与基本通知器相同的接口，因此客户端代码的其余部分不会关心它是与“纯”通知器对象一起工作还是与装饰的通知器对象一起工作。</p>
<p>We could apply the same approach to other behaviors such as formatting messages or composing the recipient list. The client can decorate the object with any custom decorators, as long as they follow the same interface as the others.<br>我们可以将相同的方法应用于其他行为，例如格式化消息或编写收件人列表。客户端可以使用任何自定义装饰器来装饰对象，只要它们遵循与其他装饰器相同的接口即可。</p>
<h2 id="Real-World-Analogy-现实世界的类比"><a href="#Real-World-Analogy-现实世界的类比" class="headerlink" title="Real-World Analogy  现实世界的类比"></a>Real-World Analogy  现实世界的类比</h2><div align="center"> <img src="/images/decorator-comic-1.png"/>You get a combined effect from wearing multiple pieces of clothing.</br>你会从穿多件衣服中得到一个综合效果。</div>


<p>Wearing clothes is an example of using decorators. When you’re cold, you wrap yourself in a sweater. If you’re still cold with a sweater, you can wear a jacket on top. If it’s raining, you can put on a raincoat. All of these garments “extend” your basic behavior but aren’t part of you, and you can easily take off any piece of clothing whenever you don’t need it.<br>穿衣服是使用装饰器的一个例子。当你冷的时候，你会把自己裹在毛衣里。如果你穿毛衣还是觉得冷，你可以在上面穿一件夹克。如果下雨，你可以穿上雨衣。所有这些衣服都“延伸”了你的基本行为，但不是你的一部分，你可以在不需要的时候轻松地脱掉任何一件衣服。</p>
<h2 id="Structure-结构"><a href="#Structure-结构" class="headerlink" title="Structure  结构"></a>Structure  结构</h2><div align="center"> <img src="/images/decorator-structure1.png"/></div>


<ol>
<li>The <strong>Component</strong> declares the common interface for both wrappers and wrapped objects.<br>组件声明了包装器和包装对象的公共接口。</li>
<li><strong>Concrete Component</strong> is a class of objects being wrapped. It defines the basic behavior, which can be altered by decorators.<br>具体组件是一个被包装的对象类。它定义了基本的行为，可以由装饰器修改。</li>
<li>The <strong>Base Decorator</strong> class has a field for referencing a wrapped object. The field’s type should be declared as the component interface so it can contain both concrete components and decorators. The base decorator delegates all operations to the wrapped object.<br>BaseDecorator类有一个用于引用包装对象的字段。字段的类型应该被声明为组件接口，这样它就可以包含具体的组件和装饰器。基本装饰器将所有操作委托给包装对象。</li>
<li><strong>Concrete Decorators</strong> define extra behaviors that can be added to components dynamically. Concrete decorators override methods of the base decorator and execute their behavior either before or after calling the parent method.<br>具体装饰器定义了可以动态添加到组件的额外行为。具体装饰器覆盖基本装饰器的方法，并在调用父方法之前或之后执行它们的行为。</li>
<li>The <strong>Client</strong> can wrap components in multiple layers of decorators, as long as it works with all objects via the component interface.<br>客户端可以将组件包装在多层装饰器中，只要它通过组件接口与所有对象一起工作。</li>
</ol>
<h2 id="Pseudocode-伪代码"><a href="#Pseudocode-伪代码" class="headerlink" title="Pseudocode  伪代码"></a>Pseudocode  伪代码</h2><p>In this example, the In this example, the <strong>Decorator</strong> pattern lets you compress and encrypt sensitive data independently from the code that actually uses this data. pattern lets you compress and encrypt sensitive data independently from the code that actually uses this data.在本例中，Decorator模式允许您独立于实际使用敏感数据的代码来压缩和加密这些数据。</p>
<div align="center"> <img src="/images/decorator-example1.png"/>The encryption and compression decorators example.</br>加密和压缩装饰器示例。</div>


<p>The application wraps the data source object with a pair of decorators. Both wrappers change the way the data is written to and read from the disk:<br>应用程序用一对装饰器包装数据源对象。这两种包装器都改变了数据写入磁盘和从磁盘读取的方式：</p>
<ul>
<li>Just before the data is <strong>written to disk</strong>, the decorators encrypt and compress it. The original class writes the encrypted and protected data to the file without knowing about the change.<br>就在数据写入磁盘之前，装饰器加密并压缩数据。原始类将加密和保护的数据写入文件，而不知道更改。</li>
<li>Right after the data is <strong>read from disk</strong>, it goes through the same decorators, which decompress and decode it.<br>在从磁盘读取数据之后，它会经过相同的装饰器，这些装饰器会对数据进行加密和解码。</li>
</ul>
<p>The decorators and the data source class implement the same interface, which makes them all interchangeable in the client code.<br>装饰器和数据源类实现了相同的接口，这使得它们在客户端代码中可以互换。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The component interface defines operations that can be</span></span><br><span class="line"><span class="comment">// altered by decorators.</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">DataSource</span> is</span><br><span class="line">    method <span class="title function_">writeData</span><span class="params">(data)</span></span><br><span class="line">    method <span class="title function_">readData</span><span class="params">()</span>:data</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete components provide default implementations for the</span></span><br><span class="line"><span class="comment">// operations. There might be several variations of these</span></span><br><span class="line"><span class="comment">// classes in a program.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FileDataSource</span> <span class="keyword">implements</span> <span class="title class_">DataSource</span> is</span><br><span class="line">    constructor <span class="title function_">FileDataSource</span><span class="params">(filename)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">writeData</span><span class="params">(data)</span> is</span><br><span class="line">        <span class="comment">// Write data to file.</span></span><br><span class="line"></span><br><span class="line">    method <span class="title function_">readData</span><span class="params">()</span>:data is</span><br><span class="line">        <span class="comment">// Read data from file.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The base decorator class follows the same interface as the</span></span><br><span class="line"><span class="comment">// other components. The primary purpose of this class is to</span></span><br><span class="line"><span class="comment">// define the wrapping interface for all concrete decorators.</span></span><br><span class="line"><span class="comment">// The default implementation of the wrapping code might include</span></span><br><span class="line"><span class="comment">// a field for storing a wrapped component and the means to</span></span><br><span class="line"><span class="comment">// initialize it.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DataSourceDecorator</span> <span class="keyword">implements</span> <span class="title class_">DataSource</span> is</span><br><span class="line">    <span class="keyword">protected</span> field wrappee: DataSource</span><br><span class="line"></span><br><span class="line">    constructor <span class="title function_">DataSourceDecorator</span><span class="params">(source: DataSource)</span> <span class="type">is</span></span><br><span class="line">        <span class="variable">wrappee</span> <span class="operator">=</span> source</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The base decorator simply delegates all work to the</span></span><br><span class="line">    <span class="comment">// wrapped component. Extra behaviors can be added in</span></span><br><span class="line">    <span class="comment">// concrete decorators.</span></span><br><span class="line">    method <span class="title function_">writeData</span><span class="params">(data)</span> is</span><br><span class="line">        wrappee.writeData(data)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Concrete decorators may call the parent implementation of</span></span><br><span class="line">    <span class="comment">// the operation instead of calling the wrapped object</span></span><br><span class="line">    <span class="comment">// directly. This approach simplifies extension of decorator</span></span><br><span class="line">    <span class="comment">// classes.</span></span><br><span class="line">    method <span class="title function_">readData</span><span class="params">()</span>:data is</span><br><span class="line">        <span class="keyword">return</span> wrappee.readData()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete decorators must call methods on the wrapped object,</span></span><br><span class="line"><span class="comment">// but may add something of their own to the result. Decorators</span></span><br><span class="line"><span class="comment">// can execute the added behavior either before or after the</span></span><br><span class="line"><span class="comment">// call to a wrapped object.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EncryptionDecorator</span> <span class="keyword">extends</span> <span class="title class_">DataSourceDecorator</span> is</span><br><span class="line">    method <span class="title function_">writeData</span><span class="params">(data)</span> is</span><br><span class="line">        <span class="comment">// 1. Encrypt passed data.</span></span><br><span class="line">        <span class="comment">// 2. Pass encrypted data to the wrappee&#x27;s writeData</span></span><br><span class="line">        <span class="comment">// method.</span></span><br><span class="line"></span><br><span class="line">    method <span class="title function_">readData</span><span class="params">()</span>:data is</span><br><span class="line">        <span class="comment">// 1. Get data from the wrappee&#x27;s readData method.</span></span><br><span class="line">        <span class="comment">// 2. Try to decrypt it if it&#x27;s encrypted.</span></span><br><span class="line">        <span class="comment">// 3. Return the result.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// You can wrap objects in several layers of decorators.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CompressionDecorator</span> <span class="keyword">extends</span> <span class="title class_">DataSourceDecorator</span> is</span><br><span class="line">    method <span class="title function_">writeData</span><span class="params">(data)</span> is</span><br><span class="line">        <span class="comment">// 1. Compress passed data.</span></span><br><span class="line">        <span class="comment">// 2. Pass compressed data to the wrappee&#x27;s writeData</span></span><br><span class="line">        <span class="comment">// method.</span></span><br><span class="line"></span><br><span class="line">    method <span class="title function_">readData</span><span class="params">()</span>:data is</span><br><span class="line">        <span class="comment">// 1. Get data from the wrappee&#x27;s readData method.</span></span><br><span class="line">        <span class="comment">// 2. Try to decompress it if it&#x27;s compressed.</span></span><br><span class="line">        <span class="comment">// 3. Return the result.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Option 1. A simple example of a decorator assembly.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Application</span> is</span><br><span class="line">    method <span class="title function_">dumbUsageExample</span><span class="params">()</span> <span class="type">is</span></span><br><span class="line">        <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileDataSource</span>(<span class="string">&quot;somefile.dat&quot;</span>)</span><br><span class="line">        source.writeData(salaryRecords)</span><br><span class="line">        <span class="comment">// The target file has been written with plain data.</span></span><br><span class="line"></span><br><span class="line">        source = <span class="keyword">new</span> <span class="title class_">CompressionDecorator</span>(source)</span><br><span class="line">        source.writeData(salaryRecords)</span><br><span class="line">        <span class="comment">// The target file has been written with compressed</span></span><br><span class="line">        <span class="comment">// data.</span></span><br><span class="line"></span><br><span class="line">        source = <span class="keyword">new</span> <span class="title class_">EncryptionDecorator</span>(source)</span><br><span class="line">        <span class="comment">// The source variable now contains this:</span></span><br><span class="line">        <span class="comment">// Encryption &gt; Compression &gt; FileDataSource</span></span><br><span class="line">        source.writeData(salaryRecords)</span><br><span class="line">        <span class="comment">// The file has been written with compressed and</span></span><br><span class="line">        <span class="comment">// encrypted data.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Option 2. Client code that uses an external data source.</span></span><br><span class="line"><span class="comment">// SalaryManager objects neither know nor care about data</span></span><br><span class="line"><span class="comment">// storage specifics. They work with a pre-configured data</span></span><br><span class="line"><span class="comment">// source received from the app configurator.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SalaryManager</span> is</span><br><span class="line">    field source: DataSource</span><br><span class="line"></span><br><span class="line">    constructor <span class="title function_">SalaryManager</span><span class="params">(source: DataSource)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">load</span><span class="params">()</span> is</span><br><span class="line">        <span class="keyword">return</span> source.readData()</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">save</span><span class="params">()</span> is</span><br><span class="line">        source.writeData(salaryRecords)</span><br><span class="line">    <span class="comment">// ...Other useful methods...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// The app can assemble different stacks of decorators at</span></span><br><span class="line"><span class="comment">// runtime, depending on the configuration or environment.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ApplicationConfigurator</span> is</span><br><span class="line">    method <span class="title function_">configurationExample</span><span class="params">()</span> <span class="type">is</span></span><br><span class="line">        <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileDataSource</span>(<span class="string">&quot;salary.dat&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> (enabledEncryption)</span><br><span class="line">            source = <span class="keyword">new</span> <span class="title class_">EncryptionDecorator</span>(source)</span><br><span class="line">        <span class="keyword">if</span> (enabledCompression)</span><br><span class="line">            source = <span class="keyword">new</span> <span class="title class_">CompressionDecorator</span>(source)</span><br><span class="line"></span><br><span class="line">        logger = <span class="keyword">new</span> <span class="title class_">SalaryManager</span>(source)</span><br><span class="line">        salary = logger.load()</span><br><span class="line">    <span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<h2 id="Applicability-适用性"><a href="#Applicability-适用性" class="headerlink" title="Applicability  适用性"></a>Applicability  适用性</h2><ul>
<li><p>Use the Decorator pattern when you need to be able to assign extra behaviors to objects at runtime without breaking the code that uses these objects.<br>当您需要能够在运行时为对象分配额外的行为而不破坏使用这些对象的代码时，请使用装饰器模式。</p>
</li>
<li><p>The Decorator lets you structure your business logic into layers, create a decorator for each layer and compose objects with various combinations of this logic at runtime. The client code can treat all these objects in the same way, since they all follow a common interface.<br>Decorator允许您将业务逻辑结构化到层中，为每一层创建一个装饰器，并在运行时使用此逻辑的各种组合来组合对象。客户端代码可以以相同的方式处理所有这些对象，因为它们都遵循一个公共接口。</p>
</li>
<li><p>Use the pattern when it’s awkward or not possible to extend an object’s behavior using inheritance.<br>当难以或不可能使用继承扩展对象的行为时，请使用该模式。</p>
</li>
<li><p>Many programming languages have the <code>final</code> keyword that can be used to prevent further extension of a class. For a final class, the only way to reuse the existing behavior would be to wrap the class with your own wrapper, using the Decorator pattern.<br>许多编程语言都有 <code>final</code> 关键字，可以用来防止类的进一步扩展。对于最后一个类，重用现有行为的唯一方法是使用自己的包装器（使用Decorator模式）包装该类。</p>
</li>
</ul>
<h2 id="How-to-Implement-如何实施"><a href="#How-to-Implement-如何实施" class="headerlink" title="How to Implement 如何实施"></a>How to Implement 如何实施</h2><ol>
<li>Make sure your business domain can be represented as a primary component with multiple optional layers over it.<br>确保您的业务域可以表示为一个主要组件，在其上有多个可选层。</li>
<li>Figure out what methods are common to both the primary component and the optional layers. Create a component interface and declare those methods there.<br>找出主要组件和可选层共有的方法。创建一个组件接口并在那里声明这些方法。</li>
<li>Create a concrete component class and define the base behavior in it.<br>创建一个具体的组件类，并在其中定义基本行为。</li>
<li>Create a base decorator class. It should have a field for storing a reference to a wrapped object. The field should be declared with the component interface type to allow linking to concrete components as well as decorators. The base decorator must delegate all work to the wrapped object.<br>创建一个基本装饰器类。它应该有一个用于存储对包装对象的引用的字段。该字段应该用组件接口类型声明，以允许链接到具体的组件以及装饰器。基本装饰器必须将所有工作委托给包装对象。</li>
<li>Make sure all classes implement the component interface.<br>确保所有类都实现组件接口。</li>
<li>Create concrete decorators by extending them from the base decorator. A concrete decorator must execute its behavior before or after the call to the parent method (which always delegates to the wrapped object).<br>通过从基本装饰器扩展它们来创建具体的装饰器。一个具体的装饰器必须在调用父方法之前或之后执行它的行为（父方法总是委托给被包装的对象）。</li>
<li>The client code must be responsible for creating decorators and composing them in the way the client needs.<br>客户端代码必须负责创建装饰器并以客户端需要的方式组合它们。</li>
</ol>
<h2 id="Pros-and-Cons"><a href="#Pros-and-Cons" class="headerlink" title="Pros and Cons"></a>Pros and Cons</h2><p>利弊</p>
<ul>
<li><p> You can extend an object’s behavior without making a new subclass.<br>你可以扩展一个对象的行为而不需要创建一个新的子类。</p>
</li>
<li><p> You can add or remove responsibilities from an object at runtime.<br>您可以在运行时添加或删除对象的责任。</p>
</li>
<li><p> You can combine several behaviors by wrapping an object into multiple decorators.<br>通过将一个对象包装到多个装饰器中，可以联合收割机组合多种行为。</p>
</li>
<li><p> <em>Single Responsibility Principle</em>. You can divide a monolithic class that implements many possible variants of behavior into several smaller classes.<br>单一责任原则。您可以将实现许多可能的行为变体的单体类划分为几个较小的类。</p>
</li>
<li><p> It’s hard to remove a specific wrapper from the wrappers stack.<br>很难从wrapper堆栈中删除特定的wrapper。</p>
</li>
<li><p> It’s hard to implement a decorator in such a way that its behavior doesn’t depend on the order in the decorators stack.<br>很难实现一个装饰器，使其行为不依赖于装饰器堆栈中的顺序。</p>
</li>
<li><p> The initial configuration code of layers might look pretty ugly.<br>层的初始配置代码可能看起来很难看。</p>
</li>
</ul>
<h2 id="Relations-with-Other-Patterns"><a href="#Relations-with-Other-Patterns" class="headerlink" title="Relations with Other Patterns"></a>Relations with Other Patterns</h2><p>与其他模式的关系</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/adapter">Adapter</a> provides a completely different interface for accessing an existing object. On the other hand, with the <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/decorator">Decorator</a> pattern the interface either stays the same or gets extended. In addition, <em>Decorator</em> supports recursive composition, which isn’t possible when you use <em>Adapter</em>.<br>Adapter为访问现有对象提供了一个完全不同的接口。另一方面，对于Decorator模式，接口要么保持不变，要么得到扩展。此外，Decorator支持递归组合，这在使用Adapter时是不可能的。</p>
</li>
<li><p>With <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/adapter">Adapter</a> you access an existing object via different interface. With <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/proxy">Proxy</a>, the interface stays the same. With <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/decorator">Decorator</a> you access the object via an enhanced interface.<br>使用Adapter，您可以通过不同的接口访问现有对象。使用Proxy，接口保持不变。使用Decorator，您可以通过增强的接口访问对象。</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/chain-of-responsibility">Chain of Responsibility</a> and <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/decorator">Decorator</a> have very similar class structures. Both patterns rely on recursive composition to pass the execution through a series of objects. However, there are several crucial differences.<br>Chain of Responsibility和Decorator具有非常相似的类结构。这两种模式都依赖于递归组合来通过一系列对象传递执行。然而，有几个关键的区别。</p>
<p>The <em>CoR</em> handlers can execute arbitrary operations independently of each other. They can also stop passing the request further at any point. On the other hand, various <em>Decorators</em> can extend the object’s behavior while keeping it consistent with the base interface. In addition, decorators aren’t allowed to break the flow of the request.</p>
</li>
</ul>
<p>CoR处理程序可以彼此独立地执行任意操作。他们也可以在任何时候停止进一步传递请求。另一方面，各种装饰器可以扩展对象的行为，同时保持它与基接口的一致性。此外，装饰器不允许中断请求流。</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/composite">Composite</a> and <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/decorator">Decorator</a> have similar structure diagrams since both rely on recursive composition to organize an open-ended number of objects.<br>Composite和Decorator具有类似的结构图，因为它们都依赖于递归组合来组织开放数量的对象。</p>
<p>A <em>Decorator</em> is like a <em>Composite</em> but only has one child component. There’s another significant difference: <em>Decorator</em> adds additional responsibilities to the wrapped object, while <em>Composite</em> just “sums up” its children’s results.</p>
</li>
</ul>
<p>Decorator类似于Composite，但只有一个子组件。还有另一个显著的区别：Decorator为包装的对象添加了额外的责任，而Composite只是“总结”其子对象的结果。</p>
<p>  However, the patterns can also cooperate: you can use <em>Decorator</em> to extend the behavior of a specific object in the <em>Composite</em> tree.<br>然而，模式也可以合作：您可以使用Decorator来扩展Composite树中特定对象的行为。</p>
<ul>
<li>Designs that make heavy use of <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/composite">Composite</a> and <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/decorator">Decorator</a> can often benefit from using <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/prototype">Prototype</a>. Applying the pattern lets you clone complex structures instead of re-constructing them from scratch.<br>大量使用Composite和Decorator的设计通常可以从使用Prototype中受益。应用该模式可以克隆复杂的结构，而不是从头开始重新构造它们。</li>
<li><a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/decorator">Decorator</a> lets you change the skin of an object, while <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/strategy">Strategy</a> lets you change the guts.<br>Decorator允许您更改对象的皮肤，而Strategy允许您更改内部。</li>
<li><a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/decorator">Decorator</a> and <a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/proxy">Proxy</a> have similar structures, but very different intents. Both patterns are built on the composition principle, where one object is supposed to delegate some of the work to another. The difference is that a <em>Proxy</em> usually manages the life cycle of its service object on its own, whereas the composition of <em>Decorators</em> is always controlled by the client.<br>Decorator和Proxy具有类似的结构，但意图非常不同。这两种模式都建立在组合原则上，其中一个对象应该将一些工作委托给另一个对象。不同之处在于，Proxy通常自己管理其服务对象的生命周期，而Decorators的组成始终由客户端控制。</li>
</ul>
<h1 id="Decorator-in-Python-Python中的Decorator"><a href="#Decorator-in-Python-Python中的Decorator" class="headerlink" title="Decorator in Python Python中的Decorator"></a><strong>Decorator</strong> in Python Python中的Decorator</h1><p><strong>Decorator</strong> is a structural pattern that allows adding new behaviors to objects dynamically by placing them inside special wrapper objects, called <em>decorators</em>.<br>装饰器是一种结构化模式，它允许通过将对象放置在特殊的包装器对象（称为装饰器）中来动态地向对象添加新行为。</p>
<p>Using decorators you can wrap objects countless number of times since both target objects and decorators follow the same interface. The resulting object will get a stacking behavior of all wrappers.<br>使用装饰器，你可以无数次地包装对象，因为目标对象和装饰器都遵循相同的接口。结果对象将获得所有包装器的堆叠行为。</p>
<h2 id="Conceptual-Example-概念示例"><a href="#Conceptual-Example-概念示例" class="headerlink" title="Conceptual Example 概念示例"></a>Conceptual Example 概念示例</h2><p>This example illustrates the structure of the <strong>Decorator</strong> design pattern. It focuses on answering these questions:<br>这个例子说明了装饰器设计模式的结构。它侧重于回答这些问题：</p>
<ul>
<li>What classes does it consist of?<br>它由哪些类组成？</li>
<li>What roles do these classes play?<br>这些班级扮演什么角色？</li>
<li>In what way the elements of the pattern are related?<br>模式中的元素是以什么方式联系在一起的？</li>
</ul>
<h4 id="main-py：概念性示例"><a href="#main-py：概念性示例" class="headerlink" title="main.py：概念性示例"></a>main.py：概念性示例</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Component</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The base Component interface defines operations that can be altered by</span></span><br><span class="line"><span class="string">    decorators.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteComponent</span>(<span class="title class_ inherited__">Component</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Concrete Components provide default implementations of the operations. There</span></span><br><span class="line"><span class="string">    might be several variations of these classes.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ConcreteComponent&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Decorator</span>(<span class="title class_ inherited__">Component</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The base Decorator class follows the same interface as the other components.</span></span><br><span class="line"><span class="string">    The primary purpose of this class is to define the wrapping interface for</span></span><br><span class="line"><span class="string">    all concrete decorators. The default implementation of the wrapping code</span></span><br><span class="line"><span class="string">    might include a field for storing a wrapped component and the means to</span></span><br><span class="line"><span class="string">    initialize it.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    _component: Component = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, component: Component</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self._component = component</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">component</span>(<span class="params">self</span>) -&gt; Component:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        The Decorator delegates all work to the wrapped component.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> self._component</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> self._component.operation()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteDecoratorA</span>(<span class="title class_ inherited__">Decorator</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Concrete Decorators call the wrapped object and alter its result in some</span></span><br><span class="line"><span class="string">    way.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Decorators may call parent implementation of the operation, instead of</span></span><br><span class="line"><span class="string">        calling the wrapped object directly. This approach simplifies extension</span></span><br><span class="line"><span class="string">        of decorator classes.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;ConcreteDecoratorA(<span class="subst">&#123;self.component.operation()&#125;</span>)&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteDecoratorB</span>(<span class="title class_ inherited__">Decorator</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Decorators can execute their behavior either before or after the call to a</span></span><br><span class="line"><span class="string">    wrapped object.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;ConcreteDecoratorB(<span class="subst">&#123;self.component.operation()&#125;</span>)&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">client_code</span>(<span class="params">component: Component</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The client code works with all objects using the Component interface. This</span></span><br><span class="line"><span class="string">    way it can stay independent of the concrete classes of components it works</span></span><br><span class="line"><span class="string">    with.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;RESULT: <span class="subst">&#123;component.operation()&#125;</span>&quot;</span>, end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># This way the client code can support both simple components...</span></span><br><span class="line">    simple = ConcreteComponent()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: I&#x27;ve got a simple component:&quot;</span>)</span><br><span class="line">    client_code(simple)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ...as well as decorated ones.</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Note how decorators can wrap not only simple components but the other</span></span><br><span class="line">    <span class="comment"># decorators as well.</span></span><br><span class="line">    decorator1 = ConcreteDecoratorA(simple)</span><br><span class="line">    decorator2 = ConcreteDecoratorB(decorator1)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: Now I&#x27;ve got a decorated component:&quot;</span>)</span><br><span class="line">    client_code(decorator2)</span><br></pre></td></tr></table></figure>

<h4 id="Output-txt：执行结果"><a href="#Output-txt：执行结果" class="headerlink" title="Output.txt：执行结果"></a>Output.txt：执行结果</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Client: I&#x27;ve got a simple component:</span><br><span class="line">RESULT: ConcreteComponent</span><br><span class="line"></span><br><span class="line">Client: Now I&#x27;ve got a decorated component:</span><br><span class="line">RESULT: ConcreteDecoratorB(ConcreteDecoratorA(ConcreteComponent))</span><br></pre></td></tr></table></figure>

<h1 id="Decorator-in-Rust-饰Rust"><a href="#Decorator-in-Rust-饰Rust" class="headerlink" title="Decorator in Rust 饰Rust"></a><strong>Decorator</strong> in Rust 饰Rust</h1><p><strong>Decorator</strong> is a structural pattern that allows adding new behaviors to objects dynamically by placing them inside special wrapper objects, called <em>decorators</em>.<br>装饰器是一种结构化模式，它允许通过将对象放置在特殊的包装器对象（称为装饰器）中来动态地向对象添加新行为。</p>
<p>Using decorators you can wrap objects countless number of times since both target objects and decorators follow the same interface. The resulting object will get a stacking behavior of all wrappers.<br>使用装饰器，你可以无数次地包装对象，因为目标对象和装饰器都遵循相同的接口。结果对象将获得所有包装器的堆叠行为。</p>
<h2 id="Input-streams-decoration"><a href="#Input-streams-decoration" class="headerlink" title="Input streams decoration"></a>Input streams decoration</h2><p>输入流装饰</p>
<p>There is a <em><strong>practical example</strong></em>  in Rust’s standard library for input&#x2F;output operations.<br>在Rust的标准库中有一个实际的输入&#x2F;输出操作示例。</p>
<p>A buffered reader decorates a vector reader adding buffered behavior.<br>缓冲读取器装饰添加缓冲行为的向量读取器。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">input</span> = BufReader::<span class="title function_ invoke__">new</span>(Cursor::<span class="title function_ invoke__">new</span>(<span class="string">&quot;Input data&quot;</span>));</span><br><span class="line">input.<span class="title function_ invoke__">read</span>(&amp;<span class="keyword">mut</span> buf).<span class="title function_ invoke__">ok</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="main-rs"><a href="#main-rs" class="headerlink" title="main.rs"></a><strong>main.rs</strong></h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::io::&#123;BufReader, Cursor, Read&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">buf</span> = [<span class="number">0u8</span>; <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A buffered reader decorates a vector reader which wraps input data.</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">input</span> = BufReader::<span class="title function_ invoke__">new</span>(Cursor::<span class="title function_ invoke__">new</span>(<span class="string">&quot;Input data&quot;</span>));</span><br><span class="line"></span><br><span class="line">    input.<span class="title function_ invoke__">read</span>(&amp;<span class="keyword">mut</span> buf).<span class="title function_ invoke__">ok</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print!</span>(<span class="string">&quot;Read from a buffered reader: &quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> <span class="variable">byte</span> <span class="keyword">in</span> buf &#123;</span><br><span class="line">        <span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="type">char</span>::<span class="title function_ invoke__">from</span>(byte));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Read from a buffered reader: Input data</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2023/12/07/design-pattern/composite/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/07/design-pattern/composite/" class="post-title-link" itemprop="url">Composite 部分-整体模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-12-07 21:52:43 / Modified: 22:45:21" itemprop="dateCreated datePublished" datetime="2023-12-07T21:52:43+08:00">2023-12-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-pattern/" itemprop="url" rel="index"><span itemprop="name">design-pattern</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>18 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Composite-部分-整体模式"><a href="#Composite-部分-整体模式" class="headerlink" title="Composite 部分-整体模式"></a>Composite 部分-整体模式</h1><p>Also known as: Object Tree<br>也称为：对象树</p>
<h2 id="Intent-意图"><a href="#Intent-意图" class="headerlink" title="Intent 意图"></a>Intent 意图</h2><p><strong>Composite</strong> is a structural design pattern that lets you compose objects into tree structures and then work with these structures as if they were individual objects.<br>复合是一种结构设计模式，可用于将对象组合成树结构，然后像使用单个对象一样处理这些结构。</p>
<div align="center"> <img src="/images/composite-header.png"/></div>

<h2 id="Problem-问题"><a href="#Problem-问题" class="headerlink" title="Problem 问题"></a>Problem 问题</h2><p>Using the Composite pattern makes sense only when the core model of your app can be represented as a tree.<br>只有当应用的核心模型可以表示为树时，使用复合模式才有意义。</p>
<p>For example, imagine that you have two types of objects: <code>Products</code> and <code>Boxes</code>. A <code>Box</code> can contain several <code>Products</code> as well as a number of smaller <code>Boxes</code>. These little <code>Boxes</code> can also hold some <code>Products</code> or even smaller <code>Boxes</code>, and so on.<br>例如，假设您有两种类型的对象： <code>Products</code> 和 <code>Boxes</code>。 一个 <code>Box</code> 可以包含多个以及多个 <code>Products</code> 较小的 <code>Boxes</code>。这些小的也可以容纳一些 <code>Products</code> 甚至更小 <code>Boxes</code> 的 <code>Boxes</code> ，以此类推。</p>
<p>Say you decide to create an ordering system that uses these classes. Orders could contain simple products without any wrapping, as well as boxes stuffed with products…and other boxes. How would you determine the total price of such an order?<br>假设您决定创建一个使用这些类的排序系统。订单可以包含没有任何包装的简单产品，也可以包含装满产品的盒子……和其他盒子。您如何确定此类订单的总价？</p>
<div align="center"> <img src="/images/composite-problem-en.png"/>An order might comprise various products, packaged in boxes, which are packaged in bigger boxes and so on. The whole structure looks like an upside down tree.</br>一个订单可能包括各种产品，包装在盒子里，这些产品包装在更大的盒子里，依此类推。整个结构看起来像一棵倒置的树。</div>

<p>You could try the direct approach: unwrap all the boxes, go over all the products and then calculate the total. That would be doable in the real world; but in a program, it’s not as simple as running a loop. You have to know the classes of <code>Products</code> and <code>Boxes</code> you’re going through, the nesting level of the boxes and other nasty details beforehand. All of this makes the direct approach either too awkward or even impossible.<br>您可以尝试直接方法：打开所有盒子，检查所有产品，然后计算总数。这在现实世界中是可行的;但在程序中，它并不像运行循环那么简单。你必须事先知道 <code>Boxes</code> 你正在经历的 <code>Products</code> 类别、盒子的嵌套级别和其他令人讨厌的细节。所有这些都使得直接方法要么过于尴尬，甚至不可能。</p>
<h2 id="Solution-解决方案"><a href="#Solution-解决方案" class="headerlink" title="Solution 解决方案"></a>Solution 解决方案</h2><p>The Composite pattern suggests that you work with <code>Products</code> and <code>Boxes</code> through a common interface which declares a method for calculating the total price.<br>复合模式建议您使用 <code>Products</code> 并通过 <code>Boxes</code> 一个通用接口进行工作，该接口声明了计算总价的方法。</p>
<p>How would this method work? For a product, it’d simply return the product’s price. For a box, it’d go over each item the box contains, ask its price and then return a total for this box. If one of these items were a smaller box, that box would also start going over its contents and so on, until the prices of all inner components were calculated. A box could even add some extra cost to the final price, such as packaging cost.<br>这种方法如何工作？对于产品，它只会返回产品的价格。对于一个盒子，它会检查盒子里的每件物品，询问它的价格，然后返回这个盒子的总数。如果其中一个物品是一个较小的盒子，那么该盒子也会开始检查其内容，依此类推，直到计算出所有内部组件的价格。一个盒子甚至会给最终价格增加一些额外的成本，比如包装成本。</p>
<div align="center"> <img src="/images/composite-comic-1-en.png"/>The Composite pattern lets you run a behavior recursively over all components of an object tree.</br>Composite 模式允许您以递归方式对对象树的所有组件运行行为。</div>

<p>The greatest benefit of this approach is that you don’t need to care about the concrete classes of objects that compose the tree. You don’t need to know whether an object is a simple product or a sophisticated box. You can treat them all the same via the common interface. When you call a method, the objects themselves pass the request down the tree.<br>这种方法的最大好处是，您不需要关心组成树的具体对象类。您不需要知道一个对象是简单的产品还是复杂的盒子。您可以通过通用界面对它们一视同仁。调用方法时，对象本身会将请求传递到树中。</p>
<h2 id="Real-World-Analogy-真实世界的类比"><a href="#Real-World-Analogy-真实世界的类比" class="headerlink" title="Real-World Analogy 真实世界的类比"></a>Real-World Analogy 真实世界的类比</h2><div align="center"> <img src="/images/composite-live-example.png"/>An example of a military structure.</br>军事结构的一个例子。</div>
Armies of most countries are structured as hierarchies. An army consists of several divisions; a division is a set of brigades, and a brigade consists of platoons, which can be broken down into squads. Finally, a squad is a small group of real soldiers. Orders are given at the top of the hierarchy and passed down onto each level until every soldier knows what needs to be done.
大多数国家的军队都是等级制度。一支军队由几个师组成;一个师是一组旅，一个旅由排组成，排可以分解成小队。最后，小队是一小群真正的士兵。命令在等级制度的顶端下达，并向下传递到每个级别，直到每个士兵都知道需要做什么。

<h2 id="Structure-结构"><a href="#Structure-结构" class="headerlink" title="Structure 结构"></a>Structure 结构</h2><div align="center"> <img src="/images/composite-structure-en.png"/></div>

<ol>
<li><p>The <strong>Component</strong> interface describes operations that are common to both simple and complex elements of the tree.<br><strong>Component</strong> 接口描述树的简单元素和复杂元素通用的操作。</p>
</li>
<li><p>The Leaf is a basic element of a tree that doesn’t have sub-elements.<br>叶子是树的基本元素，没有子元素。</p>
</li>
</ol>
<p>Usually, leaf components end up doing most of the real work, since they don’t have anyone to delegate the work to.<br>通常，叶子组件最终会完成大部分实际工作，因为它们没有人可以将工作委派给它们。</p>
<ol start="3">
<li>The <strong>Container</strong> (aka composite) is an element that has sub-elements: leaves or other containers. A container doesn’t know the concrete classes of its children. It works with all sub-elements only via the component interface.<br>容器（又名复合）是一个具有子元素的元素：树叶或其他容器。容器不知道其子项的具体类。它仅通过组件接口处理所有子元素。</li>
</ol>
<p>Upon receiving a request, a container delegates the work to its sub-elements, processes intermediate results and then returns the final result to the client.<br>收到请求后，容器将工作委托给其子元素，处理中间结果，然后将最终结果返回给客户端。</p>
<ol start="4">
<li>The <strong>Client</strong> works with all elements through the component interface. As a result, the client can work in the same way with both simple or complex elements of the tree.<br>客户端通过组件接口处理所有元素。因此，客户端可以以相同的方式处理树的简单或复杂元素。</li>
</ol>
<h2 id="Pseudocode-伪代码"><a href="#Pseudocode-伪代码" class="headerlink" title="Pseudocode 伪代码"></a>Pseudocode 伪代码</h2><p>In this example, the <strong>Composite</strong> pattern lets you implement stacking of geometric shapes in a graphical editor.<br>在此示例中，复合模式允许您在图形编辑器中实现几何形状的堆叠。</p>
<div align="center"> <img src="/images/composite-example1.png"/>The geometric shapes editor example.</br>几何形状编辑器示例。</div>

<p>The <code>CompoundGraphic</code> class is a container that can comprise any number of sub-shapes, including other compound shapes. A compound shape has the same methods as a simple shape. However, instead of doing something on its own, a compound shape passes the request recursively to all its children and “sums up” the result.<br>该 <code>CompoundGraphic</code> 类是一个容器，可以包含任意数量的子形状，包括其他复合形状。复合形状与简单形状具有相同的方法。但是，复合形状不是自己执行某些操作，而是以递归方式将请求传递给其所有子项，并“汇总”结果。</p>
<p>The client code works with all shapes through the single interface common to all shape classes. Thus, the client doesn’t know whether it’s working with a simple shape or a compound one. The client can work with very complex object structures without being coupled to concrete classes that form that structure.<br>客户端代码通过所有形状类通用的单个接口处理所有形状。因此，客户不知道它是在处理简单形状还是复合形状。客户端可以使用非常复杂的对象结构，而无需与构成该结构的具体类耦合。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The component interface declares common operations for both</span></span><br><span class="line"><span class="comment">// simple and complex objects of a composition.</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Graphic</span> is</span><br><span class="line">    method <span class="title function_">move</span><span class="params">(x, y)</span></span><br><span class="line">    method <span class="title function_">draw</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The leaf class represents end objects of a composition. A</span></span><br><span class="line"><span class="comment">// leaf object can&#x27;t have any sub-objects. Usually, it&#x27;s leaf</span></span><br><span class="line"><span class="comment">// objects that do the actual work, while composite objects only</span></span><br><span class="line"><span class="comment">// delegate to their sub-components.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dot</span> <span class="keyword">implements</span> <span class="title class_">Graphic</span> is</span><br><span class="line">    field x, y</span><br><span class="line"></span><br><span class="line">    constructor <span class="title function_">Dot</span><span class="params">(x, y)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">move</span><span class="params">(x, y)</span> is</span><br><span class="line">        <span class="built_in">this</span>.x += x, <span class="built_in">this</span>.y += y</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">draw</span><span class="params">()</span> is</span><br><span class="line">        <span class="comment">// Draw a dot at X and Y.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// All component classes can extend other components.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">extends</span> <span class="title class_">Dot</span> is</span><br><span class="line">    field radius</span><br><span class="line"></span><br><span class="line">    constructor <span class="title function_">Circle</span><span class="params">(x, y, radius)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">draw</span><span class="params">()</span> is</span><br><span class="line">        <span class="comment">// Draw a circle at X and Y with radius R.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The composite class represents complex components that may</span></span><br><span class="line"><span class="comment">// have children. Composite objects usually delegate the actual</span></span><br><span class="line"><span class="comment">// work to their children and then &quot;sum up&quot; the result.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CompoundGraphic</span> <span class="keyword">implements</span> <span class="title class_">Graphic</span> is</span><br><span class="line">    field children: array of Graphic</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A composite object can add or remove other components</span></span><br><span class="line">    <span class="comment">// (both simple or complex) to or from its child list.</span></span><br><span class="line">    method <span class="title function_">add</span><span class="params">(child: Graphic)</span> is</span><br><span class="line">        <span class="comment">// Add a child to the array of children.</span></span><br><span class="line"></span><br><span class="line">    method <span class="title function_">remove</span><span class="params">(child: Graphic)</span> is</span><br><span class="line">        <span class="comment">// Remove a child from the array of children.</span></span><br><span class="line"></span><br><span class="line">    method <span class="title function_">move</span><span class="params">(x, y)</span> is</span><br><span class="line">        <span class="title function_">foreach</span> <span class="params">(child in children)</span> <span class="keyword">do</span></span><br><span class="line">            child.move(x, y)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// A composite executes its primary logic in a particular</span></span><br><span class="line">    <span class="comment">// way. It traverses recursively through all its children,</span></span><br><span class="line">    <span class="comment">// collecting and summing up their results. Since the</span></span><br><span class="line">    <span class="comment">// composite&#x27;s children pass these calls to their own</span></span><br><span class="line">    <span class="comment">// children and so forth, the whole object tree is traversed</span></span><br><span class="line">    <span class="comment">// as a result.</span></span><br><span class="line">    method <span class="title function_">draw</span><span class="params">()</span> is</span><br><span class="line">        <span class="comment">// 1. For each child component:</span></span><br><span class="line">        <span class="comment">//     - Draw the component.</span></span><br><span class="line">        <span class="comment">//     - Update the bounding rectangle.</span></span><br><span class="line">        <span class="comment">// 2. Draw a dashed rectangle using the bounding</span></span><br><span class="line">        <span class="comment">// coordinates.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// The client code works with all the components via their base</span></span><br><span class="line"><span class="comment">// interface. This way the client code can support simple leaf</span></span><br><span class="line"><span class="comment">// components as well as complex composites.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ImageEditor</span> is</span><br><span class="line">    field all: CompoundGraphic</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">load</span><span class="params">()</span> <span class="type">is</span></span><br><span class="line">        <span class="variable">all</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CompoundGraphic</span>()</span><br><span class="line">        all.add(<span class="keyword">new</span> <span class="title class_">Dot</span>(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">        all.add(<span class="keyword">new</span> <span class="title class_">Circle</span>(<span class="number">5</span>, <span class="number">3</span>, <span class="number">10</span>))</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Combine selected components into one complex composite</span></span><br><span class="line">    <span class="comment">// component.</span></span><br><span class="line">    method <span class="title function_">groupSelected</span><span class="params">(components: array of Graphic)</span> <span class="type">is</span></span><br><span class="line">        <span class="variable">group</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CompoundGraphic</span>()</span><br><span class="line">        foreach (component in components) <span class="keyword">do</span></span><br><span class="line">            group.add(component)</span><br><span class="line">            all.remove(component)</span><br><span class="line">        all.add(group)</span><br><span class="line">        <span class="comment">// All components will be drawn.</span></span><br><span class="line">        all.draw()</span><br></pre></td></tr></table></figure>

<h2 id="Applicability-适用性"><a href="#Applicability-适用性" class="headerlink" title="Applicability 适用性"></a>Applicability 适用性</h2><ul>
<li><p>** Use the Composite pattern when you have to implement a tree-like object structure. 当必须实现树状对象结构时，请使用 Composite 模式。**</p>
</li>
<li><p>The Composite pattern provides you with two basic element types that share a common interface: simple leaves and complex containers. A container can be composed of both leaves and other containers. This lets you construct a nested recursive object structure that resembles a tree.<br>Composite 模式为您提供了两种共享通用接口的基本元素类型：简单叶子和复杂容器。容器可以由叶子和其他容器组成。这使您可以构造类似于树的嵌套递归对象结构。</p>
</li>
<li><p><strong>Use the pattern when you want the client code to treat both simple and complex elements uniformly. 如果希望客户端代码统一处理简单元素和复杂元素，请使用该模式。</strong></p>
</li>
<li><p>All elements defined by the Composite pattern share a common interface. Using this interface, the client doesn’t have to worry about the concrete class of the objects it works with.<br>Composite 模式定义的所有元素共享一个公共接口。使用此接口，客户端不必担心它所处理的对象的具体类。</p>
</li>
</ul>
<h2 id="How-to-Implement-如何实现"><a href="#How-to-Implement-如何实现" class="headerlink" title="How to Implement 如何实现"></a>How to Implement 如何实现</h2><ol>
<li><p>Make sure that the core model of your app can be represented as a tree structure. Try to break it down into simple elements and containers. Remember that containers must be able to contain both simple elements and other containers.<br>确保应用的核心模型可以表示为树结构。尝试将其分解为简单的元素和容器。请记住，容器必须能够同时包含简单元素和其他容器。</p>
</li>
<li><p>Declare the component interface with a list of methods that make sense for both simple and complex components.<br>使用对简单和复杂组件都有意义的方法列表声明组件接口。</p>
</li>
<li><p>Create a leaf class to represent simple elements. A program may have multiple different leaf classes.<br>创建一个叶类来表示简单元素。一个程序可以有多个不同的叶类。</p>
</li>
</ol>
<p>Create a container class to represent complex elements. In this class, provide an array field for storing references to sub-elements. The array must be able to store both leaves and containers, so make sure it’s declared with the component interface type.<br>创建一个容器类来表示复杂元素。在此类中，提供一个数组字段，用于存储对子元素的引用。数组必须能够存储叶子和容器，因此请确保使用组件接口类型声明它。</p>
<ol start="4">
<li><p>While implementing the methods of the component interface, remember that a container is supposed to be delegating most of the work to sub-elements.<br>在实现组件接口的方法时，请记住，容器应该将大部分工作委托给子元素。</p>
</li>
<li><p>Finally, define the methods for adding and removal of child elements in the container.<br>最后，定义在容器中添加和删除子元素的方法。</p>
</li>
</ol>
<p>Keep in mind that these operations can be declared in the component interface. This would violate the Interface Segregation Principle because the methods will be empty in the leaf class. However, the client will be able to treat all the elements equally, even when composing the tree.<br>请记住，这些操作可以在组件接口中声明。这将违反接口隔离原则，因为方法在叶类中为空。但是，客户端将能够平等地对待所有元素，即使在组成树时也是如此。</p>
<h2 id="Pros-and-Cons-优点和缺点"><a href="#Pros-and-Cons-优点和缺点" class="headerlink" title="Pros and Cons 优点和缺点"></a>Pros and Cons 优点和缺点</h2><table>
<thead>
<tr>
<th>Pros 优点</th>
<th>Cons 缺点</th>
</tr>
</thead>
<tbody><tr>
<td>You can work with complex tree structures more conveniently: use polymorphism and recursion to your advantage. 您可以更方便地使用复杂的树结构：使用多态性和递归来发挥自己的优势。</td>
<td>It might be difficult to provide a common interface for classes whose functionality differs too much. In certain scenarios, you’d need to overgeneralize the component interface, making it harder to comprehend.可能很难为功能差异太大的类提供通用接口。在某些情况下，需要过度概括组件接口，使其更难理解。</td>
</tr>
<tr>
<td>Open&#x2F;Closed Principle. You can introduce new element types into the app without breaking the existing code, which now works with the object tree. 开&#x2F;闭原理。您可以在不破坏现有代码的情况下将新的元素类型引入应用程序，这些代码现在适用于对象树。</td>
<td></td>
</tr>
</tbody></table>
<h2 id="Relations-with-Other-Patterns-与其他模式的关系"><a href="#Relations-with-Other-Patterns-与其他模式的关系" class="headerlink" title="Relations with Other Patterns 与其他模式的关系"></a>Relations with Other Patterns 与其他模式的关系</h2><ul>
<li><p>You can use <strong>Builder</strong> when creating complex <strong>Composite</strong> trees because you can program its construction steps to work recursively.<br>在创建复杂的复合树时，可以使用 Builder，因为您可以对其构造步骤进行编程以递归方式工作。</p>
</li>
<li><p>Chain of <strong>Responsibility</strong> is often used in conjunction with <strong>Composite</strong>. In this case, when a leaf component gets a request, it may pass it through the chain of all of the parent components down to the root of the object tree.<br>责任链通常与复合结合使用。在这种情况下，当叶组件收到请求时，它可能会通过所有父组件的链向下传递到对象树的根目录。</p>
</li>
<li><p>You can use <strong>Iterators</strong> to traverse <strong>Composite</strong> trees.<br>可以使用迭代器遍历复合树。</p>
</li>
<li><p>You can use Visitor to execute an operation over an entire <strong>Composite</strong> tree.<br>您可以使用 Visitor 对整个复合树执行操作。</p>
</li>
<li><p>You can implement shared leaf nodes of the <strong>Composite</strong> tree as <strong>Flyweights</strong> to save some RAM.<br>您可以将复合树的共享叶节点实现为轻量级，以节省一些 RAM。</p>
</li>
<li><p><strong>Composite</strong> and <strong>Decorator</strong> have similar structure diagrams since both rely on recursive composition to organize an open-ended number of objects.<br>Composite 和 Decorator 具有相似的结构图，因为两者都依赖于递归组合来组织开放数量的对象。<br>A Decorator is like a Composite but only has one child component. There’s another significant difference: Decorator adds additional responsibilities to the wrapped object, while Composite just “sums up” its children’s results.<br>装饰器类似于 Composite，但只有一个子组件。还有另一个显著的区别：Decorator 为包装的对象添加了额外的职责，而 Composite 只是“汇总”其子对象的结果。<br>However, the patterns can also cooperate: you can use Decorator to extend the behavior of a specific object in the Composite tree.<br>但是，这些模式也可以协同工作：您可以使用 Decorator 来扩展 <strong>Composite</strong> 树中特定对象的行为。</p>
</li>
<li><p>Designs that make heavy use of <strong>Composite</strong> and <strong>Decorator</strong> can often benefit from using <strong>Prototype</strong>. Applying the pattern lets you clone complex structures instead of re-constructing them from scratch.<br>大量使用 <strong>Composite</strong> 和 <strong>Decorator</strong> 的设计通常可以从使用 <strong>Prototype</strong> 中受益。通过应用该模式，您可以克隆复杂的结构，而不是从头开始重新构建它们。</p>
</li>
</ul>
<h2 id="Code-Examples-代码示例"><a href="#Code-Examples-代码示例" class="headerlink" title="Code Examples 代码示例"></a>Code Examples 代码示例</h2><h3 id="Python-Conceptual-Example-概念示例"><a href="#Python-Conceptual-Example-概念示例" class="headerlink" title="Python Conceptual Example 概念示例"></a>Python Conceptual Example 概念示例</h3><p>This example illustrates the structure of the Composite design pattern. It focuses on answering these questions:<br>此示例阐释了 Composite 设计模式的结构。它侧重于回答以下问题：</p>
<ul>
<li>What classes does it consist of?<br>它由哪些类组成？</li>
<li>What roles do these classes play?<br>这些课程扮演什么角色？</li>
<li>In what way the elements of the pattern are related?<br>模式的元素以何种方式相关？</li>
</ul>
<h4 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> annotations</span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Component</span>(<span class="title class_ inherited__">ABC</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The base Component class declares common operations for both simple and</span></span><br><span class="line"><span class="string">    complex objects of a composition.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parent</span>(<span class="params">self</span>) -&gt; Component:</span><br><span class="line">        <span class="keyword">return</span> self._parent</span><br><span class="line"></span><br><span class="line"><span class="meta">    @parent.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parent</span>(<span class="params">self, parent: Component</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Optionally, the base Component can declare an interface for setting and</span></span><br><span class="line"><span class="string">        accessing a parent of the component in a tree structure. It can also</span></span><br><span class="line"><span class="string">        provide some default implementation for these methods.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        self._parent = parent</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    In some cases, it would be beneficial to define the child-management</span></span><br><span class="line"><span class="string">    operations right in the base Component class. This way, you won&#x27;t need to</span></span><br><span class="line"><span class="string">    expose any concrete component classes to the client code, even during the</span></span><br><span class="line"><span class="string">    object tree assembly. The downside is that these methods will be empty for</span></span><br><span class="line"><span class="string">    the leaf-level components.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, component: Component</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">remove</span>(<span class="params">self, component: Component</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_composite</span>(<span class="params">self</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        You can provide a method that lets the client code figure out whether a</span></span><br><span class="line"><span class="string">        component can bear children.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        The base Component may implement some default behavior or leave it to</span></span><br><span class="line"><span class="string">        concrete classes (by declaring the method containing the behavior as</span></span><br><span class="line"><span class="string">        &quot;abstract&quot;).</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Leaf</span>(<span class="title class_ inherited__">Component</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Leaf class represents the end objects of a composition. A leaf can&#x27;t</span></span><br><span class="line"><span class="string">    have any children.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Usually, it&#x27;s the Leaf objects that do the actual work, whereas Composite</span></span><br><span class="line"><span class="string">    objects only delegate to their sub-components.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Leaf&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Composite</span>(<span class="title class_ inherited__">Component</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Composite class represents the complex components that may have</span></span><br><span class="line"><span class="string">    children. Usually, the Composite objects delegate the actual work to their</span></span><br><span class="line"><span class="string">    children and then &quot;sum-up&quot; the result.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self._children: <span class="type">List</span>[Component] = []</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    A composite object can add or remove other components (both simple or</span></span><br><span class="line"><span class="string">    complex) to or from its child list.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, component: Component</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self._children.append(component)</span><br><span class="line">        component.parent = self</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">remove</span>(<span class="params">self, component: Component</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self._children.remove(component)</span><br><span class="line">        component.parent = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_composite</span>(<span class="params">self</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        The Composite executes its primary logic in a particular way. It</span></span><br><span class="line"><span class="string">        traverses recursively through all its children, collecting and summing</span></span><br><span class="line"><span class="string">        their results. Since the composite&#x27;s children pass these calls to their</span></span><br><span class="line"><span class="string">        children and so forth, the whole object tree is traversed as a result.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        results = []</span><br><span class="line">        <span class="keyword">for</span> child <span class="keyword">in</span> self._children:</span><br><span class="line">            results.append(child.operation())</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Branch(<span class="subst">&#123;<span class="string">&#x27;+&#x27;</span>.join(results)&#125;</span>)&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">client_code</span>(<span class="params">component: Component</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The client code works with all of the components via the base interface.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;RESULT: <span class="subst">&#123;component.operation()&#125;</span>&quot;</span>, end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">client_code2</span>(<span class="params">component1: Component, component2: Component</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Thanks to the fact that the child-management operations are declared in the</span></span><br><span class="line"><span class="string">    base Component class, the client code can work with any component, simple or</span></span><br><span class="line"><span class="string">    complex, without depending on their concrete classes.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> component1.is_composite():</span><br><span class="line">        component1.add(component2)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;RESULT: <span class="subst">&#123;component1.operation()&#125;</span>&quot;</span>, end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># This way the client code can support the simple leaf components...</span></span><br><span class="line">    simple = Leaf()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: I&#x27;ve got a simple component:&quot;</span>)</span><br><span class="line">    client_code(simple)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ...as well as the complex composites.</span></span><br><span class="line">    tree = Composite()</span><br><span class="line"></span><br><span class="line">    branch1 = Composite()</span><br><span class="line">    branch1.add(Leaf())</span><br><span class="line">    branch1.add(Leaf())</span><br><span class="line"></span><br><span class="line">    branch2 = Composite()</span><br><span class="line">    branch2.add(Leaf())</span><br><span class="line"></span><br><span class="line">    tree.add(branch1)</span><br><span class="line">    tree.add(branch2)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: Now I&#x27;ve got a composite tree:&quot;</span>)</span><br><span class="line">    client_code(tree)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: I don&#x27;t need to check the components classes even when managing the tree:&quot;</span>)</span><br><span class="line">    client_code2(tree, simple)</span><br></pre></td></tr></table></figure>

<h4 id="Output-txt-Execution-result"><a href="#Output-txt-Execution-result" class="headerlink" title="Output.txt: Execution result"></a>Output.txt: Execution result</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Client: I&#x27;ve got a simple component:</span><br><span class="line">RESULT: Leaf</span><br><span class="line"></span><br><span class="line">Client: Now I&#x27;ve got a composite tree:</span><br><span class="line">RESULT: Branch(Branch(Leaf+Leaf)+Branch(Leaf))</span><br><span class="line"></span><br><span class="line">Client: I don&#x27;t need to check the components classes even when managing the tree:</span><br><span class="line">RESULT: Branch(Branch(Leaf+Leaf)+Branch(Leaf)+Leaf)</span><br></pre></td></tr></table></figure>

<h3 id="Rust-Files-and-Folders-文件和文件夹"><a href="#Rust-Files-and-Folders-文件和文件夹" class="headerlink" title="Rust: Files and Folders 文件和文件夹"></a>Rust: Files and Folders 文件和文件夹</h3><p>Let’s try to understand the Composite pattern with an example of an operating system’s file system. In the file system, there are two types of objects: files and folders. There are cases when files and folders should be treated to be the same way. This is where the Composite pattern comes in handy.<br>让我们尝试通过操作系统文件系统的示例来理解 Composite 模式。在文件系统中，有两种类型的对象：文件和文件夹。在某些情况下，文件和文件夹应以相同的方式处理。这就是复合模式派上用场的地方。</p>
<p>File and Directory are both of the trait Component with a single search method. For a file, it will just look into the contents of the file; for a folder, it will go through all files of that folder to find that keyword.<br>File 并且 Directory 都 trait Component 使用单一 search 方法。对于文件，它只会查看文件的内容;对于文件夹，它将遍历该文件夹的所有文件以查找该关键字。</p>
<h4 id="fs-mod-rs"><a href="#fs-mod-rs" class="headerlink" title="fs&#x2F;mod.rs"></a>fs&#x2F;mod.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> file;</span><br><span class="line"><span class="keyword">mod</span> folder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">use</span> file::File;</span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">use</span> folder::Folder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">Component</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">search</span>(&amp;<span class="keyword">self</span>, keyword: &amp;<span class="type">str</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="fs-file-rs"><a href="#fs-file-rs" class="headerlink" title="fs&#x2F;file.rs"></a>fs&#x2F;file.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> super::Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">File</span> &#123;</span><br><span class="line">    name: &amp;<span class="symbol">&#x27;static</span> <span class="type">str</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">File</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">new</span>(name: &amp;<span class="symbol">&#x27;static</span> <span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123; name &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Component</span> <span class="keyword">for</span> <span class="title class_">File</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">search</span>(&amp;<span class="keyword">self</span>, keyword: &amp;<span class="type">str</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Searching for keyword &#123;&#125; in file &#123;&#125;&quot;</span>, keyword, <span class="keyword">self</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="fs-folder-rs"><a href="#fs-folder-rs" class="headerlink" title="fs&#x2F;folder.rs"></a>fs&#x2F;folder.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> super::Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Folder</span> &#123;</span><br><span class="line">    name: &amp;<span class="symbol">&#x27;static</span> <span class="type">str</span>,</span><br><span class="line">    components: <span class="type">Vec</span>&lt;<span class="type">Box</span>&lt;<span class="keyword">dyn</span> Component&gt;&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Folder</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">new</span>(name: &amp;<span class="symbol">&#x27;static</span> <span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123;</span><br><span class="line">            name,</span><br><span class="line">            components: <span class="built_in">vec!</span>[],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">add</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, component: <span class="keyword">impl</span> <span class="title class_">Component</span> + <span class="symbol">&#x27;static</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.components.<span class="title function_ invoke__">push</span>(<span class="type">Box</span>::<span class="title function_ invoke__">new</span>(component));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Component</span> <span class="keyword">for</span> <span class="title class_">Folder</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">search</span>(&amp;<span class="keyword">self</span>, keyword: &amp;<span class="type">str</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">&quot;Searching recursively for keyword &#123;&#125; in folder &#123;&#125;&quot;</span>,</span><br><span class="line">            keyword, <span class="keyword">self</span>.name</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> <span class="variable">component</span> <span class="keyword">in</span> <span class="keyword">self</span>.components.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line">            component.<span class="title function_ invoke__">search</span>(keyword);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="main-rs"><a href="#main-rs" class="headerlink" title="main.rs"></a>main.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> fs;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> fs::&#123;Component, File, Folder&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">file1</span> = File::<span class="title function_ invoke__">new</span>(<span class="string">&quot;File 1&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">file2</span> = File::<span class="title function_ invoke__">new</span>(<span class="string">&quot;File 2&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">file3</span> = File::<span class="title function_ invoke__">new</span>(<span class="string">&quot;File 3&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">folder1</span> = Folder::<span class="title function_ invoke__">new</span>(<span class="string">&quot;Folder 1&quot;</span>);</span><br><span class="line">    folder1.<span class="title function_ invoke__">add</span>(file1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">folder2</span> = Folder::<span class="title function_ invoke__">new</span>(<span class="string">&quot;Folder 2&quot;</span>);</span><br><span class="line">    folder2.<span class="title function_ invoke__">add</span>(file2);</span><br><span class="line">    folder2.<span class="title function_ invoke__">add</span>(file3);</span><br><span class="line">    folder2.<span class="title function_ invoke__">add</span>(folder1);</span><br><span class="line"></span><br><span class="line">    folder2.<span class="title function_ invoke__">search</span>(<span class="string">&quot;rose&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Searching recursively for keyword rose in folder Folder 2</span><br><span class="line">Searching for keyword rose in file File 2</span><br><span class="line">Searching for keyword rose in file File 3</span><br><span class="line">Searching recursively for keyword rose in folder Folder 1</span><br><span class="line">Searching for keyword rose in file File 1</span><br><span class="line">------------------------------------</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2023/12/06/design-pattern/bridge/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/06/design-pattern/bridge/" class="post-title-link" itemprop="url">Bridge</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-12-06 21:36:04 / Modified: 22:52:20" itemprop="dateCreated datePublished" datetime="2023-12-06T21:36:04+08:00">2023-12-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-pattern/" itemprop="url" rel="index"><span itemprop="name">design-pattern</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>5.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>21 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Bridge-桥接模式"><a href="#Bridge-桥接模式" class="headerlink" title="Bridge 桥接模式"></a>Bridge 桥接模式</h1><h2 id="Intent-意图"><a href="#Intent-意图" class="headerlink" title="Intent 意图"></a>Intent 意图</h2><p><strong>Bridge</strong> is a structural design pattern that lets you split a large class or a set of closely related classes into two separate hierarchies—abstraction and implementation—which can be developed independently of each other.<br><strong>Bridge</strong>是一种结构设计模式，它允许您将一个大型类或一组密切相关的类拆分为两个单独的层次结构（抽象和实现），这两个层次结构可以相互独立开发。</p>
<div align="center"> <img src="/images/bridge-header.png"/></div>

<h2 id="Problem-问题"><a href="#Problem-问题" class="headerlink" title="Problem 问题"></a>Problem 问题</h2><p>Abstraction? Implementation? Sound scary? Stay calm and let’s consider a simple example.<br>抽象化？实现？听起来很吓人？保持冷静，让我们考虑一个简单的例子。</p>
<p>Say you have a geometric <code>Shape</code> class with a pair of subclasses: <code>Circle</code> and <code>Square</code>. You want to extend this class hierarchy to incorporate colors, so you plan to create <code>Red</code> and <code>Blue</code> shape subclasses. However, since you already have two subclasses, you’ll need to create four class combinations such as <code>BlueCircle</code> and <code>RedSquare</code>.<br>假设您有一个几何类，其中包含一对子 <code>Shape</code> 类： <code>Circle</code> 和 <code>Square</code> 。您希望扩展此类层次结构以合并颜色，因此您计划创建 <code>Red</code> 和 <code>Blue</code> 调整子类。但是，由于您已经有两个子类，因此需要创建四个类组合，例如 <code>BlueCircle</code> 和 <code>RedSquare</code> 。</p>
<div align="center"> <img src="/images/bridge-problem-en.png"/>Number of class combinations grows in geometric progression.</br>类组合的数量以几何级数增长。</div>
Adding new shape types and colors to the hierarchy will grow it exponentially. For example, to add a triangle shape you’d need to introduce two subclasses, one for each color. And after that, adding a new color would require creating three subclasses, one for each shape type. The further we go, the worse it becomes.
向层次结构添加新的形状类型和颜色将使其呈指数级增长。例如，要添加三角形形状，您需要引入两个子类，每个子类对应一种颜色。之后，添加新颜色将需要创建三个子类，每个子类对应一个形状类型。我们走得越远，情况就越糟。

<h2 id="Solution-解决方案"><a href="#Solution-解决方案" class="headerlink" title="Solution 解决方案"></a>Solution 解决方案</h2><p>This problem occurs because we’re trying to extend the shape classes in two independent dimensions: by form and by color. That’s a very common issue with class inheritance.<br>出现此问题的原因是，我们尝试在两个独立的维度中扩展形状类：按形状和按颜色。这是类继承的一个非常常见的问题。</p>
<p>The Bridge pattern attempts to solve this problem by switching from inheritance to the object composition. What this means is that you extract one of the dimensions into a separate class hierarchy, so that the original classes will reference an object of the new hierarchy, instead of having all of its state and behaviors within one class.<br>Bridge 模式试图通过从继承切换到对象组合来解决此问题。这意味着将其中一个维度提取到单独的类层次结构中，以便原始类将引用新层次结构的对象，而不是将其所有状态和行为都放在一个类中。</p>
<div align="center"> <img src="/images/bridge-solution-en.png"/>You can prevent the explosion of a class hierarchy by transforming it into several related hierarchies.</br>可以通过将类层次结构转换为多个相关的层次结构来防止类层次结构的爆炸式增长。</div>
Following this approach, we can extract the color-related code into its own class with two subclasses: `Red` and `Blue`. The `Shape` class then gets a reference field pointing to one of the color objects. Now the shape can delegate any color-related work to the linked color object. That reference will act as a bridge between the `Shape` and `Color` classes. From now on, adding new colors won’t require changing the shape hierarchy, and vice versa.
按照这种方法，我们可以将与颜色相关的代码提取到它自己的类中，其中包含两个子类： `Red` 和 `Blue` .然后，该 `Shape` 类获取指向其中一个颜色对象的引用字段。现在，形状可以将任何与颜色相关的工作委托给链接的颜色对象。该引用将充当 `Shape` 和 `Color` 类之间的桥梁。从现在开始，添加新颜色将不需要更改形状层次结构，反之亦然。

<h3 id="Abstraction-and-Implementation-抽象和实现"><a href="#Abstraction-and-Implementation-抽象和实现" class="headerlink" title="Abstraction and Implementation 抽象和实现"></a>Abstraction and Implementation 抽象和实现</h3><p>The <a target="_blank" rel="noopener" href="https://refactoring.guru/gof-book" title="“Gang of Four” is a nickname given to the four authors of the original book about design patterns: Design Patterns: Elements of Reusable Object-Oriented Software 设计模式：可重用面向对象软件的元素">GoF book</a>  introduces the terms Abstraction and Implementation as part of the Bridge definition. In my opinion, the terms sound too academic and make the pattern seem more complicated than it really is. Having read the simple example with shapes and colors, let’s decipher the meaning behind the GoF book’s scary words.<br>GoF一书引入了术语“抽象”和“实现”，作为桥接定义的一部分。在我看来，这些术语听起来太学术化了，使模式看起来比实际情况更复杂。在阅读了带有形状和颜色的简单示例之后，让我们破译 GoF 书的可怕单词背后的含义。</p>
<p>Abstraction (also called interface) is a high-level control layer for some entity. This layer isn’t supposed to do any real work on its own. It should delegate the work to the implementation layer (also called platform).<br>抽象（也称为接口）是某些实体的高级控制层。这个层不应该自己做任何真正的工作。它应该将工作委托给实现层（也称为平台）。</p>
<p>Note that we’re not talking about interfaces or abstract classes from your programming language. These aren’t the same things.<br>请注意，我们不是在谈论编程语言中的接口或抽象类。这些不是一回事。</p>
<p>When talking about real applications, the abstraction can be represented by a graphical user interface (GUI), and the implementation could be the underlying operating system code (API) which the GUI layer calls in response to user interactions.<br>在谈论实际应用程序时，抽象可以由图形用户界面 （GUI） 表示，实现可以是 GUI 层为响应用户交互而调用的底层操作系统代码 （API）。</p>
<p>Generally speaking, you can extend such an app in two independent directions:<br>一般来说，您可以在两个独立的方向上扩展此类应用程序：</p>
<ul>
<li>Have several different GUIs (for instance, tailored for regular customers or admins).<br>有几个不同的 GUI（例如，为普通客户或管理员量身定制）。</li>
<li>Support several different APIs (for example, to be able to launch the app under Harmony, Windows, Linux, and macOS).<br>支持多个不同的 API（例如，能够在 Harmony, Windows、Linux 和 macOS 下启动应用程序）。</li>
</ul>
<p>In a worst-case scenario, this app might look like a giant spaghetti bowl, where hundreds of conditionals connect different types of GUI with various APIs all over the code.<br>在最坏的情况下，这个应用程序可能看起来像一个巨大的意大利面碗，其中数百个条件将不同类型的 GUI 与代码中的各种 API 连接起来。</p>
<div align="center"> <img src="/images/bridge-bridge-3-en.png"/>Making even a simple change to a monolithic codebase is pretty hard because you must understand the entire thing very well. Making changes to smaller, well-defined modules is much easier.</br>即使是对单体代码库进行简单的更改也非常困难，因为您必须很好地理解整个事情。对更小、定义明确的模块进行更改要容易得多。</div>
You can bring order to this chaos by extracting the code related to specific interface-platform combinations into separate classes. However, soon you’ll discover that there are lots of these classes. The class hierarchy will grow exponentially because adding a new GUI or supporting a different API would require creating more and more classes.
您可以通过将与特定接口平台组合相关的代码提取到单独的类中来恢复这种混乱。但是，很快您就会发现有很多这样的课程。类层次结构将呈指数级增长，因为添加新的 GUI 或支持不同的 API 需要创建越来越多的类。

<p>Let’s try to solve this issue with the Bridge pattern. It suggests that we divide the classes into two hierarchies:<br>让我们尝试使用 Bridge 模式来解决这个问题。它建议我们将类分为两个层次结构：</p>
<ul>
<li>Abstraction: the GUI layer of the app.<br>抽象：应用的 GUI 层。</li>
<li>Implementation: the operating systems’ APIs.<br>实现：操作系统的 API。<div align="center"> <img src="/images/bridge-bridge-2-en.png"/>One of the ways to structure a cross-platform application.</br>构建跨平台应用程序的方法之一。</div>
The abstraction object controls the appearance of the app, delegating the actual work to the linked implementation object. Different implementations are interchangeable as long as they follow a common interface, enabling the same GUI to work under Harmony, Windows and Linux.
抽象对象控制应用的外观，将实际工作委托给链接的实现对象。不同的实现是可以互换的，只要它们遵循一个通用的接口，使相同的 GUI 能够在Harmony, Windows 和 Linux 下工作。</li>
</ul>
<p>As a result, you can change the GUI classes without touching the API-related classes. Moreover, adding support for another operating system only requires creating a subclass in the implementation hierarchy.<br>因此，您可以在不接触 API 相关类的情况下更改 GUI 类。此外，添加对另一个操作系统的支持只需要在实现层次结构中创建一个子类。</p>
<h2 id="Structure-结构"><a href="#Structure-结构" class="headerlink" title="Structure 结构"></a>Structure 结构</h2><div align="center"> <img src="/images/bridge-structure-en.png"/></div>

<ol>
<li><p>The <strong>Abstraction</strong> provides high-level control logic. It relies on the implementation object to do the actual low-level work.<br>抽象提供高级控制逻辑。它依赖于实现对象来执行实际的低级工作。</p>
</li>
<li><p>The <strong>Implementation</strong> declares the interface that’s common for all concrete implementations. An abstraction can only communicate with an implementation object via methods that are declared here.<br>实现声明了所有具体实现通用的接口。抽象只能通过此处声明的方法与实现对象进行通信。</p>
</li>
<li><p><strong>Concrete Implementations</strong> contain platform-specific code.<br>具体实现包含特定于平台的代码。</p>
</li>
<li><p><strong>Refined Abstractions</strong> provide variants of control logic. Like their parent, they work with different implementations via the general implementation interface.<br>精炼的抽象提供了控制逻辑的变体。与它们的父级一样，它们通过通用实现接口使用不同的实现。</p>
</li>
<li><p>Usually, the <strong>Client</strong> is only interested in working with the abstraction. However, it’s the client’s job to link the abstraction object with one of the implementation objects.<br>通常，客户端只对处理抽象感兴趣。但是，客户端的工作是将抽象对象与其中一个实现对象链接起来。</p>
</li>
</ol>
<h2 id="Pseudocode-伪代码"><a href="#Pseudocode-伪代码" class="headerlink" title="Pseudocode 伪代码"></a>Pseudocode 伪代码</h2><p>This example illustrates how the <strong>Bridge</strong> pattern can help divide the monolithic code of an app that manages devices and their remote controls. The <code>Device</code> classes act as the implementation, whereas the <code>Remote</code>s act as the abstraction.<br>此示例演示了 Bridge 模式如何帮助划分管理设备及其遥控器的应用的整体代码。 <code>Device</code> 类充当实现，而 <code>Remote</code>s 充当抽象。</p>
<div align="center"> <img src="/images/bridge-example-en.png"/>The original class hierarchy is divided into two parts: devices and remote controls.</br>原始的类层次结构分为两部分：设备和遥控器。</div>
The base remote control class declares a reference field that links it with a device object. All remotes work with the devices via the general device interface, which lets the same remote support multiple device types.
基远程控制类声明一个引用字段，该字段将其与设备对象链接。所有遥控器都通过通用设备接口与设备配合使用，这使得同一个遥控器支持多种设备类型。

<p>You can develop the remote control classes independently from the device classes. All that’s needed is to create a new remote subclass. For example, a basic remote control might only have two buttons, but you could extend it with additional features, such as an extra battery or a touchscreen.<br>您可以独立于设备类开发远程控制类。所需要的只是创建一个新的远程子类。例如，一个基本的遥控器可能只有两个按钮，但您可以使用其他功能（例如额外的电池或触摸屏）对其进行扩展。</p>
<p>The client code links the desired type of remote control with a specific device object via the remote’s constructor.<br>客户端代码通过遥控器的构造函数将所需类型的遥控器与特定设备对象链接起来。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The &quot;abstraction&quot; defines the interface for the &quot;control&quot;</span></span><br><span class="line"><span class="comment">// part of the two class hierarchies. It maintains a reference</span></span><br><span class="line"><span class="comment">// to an object of the &quot;implementation&quot; hierarchy and delegates</span></span><br><span class="line"><span class="comment">// all of the real work to this object.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RemoteControl</span> is</span><br><span class="line">    <span class="keyword">protected</span> field device: Device</span><br><span class="line">    constructor <span class="title function_">RemoteControl</span><span class="params">(device: Device)</span> is</span><br><span class="line">        <span class="built_in">this</span>.device = device</span><br><span class="line">    method <span class="title function_">togglePower</span><span class="params">()</span> is</span><br><span class="line">        <span class="title function_">if</span> <span class="params">(device.isEnabled()</span>) then</span><br><span class="line">            device.disable()</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            device.enable()</span><br><span class="line">    method <span class="title function_">volumeDown</span><span class="params">()</span> is</span><br><span class="line">        device.setVolume(device.getVolume() - <span class="number">10</span>)</span><br><span class="line">    method <span class="title function_">volumeUp</span><span class="params">()</span> is</span><br><span class="line">        device.setVolume(device.getVolume() + <span class="number">10</span>)</span><br><span class="line">    method <span class="title function_">channelDown</span><span class="params">()</span> is</span><br><span class="line">        device.setChannel(device.getChannel() - <span class="number">1</span>)</span><br><span class="line">    method <span class="title function_">channelUp</span><span class="params">()</span> is</span><br><span class="line">        device.setChannel(device.getChannel() + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// You can extend classes from the abstraction hierarchy</span></span><br><span class="line"><span class="comment">// independently from device classes.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AdvancedRemoteControl</span> <span class="keyword">extends</span> <span class="title class_">RemoteControl</span> is</span><br><span class="line">    method <span class="title function_">mute</span><span class="params">()</span> is</span><br><span class="line">        device.setVolume(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// The &quot;implementation&quot; interface declares methods common to all</span></span><br><span class="line"><span class="comment">// concrete implementation classes. It doesn&#x27;t have to match the</span></span><br><span class="line"><span class="comment">// abstraction&#x27;s interface. In fact, the two interfaces can be</span></span><br><span class="line"><span class="comment">// entirely different. Typically the implementation interface</span></span><br><span class="line"><span class="comment">// provides only primitive operations, while the abstraction</span></span><br><span class="line"><span class="comment">// defines higher-level operations based on those primitives.</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Device</span> is</span><br><span class="line">    method <span class="title function_">isEnabled</span><span class="params">()</span></span><br><span class="line">    method <span class="title function_">enable</span><span class="params">()</span></span><br><span class="line">    method <span class="title function_">disable</span><span class="params">()</span></span><br><span class="line">    method <span class="title function_">getVolume</span><span class="params">()</span></span><br><span class="line">    method <span class="title function_">setVolume</span><span class="params">(percent)</span></span><br><span class="line">    method <span class="title function_">getChannel</span><span class="params">()</span></span><br><span class="line">    method <span class="title function_">setChannel</span><span class="params">(channel)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// All devices follow the same interface.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tv</span> <span class="keyword">implements</span> <span class="title class_">Device</span> is</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Radio</span> <span class="keyword">implements</span> <span class="title class_">Device</span> is</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Somewhere in client code.</span></span><br><span class="line">tv = <span class="keyword">new</span> <span class="title class_">Tv</span>()</span><br><span class="line">remote = <span class="keyword">new</span> <span class="title class_">RemoteControl</span>(tv)</span><br><span class="line">remote.togglePower()</span><br><span class="line"></span><br><span class="line">radio = <span class="keyword">new</span> <span class="title class_">Radio</span>()</span><br><span class="line">remote = <span class="keyword">new</span> <span class="title class_">AdvancedRemoteControl</span>(radio)</span><br></pre></td></tr></table></figure>

<h2 id="Applicability-适用性"><a href="#Applicability-适用性" class="headerlink" title="Applicability 适用性"></a>Applicability 适用性</h2><ul>
<li><p><strong>Use the Bridge pattern when you want to divide and organize a monolithic class that has several variants of some functionality (for example, if the class can work with various database servers).如果要划分和组织具有某些功能的多个变体的整体类（例如，如果该类可以与各种数据库服务器一起使用），请使用 Bridge 模式。</strong></p>
</li>
<li><p>The bigger a class becomes, the harder it is to figure out how it works, and the longer it takes to make a change. The changes made to one of the variations of functionality may require making changes across the whole class, which often results in making errors or not addressing some critical side effects.<br>一个班级变得越大，就越难弄清楚它是如何工作的，做出改变所需的时间就越长。对功能变体之一所做的更改可能需要在整个类中进行更改，这通常会导致出错或无法解决一些关键的副作用。</p>
</li>
</ul>
<p>The Bridge pattern lets you split the monolithic class into several class hierarchies. After this, you can change the classes in each hierarchy independently of the classes in the others. This approach simplifies code maintenance and minimizes the risk of breaking existing code.<br>Bridge 模式允许您将整体类拆分为多个类层次结构。在此之后，您可以独立于其他层次结构中的类更改每个层次结构中的类。此方法简化了代码维护，并最大限度地降低了破坏现有代码的风险。</p>
<ul>
<li><p><strong>Use the pattern when you need to extend a class in several orthogonal (independent) dimensions. 当您需要在多个正交（独立）维度中扩展类时，请使用该模式。</strong></p>
</li>
<li><p>The Bridge suggests that you extract a separate class hierarchy for each of the dimensions. The original class delegates the related work to the objects belonging to those hierarchies instead of doing everything on its own.<br>Bridge 建议您为每个维度提取单独的类层次结构。原始类将相关工作委托给属于这些层次结构的对象，而不是自己执行所有操作。</p>
</li>
</ul>
<p> Use the Bridge if you need to be able to switch implementations at runtime.<br>如果您需要能够在运行时切换实现，请使用 Bridge。</p>
<p> Although it’s optional, the Bridge pattern lets you replace the implementation object inside the abstraction. It’s as easy as assigning a new value to a field.<br>尽管它是可选的，但 Bridge 模式允许您替换抽象中的实现对象。这就像为字段分配新值一样简单。</p>
<p>By the way, this last item is the main reason why so many people confuse the Bridge with the Strategy pattern. Remember that a pattern is more than just a certain way to structure your classes. It may also communicate intent and a problem being addressed.<br>顺便说一句，最后一项是这么多人将桥接模式与策略模式混淆的主要原因。请记住，模式不仅仅是构建类的某种方式。它还可以传达意图和正在解决的问题。</p>
<h2 id="How-to-Implement-如何实现"><a href="#How-to-Implement-如何实现" class="headerlink" title="How to Implement 如何实现"></a>How to Implement 如何实现</h2><ol>
<li><p>Identify the orthogonal dimensions in your classes. These independent concepts could be: abstraction&#x2F;platform, domain&#x2F;infrastructure, front-end&#x2F;back-end, or interface&#x2F;implementation.<br>确定类中的正交维度。这些独立的概念可以是：抽象&#x2F;平台、域&#x2F;基础结构、前端&#x2F;后端或接口&#x2F;实现。</p>
</li>
<li><p>See what operations the client needs and define them in the base abstraction class.<br>查看客户端需要哪些操作，并在基抽象类中定义它们。</p>
</li>
<li><p>Determine the operations available on all platforms. Declare the ones that the abstraction needs in the general implementation interface.<br>确定所有平台上可用的操作。在通用实现接口中声明抽象需要的那些。</p>
</li>
<li><p>For all platforms in your domain create concrete implementation classes, but make sure they all follow the implementation interface.<br>对于域中的所有平台，请创建具体的实现类，但请确保它们都遵循实现接口。</p>
</li>
<li><p>Inside the abstraction class, add a reference field for the implementation type. The abstraction delegates most of the work to the implementation object that’s referenced in that field.<br>在抽象类中，为实现类型添加一个引用字段。抽象将大部分工作委托给该字段中引用的实现对象。</p>
</li>
<li><p>If you have several variants of high-level logic, create refined abstractions for each variant by extending the base abstraction class.<br>如果有多个高级逻辑变体，请通过扩展基本抽象类为每个变体创建精细的抽象。</p>
</li>
<li><p>The client code should pass an implementation object to the abstraction’s constructor to associate one with the other. After that, the client can forget about the implementation and work only with the abstraction object.<br>客户端代码应将实现对象传递给抽象的构造函数，以将一个对象与另一个对象相关联。之后，客户端可以忘记实现，只使用抽象对象。</p>
</li>
</ol>
<h2 id="Pros-and-Cons-优点和缺点"><a href="#Pros-and-Cons-优点和缺点" class="headerlink" title="Pros and Cons 优点和缺点"></a>Pros and Cons 优点和缺点</h2><table>
<thead>
<tr>
<th>Pros 优点</th>
<th>Cons 缺点</th>
</tr>
</thead>
<tbody><tr>
<td>You can create platform-independent classes and apps.您可以创建与平台无关的类和应用。</td>
<td>You might make the code more complicated by applying the pattern to a highly cohesive class. 通过将模式应用于高度内聚的类，可以使代码更加复杂。</td>
</tr>
<tr>
<td>The client code works with high-level abstractions. It isn’t exposed to the platform details. 客户端代码使用高级抽象。它不会公开给平台详细信息。</td>
<td></td>
</tr>
<tr>
<td>Open&#x2F;Closed Principle. You can introduce new abstractions and implementations independently from each other. 开&#x2F;闭原理。您可以引入新的抽象和实现，彼此独立。</td>
<td></td>
</tr>
<tr>
<td>Single Responsibility Principle. You can focus on high-level logic in the abstraction and on platform details in the implementation. 单一责任原则。您可以专注于抽象中的高级逻辑和实现中的平台细节。</td>
<td></td>
</tr>
</tbody></table>
<h2 id="Relations-with-Other-Patterns-与其他模式的关系"><a href="#Relations-with-Other-Patterns-与其他模式的关系" class="headerlink" title="Relations with Other Patterns 与其他模式的关系"></a>Relations with Other Patterns 与其他模式的关系</h2><ul>
<li><p><strong>Bridge</strong> is usually designed up-front, letting you develop parts of an application independently of each other. On the other hand, <strong>Adapter</strong> is commonly used with an existing app to make some otherwise-incompatible classes work together nicely.<br><strong>Bridge</strong> 通常是预先设计的，允许您彼此独立地开发应用程序的各个部分。另一方面，<strong>Adapter</strong> 通常与现有应用程序一起使用，以使一些不兼容的类很好地协同工作。</p>
</li>
<li><p><strong>Bridge, State, Strategy</strong> (and to some degree <strong>Adapter</strong>) have very similar structures. Indeed, all of these patterns are based on composition, which is delegating work to other objects. However, they all solve different problems. A pattern isn’t just a recipe for structuring your code in a specific way. It can also communicate to other developers the problem the pattern solves.<br>桥接、状态、策略（在某种程度上还有适配器）具有非常相似的结构。事实上，所有这些模式都是基于构图的，而构图是将工作委托给其他对象。但是，它们都解决了不同的问题。模式不仅仅是以特定方式构建代码的秘诀。它还可以向其他开发人员传达该模式解决的问题。</p>
</li>
<li><p>You can use <strong>Abstract Factory</strong> along with <strong>Bridge</strong>. This pairing is useful when some abstractions defined by <strong>Bridge</strong> can only work with specific implementations. In this case, Abstract Factory can encapsulate these relations and hide the complexity from the client code.</p>
</li>
<li><p>You can combine <strong>Builder</strong> with <strong>Bridge</strong>: the director class plays the role of the abstraction, while different builders act as implementations.<br>您可以将 <strong>Builder</strong> 与 <strong>Bridge</strong> 结合使用：director 类扮演抽象的角色，而不同的构建器充当实现。</p>
</li>
</ul>
<h2 id="Code-Examples-代码示例"><a href="#Code-Examples-代码示例" class="headerlink" title="Code Examples 代码示例"></a>Code Examples 代码示例</h2><h3 id="Python-Conceptual-Example-概念示例"><a href="#Python-Conceptual-Example-概念示例" class="headerlink" title="Python Conceptual Example 概念示例"></a>Python Conceptual Example 概念示例</h3><p>This example illustrates the structure of the Bridge design pattern. It focuses on answering these questions:<br>此示例说明了 Bridge 设计模式的结构。它侧重于回答以下问题：</p>
<ul>
<li>What classes does it consist of?<br>它由哪些类组成？</li>
<li>What roles do these classes play?<br>这些课程扮演什么角色？</li>
<li>In what way the elements of the pattern are related?<br>模式的元素以何种方式相关？</li>
</ul>
<h4 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> annotations</span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Abstraction</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Abstraction defines the interface for the &quot;control&quot; part of the two</span></span><br><span class="line"><span class="string">    class hierarchies. It maintains a reference to an object of the</span></span><br><span class="line"><span class="string">    Implementation hierarchy and delegates all of the real work to this object.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, implementation: Implementation</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.implementation = implementation</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">f&quot;Abstraction: Base operation with:\n&quot;</span></span><br><span class="line">                <span class="string">f&quot;<span class="subst">&#123;self.implementation.operation_implementation()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExtendedAbstraction</span>(<span class="title class_ inherited__">Abstraction</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    You can extend the Abstraction without changing the Implementation classes.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">f&quot;ExtendedAbstraction: Extended operation with:\n&quot;</span></span><br><span class="line">                <span class="string">f&quot;<span class="subst">&#123;self.implementation.operation_implementation()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Implementation</span>(<span class="title class_ inherited__">ABC</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Implementation defines the interface for all implementation classes. It</span></span><br><span class="line"><span class="string">    doesn&#x27;t have to match the Abstraction&#x27;s interface. In fact, the two</span></span><br><span class="line"><span class="string">    interfaces can be entirely different. Typically the Implementation interface</span></span><br><span class="line"><span class="string">    provides only primitive operations, while the Abstraction defines higher-</span></span><br><span class="line"><span class="string">    level operations based on those primitives.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation_implementation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Each Concrete Implementation corresponds to a specific platform and implements</span></span><br><span class="line"><span class="string">the Implementation interface using that platform&#x27;s API.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteImplementationA</span>(<span class="title class_ inherited__">Implementation</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation_implementation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ConcreteImplementationA: Here&#x27;s the result on the platform A.&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteImplementationB</span>(<span class="title class_ inherited__">Implementation</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operation_implementation</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ConcreteImplementationB: Here&#x27;s the result on the platform B.&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">client_code</span>(<span class="params">abstraction: Abstraction</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Except for the initialization phase, where an Abstraction object gets linked</span></span><br><span class="line"><span class="string">    with a specific Implementation object, the client code should only depend on</span></span><br><span class="line"><span class="string">    the Abstraction class. This way the client code can support any abstraction-</span></span><br><span class="line"><span class="string">    implementation combination.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(abstraction.operation(), end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The client code should be able to work with any pre-configured abstraction-</span></span><br><span class="line"><span class="string">    implementation combination.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    implementation = ConcreteImplementationA()</span><br><span class="line">    abstraction = Abstraction(implementation)</span><br><span class="line">    client_code(abstraction)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    implementation = ConcreteImplementationB()</span><br><span class="line">    abstraction = ExtendedAbstraction(implementation)</span><br><span class="line">    client_code(abstraction)</span><br></pre></td></tr></table></figure>

<h4 id="Output-txt-Execution-result"><a href="#Output-txt-Execution-result" class="headerlink" title="Output.txt: Execution result"></a>Output.txt: Execution result</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Abstraction: Base operation with:</span><br><span class="line">ConcreteImplementationA: Here&#x27;s the result on the platform A.</span><br><span class="line"></span><br><span class="line">ExtendedAbstraction: Extended operation with:</span><br><span class="line">ConcreteImplementationB: Here&#x27;s the result on the platform B.</span><br></pre></td></tr></table></figure>

<h3 id="Rust-Conceptual-Example-概念示例"><a href="#Rust-Conceptual-Example-概念示例" class="headerlink" title="Rust Conceptual Example 概念示例"></a>Rust Conceptual Example 概念示例</h3><h4 id="Devices-and-Remotes-设备和遥控器"><a href="#Devices-and-Remotes-设备和遥控器" class="headerlink" title="Devices and Remotes 设备和遥控器"></a>Devices and Remotes 设备和遥控器</h4><p>This example illustrates how the Bridge pattern can help divide the monolithic code of an app that manages devices and their remote controls. The Device classes act as the implementation, whereas the Remotes act as the abstraction.<br>此示例演示了 Bridge 模式如何帮助划分管理设备及其遥控器的应用的整体代码。Device 类充当实现，而 Remote 充当抽象。</p>
<h4 id="remotes-mod-rs"><a href="#remotes-mod-rs" class="headerlink" title="remotes&#x2F;mod.rs"></a>remotes&#x2F;mod.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> advanced;</span><br><span class="line"><span class="keyword">mod</span> basic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">use</span> advanced::AdvancedRemove;</span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">use</span> basic::BasicRemote;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> crate::device::Device;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">HasMutableDevice</span>&lt;D: Device&gt; &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">device</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> &amp;<span class="keyword">mut</span> D;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">Remote</span>&lt;D: Device&gt;: HasMutableDevice&lt;D&gt; &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">power</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Remote: power toggle&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">is_enabled</span>() &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">disable</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">enable</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">volume_down</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Remote: volume down&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">volume</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">volume</span>();</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">set_volume</span>(volume - <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">volume_up</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Remote: volume up&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">volume</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">volume</span>();</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">set_volume</span>(volume + <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">channel_down</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Remote: channel down&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">channel</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">channel</span>();</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">set_channel</span>(channel - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">channel_up</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Remote: channel up&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">channel</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">channel</span>();</span><br><span class="line">        <span class="keyword">self</span>.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">set_channel</span>(channel + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="remotes-basic-rs"><a href="#remotes-basic-rs" class="headerlink" title="remotes&#x2F;basic.rs"></a>remotes&#x2F;basic.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::device::Device;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> super::&#123;HasMutableDevice, Remote&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">BasicRemote</span>&lt;D: Device&gt; &#123;</span><br><span class="line">    device: D,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;D: Device&gt; BasicRemote&lt;D&gt; &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">new</span>(device: D) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123; device &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;D: Device&gt; HasMutableDevice&lt;D&gt; <span class="keyword">for</span> <span class="title class_">BasicRemote</span>&lt;D&gt; &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">device</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> &amp;<span class="keyword">mut</span> D &#123;</span><br><span class="line">        &amp;<span class="keyword">mut</span> <span class="keyword">self</span>.device</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;D: Device&gt; Remote&lt;D&gt; <span class="keyword">for</span> <span class="title class_">BasicRemote</span>&lt;D&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="remotes-advanced-rs"><a href="#remotes-advanced-rs" class="headerlink" title="remotes&#x2F;advanced.rs"></a>remotes&#x2F;advanced.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::device::Device;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> super::&#123;HasMutableDevice, Remote&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">AdvancedRemote</span>&lt;D: Device&gt; &#123;</span><br><span class="line">    device: D,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;D: Device&gt; AdvancedRemote&lt;D&gt; &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">new</span>(device: D) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123; device &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">mute</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Remote: mute&quot;</span>);</span><br><span class="line">        <span class="keyword">self</span>.device.<span class="title function_ invoke__">set_volume</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;D: Device&gt; HasMutableDevice&lt;D&gt; <span class="keyword">for</span> <span class="title class_">AdvancedRemote</span>&lt;D&gt; &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">device</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> &amp;<span class="keyword">mut</span> D &#123;</span><br><span class="line">        &amp;<span class="keyword">mut</span> <span class="keyword">self</span>.device</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;D: Device&gt; Remote&lt;D&gt; <span class="keyword">for</span> <span class="title class_">AdvancedRemote</span>&lt;D&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="device-mod-rs"><a href="#device-mod-rs" class="headerlink" title="device&#x2F;mod.rs"></a>device&#x2F;mod.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> radio;</span><br><span class="line"><span class="keyword">mod</span> tv;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">use</span> radio::Radio;</span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">use</span> tv::Tv;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">Device</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">is_enabled</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">bool</span>;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">enable</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>);</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">disable</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>);</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">volume</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u8</span>;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">set_volume</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, percent: <span class="type">u8</span>);</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">channel</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u16</span>;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">set_channel</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, channel: <span class="type">u16</span>);</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">print_status</span>(&amp;<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="device-radio-rs"><a href="#device-radio-rs" class="headerlink" title="device&#x2F;radio.rs"></a>device&#x2F;radio.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> super::Device;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Clone)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Radio</span> &#123;</span><br><span class="line">    on: <span class="type">bool</span>,</span><br><span class="line">    volume: <span class="type">u8</span>,</span><br><span class="line">    channel: <span class="type">u16</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Default</span> <span class="keyword">for</span> <span class="title class_">Radio</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">default</span>() <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123;</span><br><span class="line">            on: <span class="literal">false</span>,</span><br><span class="line">            volume: <span class="number">30</span>,</span><br><span class="line">            channel: <span class="number">1</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Device</span> <span class="keyword">for</span> <span class="title class_">Radio</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">is_enabled</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.on</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">enable</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.on = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">disable</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.on = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">volume</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u8</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.volume</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">set_volume</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, percent: <span class="type">u8</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.volume = std::cmp::<span class="title function_ invoke__">min</span>(percent, <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">channel</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u16</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.channel</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">set_channel</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, channel: <span class="type">u16</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.channel = channel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">print_status</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;------------------------------------&quot;</span>);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;| I&#x27;m radio.&quot;</span>);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;| I&#x27;m &#123;&#125;&quot;</span>, <span class="keyword">if</span> <span class="keyword">self</span>.on &#123; <span class="string">&quot;enabled&quot;</span> &#125; <span class="keyword">else</span> &#123; <span class="string">&quot;disabled&quot;</span> &#125;);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;| Current volume is &#123;&#125;%&quot;</span>, <span class="keyword">self</span>.volume);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;| Current channel is &#123;&#125;&quot;</span>, <span class="keyword">self</span>.channel);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;------------------------------------\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="device-tv-rs"><a href="#device-tv-rs" class="headerlink" title="device&#x2F;tv.rs"></a>device&#x2F;tv.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> super::Device;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Clone)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Tv</span> &#123;</span><br><span class="line">    on: <span class="type">bool</span>,</span><br><span class="line">    volume: <span class="type">u8</span>,</span><br><span class="line">    channel: <span class="type">u16</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Default</span> <span class="keyword">for</span> <span class="title class_">Tv</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">default</span>() <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123;</span><br><span class="line">            on: <span class="literal">false</span>,</span><br><span class="line">            volume: <span class="number">30</span>,</span><br><span class="line">            channel: <span class="number">1</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Device</span> <span class="keyword">for</span> <span class="title class_">Tv</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">is_enabled</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.on</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">enable</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.on = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">disable</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.on = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">volume</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u8</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.volume</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">set_volume</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, percent: <span class="type">u8</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.volume = std::cmp::<span class="title function_ invoke__">min</span>(percent, <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">channel</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u16</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.channel</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">set_channel</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, channel: <span class="type">u16</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.channel = channel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">print_status</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;------------------------------------&quot;</span>);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;| I&#x27;m TV set.&quot;</span>);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;| I&#x27;m &#123;&#125;&quot;</span>, <span class="keyword">if</span> <span class="keyword">self</span>.on &#123; <span class="string">&quot;enabled&quot;</span> &#125; <span class="keyword">else</span> &#123; <span class="string">&quot;disabled&quot;</span> &#125;);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;| Current volume is &#123;&#125;%&quot;</span>, <span class="keyword">self</span>.volume);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;| Current channel is &#123;&#125;&quot;</span>, <span class="keyword">self</span>.channel);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;------------------------------------\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="main-rs"><a href="#main-rs" class="headerlink" title="main.rs"></a>main.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> device;</span><br><span class="line"><span class="keyword">mod</span> remotes;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> device::&#123;Device, Radio, Tv&#125;;</span><br><span class="line"><span class="keyword">use</span> remotes::&#123;AdvancedRemove, BasicRemote, HasMutableDevice, Remote&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="title function_ invoke__">test_device</span>(Tv::<span class="title function_ invoke__">default</span>());</span><br><span class="line">    <span class="title function_ invoke__">test_device</span>(Radio::<span class="title function_ invoke__">default</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">test_device</span>(device: <span class="keyword">impl</span> <span class="title class_">Device</span> + <span class="built_in">Clone</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Tests with basic remote.&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">basic_remote</span> = BasicRemote::<span class="title function_ invoke__">new</span>(device.<span class="title function_ invoke__">clone</span>());</span><br><span class="line">    basic_remote.<span class="title function_ invoke__">power</span>();</span><br><span class="line">    basic_remote.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">print_status</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Tests with advanced remote.&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">advanced_remote</span> = AdvancedRemove::<span class="title function_ invoke__">new</span>(device);</span><br><span class="line">    advanced_remote.<span class="title function_ invoke__">power</span>();</span><br><span class="line">    advanced_remote.<span class="title function_ invoke__">mute</span>();</span><br><span class="line">    advanced_remote.<span class="title function_ invoke__">device</span>().<span class="title function_ invoke__">print_status</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Tests with basic remote.</span><br><span class="line">Remote: power toggle</span><br><span class="line">------------------------------------</span><br><span class="line">| I&#x27;m TV set.</span><br><span class="line">| I&#x27;m enabled</span><br><span class="line">| Current volume is 30%</span><br><span class="line">| Current channel is 1</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">Tests with advanced remote.</span><br><span class="line">Remote: power toggle</span><br><span class="line">Remote: mute</span><br><span class="line">------------------------------------</span><br><span class="line">| I&#x27;m TV set.</span><br><span class="line">| I&#x27;m enabled</span><br><span class="line">| Current volume is 0%</span><br><span class="line">| Current channel is 1</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">Tests with basic remote.</span><br><span class="line">Remote: power toggle</span><br><span class="line">------------------------------------</span><br><span class="line">| I&#x27;m radio.</span><br><span class="line">| I&#x27;m enabled</span><br><span class="line">| Current volume is 30%</span><br><span class="line">| Current channel is 1</span><br><span class="line">------------------------------------</span><br><span class="line"></span><br><span class="line">Tests with advanced remote.</span><br><span class="line">Remote: power toggle</span><br><span class="line">Remote: mute</span><br><span class="line">------------------------------------</span><br><span class="line">| I&#x27;m radio.</span><br><span class="line">| I&#x27;m enabled</span><br><span class="line">| Current volume is 0%</span><br><span class="line">| Current channel is 1</span><br><span class="line">------------------------------------</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2023/12/04/mayday-lip-syncing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/04/mayday-lip-syncing/" class="post-title-link" itemprop="url">maydat-lip-syncing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-12-04 18:04:22" itemprop="dateCreated datePublished" datetime="2023-12-04T18:04:22+08:00">2023-12-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-12-06 22:57:50" itemprop="dateModified" datetime="2023-12-06T22:57:50+08:00">2023-12-06</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>872</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>3 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="今日单词"><a href="#今日单词" class="headerlink" title="今日单词"></a>今日单词</h3><div align="center"> <img src="/images/lip-synches.png"/>今日单词</div>

<h1 id="Mayday-lip-synches-五月天假唱"><a href="#Mayday-lip-synches-五月天假唱" class="headerlink" title="Mayday lip-synches 五月天假唱"></a>Mayday lip-synches 五月天假唱</h1><h1 id="什么才是真正的摇滚精神？"><a href="#什么才是真正的摇滚精神？" class="headerlink" title="什么才是真正的摇滚精神？"></a>什么才是真正的摇滚精神？</h1><p>真正的摇滚精神是一种对自由、反叛和个人表达的热情。它代表着对传统观念的挑战，对权威和束缚的抗拒。摇滚精神鼓励个体追求自己的激情和独立思考，不受限制地表达自己的声音和观点。它强调对社会问题和不公正的关注，并通过音乐和艺术表达对这些问题的批判和反思。摇滚精神是一种生活态度，鼓励人们勇敢地追求自己的梦想，坚持自己的价值观，并与他人分享共同的热情和信念。</p>
<h2 id="一个歌手假唱意味着什么？"><a href="#一个歌手假唱意味着什么？" class="headerlink" title="一个歌手假唱意味着什么？"></a>一个歌手假唱意味着什么？</h2><p>一个歌手假唱意味着他或她在现场演出时并没有真正地唱歌，而是通过播放预先录制的音乐来模拟演唱。这通常被认为是一种不诚实和欺骗观众的行为，因为观众可能会认为他们正在观看一场真正的现场表演，而事实上，演出者并没有真正地展示他们的音乐才华。此外，假唱也可能违反某些演出和音乐产业的道德标准和规定。</p>
<h2 id="一个摇滚歌手假唱符合摇滚精神吗？他的内心能过的安宁吗？"><a href="#一个摇滚歌手假唱符合摇滚精神吗？他的内心能过的安宁吗？" class="headerlink" title="一个摇滚歌手假唱符合摇滚精神吗？他的内心能过的安宁吗？"></a>一个摇滚歌手假唱符合摇滚精神吗？他的内心能过的安宁吗？</h2><p>摇滚精神强调真实、自由和个人表达，因此一个摇滚歌手假唱与摇滚精神并不相符。假唱被认为是一种不诚实的行为，摇滚精神鼓励艺术家真实地展示他们的才华和表达自己的声音。假唱可能会削弱观众对艺术家的信任和尊重，破坏他们与观众之间的联系。</p>
<p>至于内心的安宁，这是一个个体的感受，每个人的体验可能不同。然而，对于许多艺术家来说，真实地表达自己是一种重要的价值观和追求。当一个摇滚歌手选择假唱时，可能会在内心产生不安和冲突，因为他们没有真正地展示自己的音乐才华和个人表达。因此，假唱可能会对他们的内心和艺术追求造成一定程度的困扰。</p>
<h2 id="演唱会假唱对于一个摇滚歌手来说属于轻微错误还是严重错误？"><a href="#演唱会假唱对于一个摇滚歌手来说属于轻微错误还是严重错误？" class="headerlink" title="演唱会假唱对于一个摇滚歌手来说属于轻微错误还是严重错误？"></a>演唱会假唱对于一个摇滚歌手来说属于轻微错误还是严重错误？</h2><p>对于一个摇滚歌手来说，演唱会假唱可以被认为是一个严重错误。摇滚音乐注重现场表演的真实性和能量，观众期望在演唱会上亲眼见证歌手的实力和情感投入。选择假唱可能会被认为是一种欺骗观众的行为，削弱了演唱会的真实性和互动性。这可能会对歌手的声誉和信任度造成负面影响，并引发观众的不满和失望。</p>
<p>然而，每个情况都是独特的，有时候摇滚歌手选择假唱可能是出于保护嗓子健康或其他技术或声音问题的考虑。因此，如何评价这个错误的严重程度可能因情况而异。但总体而言，对于一个摇滚歌手来说，选择假唱在摇滚音乐领域中可能被视为一个严重错误。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2023/12/03/design-pattern/adapter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/03/design-pattern/adapter/" class="post-title-link" itemprop="url">Adapter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-12-03 16:03:51 / Modified: 18:07:40" itemprop="dateCreated datePublished" datetime="2023-12-03T16:03:51+08:00">2023-12-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-pattern/" itemprop="url" rel="index"><span itemprop="name">design-pattern</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>18 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Adapter-适配器"><a href="#Adapter-适配器" class="headerlink" title="Adapter 适配器"></a>Adapter 适配器</h1><h2 id="Intent-意图"><a href="#Intent-意图" class="headerlink" title="Intent 意图"></a>Intent 意图</h2><p><strong>Adapter</strong> is a structural design pattern that allows objects with incompatible interfaces to collaborate.<br>适配器是一种结构设计模式，它允许具有不兼容接口的对象进行协作。</p>
<div align="center"> <img src="/images/adapter-header.png"/></div>

<h2 id="Problem-问题"><a href="#Problem-问题" class="headerlink" title="Problem 问题"></a>Problem 问题</h2><p>Imagine that you’re creating a stock market monitoring app. The app downloads the stock data from multiple sources in XML format and then displays nice-looking charts and diagrams for the user.<br>想象一下，您正在创建一个股票市场监控应用程序。该应用程序以XML格式从多个来源下载股票数据，然后为用户显示漂亮的图表和图表。</p>
<p>At some point, you decide to improve the app by integrating a smart 3rd-party analytics library. But there’s a catch: the analytics library only works with data in JSON format.<br>在某些时候，您决定通过集成智能第三方分析库来改进应用程序。但有一个问题：分析库仅适用于 JSON 格式的数据。</p>
<div align="center"> <img src="/images/adapter-problem-en.png"/>You can’t use the analytics library “as is” because it expects the data in a format that’s incompatible with your app.</br>您不能“按原样”使用分析库，因为它需要的数据格式与您的应用不兼容。</div>
You could change the library to work with XML. However, this might break some existing code that relies on the library. And worse, you might not have access to the library’s source code in the first place, making this approach impossible.
您可以更改库以使用 XML。但是，这可能会破坏一些依赖于该库的现有代码。更糟糕的是，您可能一开始就无法访问库的源代码，从而无法使用此方法。

<h2 id="Solution-解决方案"><a href="#Solution-解决方案" class="headerlink" title="Solution 解决方案"></a>Solution 解决方案</h2><p>You can create an adapter. This is a special object that converts the interface of one object so that another object can understand it.<br>您可以创建适配器。这是一个特殊的对象，它转换一个对象的接口，以便另一个对象可以理解它。</p>
<p>An adapter wraps one of the objects to hide the complexity of conversion happening behind the scenes. The wrapped object isn’t even aware of the adapter. For example, you can wrap an object that operates in meters and kilometers with an adapter that converts all of the data to imperial units such as feet and miles.<br>适配器包装其中一个对象，以隐藏在后台发生的转换的复杂性。包装的对象甚至不知道适配器。例如，您可以使用适配器包装以米和公里为单位运行的对象，该适配器将所有数据转换为英制单位（如英尺和英里）。</p>
<p>Adapters can not only convert data into various formats but can also help objects with different interfaces collaborate. Here’s how it works:<br>适配器不仅可以将数据转换为各种格式，还可以帮助具有不同接口的对象进行协作。其工作原理如下：</p>
<ol>
<li>The adapter gets an interface, compatible with one of the existing objects.<br>适配器获取一个接口，该接口与现有对象之一兼容。</li>
<li>Using this interface, the existing object can safely call the adapter’s methods.<br>使用此接口，现有对象可以安全地调用适配器的方法。</li>
<li>Upon receiving a call, the adapter passes the request to the second object, but in a format and order that the second object expects.<br>收到调用后，适配器将请求传递给第二个对象，但采用第二个对象期望的格式和顺序。</li>
</ol>
<p>Sometimes it’s even possible to create a two-way adapter that can convert the calls in both directions.<br>有时甚至可以创建一个双向适配器，可以在两个方向上转换呼叫。</p>
<div align="center"> <img src="/images/adapter-solution.png"/></div>
Let’s get back to our stock market app. To solve the dilemma of incompatible formats, you can create XML-to-JSON adapters for every class of the analytics library that your code works with directly. Then you adjust your code to communicate with the library only via these adapters. When an adapter receives a call, it translates the incoming XML data into a JSON structure and passes the call to the appropriate methods of a wrapped analytics object.

<p>让我们回到我们的股票市场应用程序。为了解决格式不兼容的难题，您可以为代码直接使用的分析库的每个类创建 XML 到 JSON 适配器。然后，将代码调整为仅通过这些适配器与库通信。当适配器收到调用时，它会将传入的 XML 数据转换为 JSON 结构，并将调用传递给包装的分析对象的相应方法。</p>
<h2 id="Real-World-Analogy-真实世界的类比"><a href="#Real-World-Analogy-真实世界的类比" class="headerlink" title="Real-World Analogy 真实世界的类比"></a>Real-World Analogy 真实世界的类比</h2><div align="center"> <img src="/images/adapter-comic-1.png"/>A suitcase before and after a trip abroad.</br>出国旅行前后的行李箱。</div>
When you travel from the US to Europe for the first time, you may get a surprise when trying to charge your laptop. The power plug and sockets standards are different in different countries. That’s why your US plug won’t fit a German socket. The problem can be solved by using a power plug adapter that has the American-style socket and the European-style plug.
当您第一次从美国到欧洲旅行时，当您尝试为笔记本电脑充电时，您可能会感到惊讶。不同国家的电源插头和插座标准不同。这就是为什么您的美国插头不适合德国插座的原因。这个问题可以通过使用具有美式插座和欧式插头的电源插头适配器来解决。

<h2 id="Structure-结构"><a href="#Structure-结构" class="headerlink" title="Structure 结构"></a>Structure 结构</h2><h3 id="Object-adapter-对象适配器"><a href="#Object-adapter-对象适配器" class="headerlink" title="Object adapter 对象适配器"></a>Object adapter 对象适配器</h3><p>This implementation uses the object composition principle: the adapter implements the interface of one object and wraps the other one. It can be implemented in all popular programming languages.<br>此实现使用对象组合原则：适配器实现一个对象的接口并包装另一个对象。它可以用所有流行的编程语言实现。</p>
<div align="center"> <img src="/images/adapter-structure-object-adapter.png"/></div>

<ol>
<li><p>The Client is a class that contains the existing business logic of the program.<br>Client 是一个包含程序现有业务逻辑的类。</p>
</li>
<li><p>The Client Interface describes a protocol that other classes must follow to be able to collaborate with the client code.<br>客户端接口描述了其他类必须遵循的协议，以便能够与客户端代码进行协作。</p>
</li>
<li><p>The Service is some useful class (usually 3rd-party or legacy). The client can’t use this class directly because it has an incompatible interface.<br>服务是一些有用的类（通常是第三方或旧版）。客户端不能直接使用此类，因为它具有不兼容的接口。</p>
</li>
<li><p>The <strong>Adapter</strong> is a class that’s able to work with both the client and the service: it implements the client interface, while wrapping the service object. The adapter receives calls from the client via the client interface and translates them into calls to the wrapped service object in a format it can understand.<br>Adapter 是一个能够同时使用客户端和服务的类：它实现客户端接口，同时包装服务对象。适配器通过客户端接口接收来自客户端的调用，并以它可以理解的格式将其转换为对包装的服务对象的调用。</p>
</li>
<li><p>The client code doesn’t get coupled to the concrete adapter class as long as it works with the adapter via the client interface. Thanks to this, you can introduce new types of adapters into the program without breaking the existing client code. This can be useful when the interface of the service class gets changed or replaced: you can just create a new adapter class without changing the client code.<br>只要客户端代码通过客户端接口与适配器一起使用，它就不会耦合到具体的适配器类。因此，您可以在不破坏现有客户端代码的情况下将新类型的适配器引入程序。当服务类的接口被更改或替换时，这可能很有用：您可以只创建一个新的适配器类，而无需更改客户端代码。</p>
</li>
</ol>
<h3 id="Class-adapter-类适配器"><a href="#Class-adapter-类适配器" class="headerlink" title="Class adapter 类适配器"></a>Class adapter 类适配器</h3><p>This implementation uses inheritance: the adapter inherits interfaces from both objects at the same time. Note that this approach can only be implemented in programming languages that support multiple inheritance, such as C++.<br>此实现使用继承：适配器同时从两个对象继承接口。请注意，此方法只能在支持多重继承的编程语言（如 C++）中实现。</p>
<div align="center"> <img src="/images/adapter-structure-class-adapter.png"/></div>

<ol>
<li>The Class Adapter doesn’t need to wrap any objects because it inherits behaviors from both the client and the service. The adaptation happens within the overridden methods. The resulting adapter can be used in place of an existing client class.<br>类适配器不需要包装任何对象，因为它从客户端和服务继承行为。适应发生在被覆盖的方法中。生成的适配器可用于代替现有的客户端类。</li>
</ol>
<h2 id="Pseudocode-伪代码"><a href="#Pseudocode-伪代码" class="headerlink" title="Pseudocode 伪代码"></a>Pseudocode 伪代码</h2><p>This example of the <strong>Adapter</strong> pattern is based on the classic conflict between square pegs and round holes.<br>此适配器模式示例基于方形钉子和圆孔之间的经典冲突。</p>
<div align="center"> <img src="/images/adapter-example.png"/>Adapting square pegs to round holes.</br>使方钉适应圆孔。</div>
The Adapter pretends to be a round peg, with a radius equal to a half of the square’s diameter (in other words, the radius of the smallest circle that can accommodate the square peg).
适配器假装是一个圆钉，其半径等于正方形直径的一半（换句话说，可以容纳方形钉的最小圆的半径）。

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Say you have two classes with compatible interfaces:</span></span><br><span class="line"><span class="comment">// RoundHole and RoundPeg.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RoundHole</span> is</span><br><span class="line">    constructor <span class="title function_">RoundHole</span><span class="params">(radius)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">getRadius</span><span class="params">()</span> is</span><br><span class="line">        <span class="comment">// Return the radius of the hole.</span></span><br><span class="line"></span><br><span class="line">    method <span class="title function_">fits</span><span class="params">(peg: RoundPeg)</span> is</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getRadius() &gt;= peg.getRadius()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RoundPeg</span> is</span><br><span class="line">    constructor <span class="title function_">RoundPeg</span><span class="params">(radius)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">getRadius</span><span class="params">()</span> is</span><br><span class="line">        <span class="comment">// Return the radius of the peg.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// But there&#x27;s an incompatible class: SquarePeg.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SquarePeg</span> is</span><br><span class="line">    constructor <span class="title function_">SquarePeg</span><span class="params">(width)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">getWidth</span><span class="params">()</span> is</span><br><span class="line">        <span class="comment">// Return the square peg width.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// An adapter class lets you fit square pegs into round holes.</span></span><br><span class="line"><span class="comment">// It extends the RoundPeg class to let the adapter objects act</span></span><br><span class="line"><span class="comment">// as round pegs.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SquarePegAdapter</span> <span class="keyword">extends</span> <span class="title class_">RoundPeg</span> is</span><br><span class="line">    <span class="comment">// In reality, the adapter contains an instance of the</span></span><br><span class="line">    <span class="comment">// SquarePeg class.</span></span><br><span class="line">    <span class="keyword">private</span> field peg: SquarePeg</span><br><span class="line"></span><br><span class="line">    constructor <span class="title function_">SquarePegAdapter</span><span class="params">(peg: SquarePeg)</span> is</span><br><span class="line">        <span class="built_in">this</span>.peg = peg</span><br><span class="line"></span><br><span class="line">    method <span class="title function_">getRadius</span><span class="params">()</span> is</span><br><span class="line">        <span class="comment">// The adapter pretends that it&#x27;s a round peg with a</span></span><br><span class="line">        <span class="comment">// radius that could fit the square peg that the adapter</span></span><br><span class="line">        <span class="comment">// actually wraps.</span></span><br><span class="line">        <span class="keyword">return</span> peg.getWidth() * Math.sqrt(<span class="number">2</span>) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Somewhere in client code.</span></span><br><span class="line">hole = <span class="keyword">new</span> <span class="title class_">RoundHole</span>(<span class="number">5</span>)</span><br><span class="line">rpeg = <span class="keyword">new</span> <span class="title class_">RoundPeg</span>(<span class="number">5</span>)</span><br><span class="line">hole.fits(rpeg) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">small_sqpeg = <span class="keyword">new</span> <span class="title class_">SquarePeg</span>(<span class="number">5</span>)</span><br><span class="line">large_sqpeg = <span class="keyword">new</span> <span class="title class_">SquarePeg</span>(<span class="number">10</span>)</span><br><span class="line">hole.fits(small_sqpeg) <span class="comment">// this won&#x27;t compile (incompatible types)</span></span><br><span class="line"></span><br><span class="line">small_sqpeg_adapter = <span class="keyword">new</span> <span class="title class_">SquarePegAdapter</span>(small_sqpeg)</span><br><span class="line">large_sqpeg_adapter = <span class="keyword">new</span> <span class="title class_">SquarePegAdapter</span>(large_sqpeg)</span><br><span class="line">hole.fits(small_sqpeg_adapter) <span class="comment">// true</span></span><br><span class="line">hole.fits(large_sqpeg_adapter) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h2 id="Applicability-适用性"><a href="#Applicability-适用性" class="headerlink" title="Applicability 适用性"></a>Applicability 适用性</h2><ul>
<li><p><strong>Use the Adapter class when you want to use some existing class, but its interface isn’t compatible with the rest of your code.<br>如果要使用某些现有类，但其接口与代码的其余部分不兼容，请使用 Adapter 类。</strong></p>
</li>
<li><p>The Adapter pattern lets you create a middle-layer class that serves as a translator between your code and a legacy class, a 3rd-party class or any other class with a weird interface.<br>适配器模式允许您创建一个中间层类，该类充当代码与旧类、第三方类或任何其他具有奇怪接口的类之间的转换器。</p>
</li>
<li><p><strong>Use the pattern when you want to reuse several existing subclasses that lack some common functionality that can’t be added to the superclass.<br>如果要重用多个现有的子类，这些子类缺少一些无法添加到超类的通用功能，请使用该模式。</strong></p>
</li>
<li><p>You could extend each subclass and put the missing functionality into new child classes. However, you’ll need to duplicate the code across all of these new classes, which smells really bad.<br>您可以扩展每个子类，并将缺少的功能放入新的子类中。但是，您需要在所有这些新类中复制代码，这闻起来非常难闻。</p>
</li>
</ul>
<p>The much more elegant solution would be to put the missing functionality into an adapter class. Then you would wrap objects with missing features inside the adapter, gaining needed features dynamically. For this to work, the target classes must have a common interface, and the adapter’s field should follow that interface. This approach looks very similar to the Decorator pattern.<br>更优雅的解决方案是将缺少的功能放入适配器类中。然后，将缺少特征的对象包装在适配器内，动态获得所需的特征。为此，目标类必须具有通用接口，并且适配器的字段应遵循该接口。此方法看起来与 Decorator 模式非常相似。</p>
<h2 id="How-to-Implement-如何实现"><a href="#How-to-Implement-如何实现" class="headerlink" title="How to Implement 如何实现"></a>How to Implement 如何实现</h2><ol>
<li><p>Make sure that you have at least two classes with incompatible interfaces:确保至少有两个接口不兼容的类：</p>
<ul>
<li>A useful service class, which you can’t change (often 3rd-party, legacy or with lots of existing dependencies).<br>一个有用的服务类，您无法更改（通常是第三方、旧版或具有大量现有依赖项）。</li>
<li>One or several client classes that would benefit from using the service class.<br>一个或多个客户端类，这些类将从使用服务类中受益。</li>
</ul>
</li>
<li><p>Declare the client interface and describe how clients communicate with the service.<br>声明客户端接口并描述客户端如何与服务通信。</p>
</li>
<li><p>Create the adapter class and make it follow the client interface. Leave all the methods empty for now.<br>创建适配器类，并使其遵循客户端接口。暂时将所有方法留空。</p>
</li>
<li><p>Add a field to the adapter class to store a reference to the service object. The common practice is to initialize this field via the constructor, but sometimes it’s more convenient to pass it to the adapter when calling its methods.<br>向适配器类添加一个字段，以存储对服务对象的引用。通常的做法是通过构造函数初始化此字段，但有时在调用适配器的方法时将其传递给适配器会更方便。</p>
</li>
<li><p>One by one, implement all methods of the client interface in the adapter class. The adapter should delegate most of the real work to the service object, handling only the interface or data format conversion.<br>在适配器类中逐个实现客户端接口的所有方法。适配器应将大部分实际工作委托给服务对象，仅处理接口或数据格式转换。</p>
</li>
<li><p>Clients should use the adapter via the client interface. This will let you change or extend the adapters without affecting the client code.<br>客户端应通过客户端接口使用适配器。这将允许您更改或扩展适配器，而不会影响客户端代码。</p>
</li>
</ol>
<h2 id="Pros-and-Cons-优点和缺点"><a href="#Pros-and-Cons-优点和缺点" class="headerlink" title="Pros and Cons 优点和缺点"></a>Pros and Cons 优点和缺点</h2><table>
<thead>
<tr>
<th>Pros 优点</th>
<th>Cons 缺点</th>
</tr>
</thead>
<tbody><tr>
<td>Single Responsibility Principle. You can separate the interface or data conversion code from the primary business logic of the program. 单一责任原则。您可以将接口或数据转换代码与程序的主要业务逻辑分开。</td>
<td>The overall complexity of the code increases because you need to introduce a set of new interfaces and classes. Sometimes it’s simpler just to change the service class so that it matches the rest of your code. 代码的整体复杂性增加，因为您需要引入一组新的接口和类。有时，只需更改服务类以使其与代码的其余部分匹配即可更简单。</td>
</tr>
<tr>
<td>Open&#x2F;Closed Principle. You can introduce new types of adapters into the program without breaking the existing client code, as long as they work with the adapters through the client interface. 开&#x2F;闭原理。您可以在不破坏现有客户端代码的情况下将新类型的适配器引入程序，只要它们通过客户端接口与适配器一起使用即可。</td>
<td></td>
</tr>
</tbody></table>
<h2 id="Relations-with-Other-Patterns-与其他模式的关系"><a href="#Relations-with-Other-Patterns-与其他模式的关系" class="headerlink" title="Relations with Other Patterns 与其他模式的关系"></a>Relations with Other Patterns 与其他模式的关系</h2><ul>
<li><p>Bridge is usually designed up-front, letting you develop parts of an application independently of each other. On the other hand, Adapter is commonly used with an existing app to make some otherwise-incompatible classes work together nicely.<br>Bridge 通常是预先设计的，允许您彼此独立地开发应用程序的各个部分。另一方面，Adapter 通常与现有应用程序一起使用，以使一些不兼容的类很好地协同工作。</p>
</li>
<li><p>Adapter provides a completely different interface for accessing an existing object. On the other hand, with the Decorator pattern the interface either stays the same or gets extended. In addition, Decorator supports recursive composition, which isn’t possible when you use Adapter.<br>适配器提供了一个完全不同的接口来访问现有对象。另一方面，使用 Decorator 模式，界面要么保持不变，要么得到扩展。此外，Decorator 支持递归组合，这在使用 Adapter 时是不可能的。</p>
</li>
<li><p>With Adapter you access an existing object via different interface. With Proxy, the interface stays the same. With Decorator you access the object via an enhanced interface.<br>使用 Adapter，您可以通过不同的接口访问现有对象。使用 Proxy，界面保持不变。使用 Decorator，您可以通过增强的界面访问对象。</p>
</li>
<li><p>Facade defines a new interface for existing objects, whereas Adapter tries to make the existing interface usable. Adapter usually wraps just one object, while Facade works with an entire subsystem of objects.<br>Facade 为现有对象定义了一个新的接口，而 Adapter 则试图使现有接口可用。Adapter 通常只包装一个对象，而 Facade 则处理对象的整个子系统。</p>
</li>
<li><p>Bridge, State, Strategy (and to some degree Adapter) have very similar structures. Indeed, all of these patterns are based on composition, which is delegating work to other objects. However, they all solve different problems. A pattern isn’t just a recipe for structuring your code in a specific way. It can also communicate to other developers the problem the pattern solves.<br>桥接、状态、策略（在某种程度上还有适配器）具有非常相似的结构。事实上，所有这些模式都是基于构图的，而构图是将工作委托给其他对象。但是，它们都解决了不同的问题。模式不仅仅是以特定方式构建代码的秘诀。它还可以向其他开发人员传达该模式解决的问题。</p>
</li>
</ul>
<h2 id="Code-Examples-代码示例"><a href="#Code-Examples-代码示例" class="headerlink" title="Code Examples 代码示例"></a>Code Examples 代码示例</h2><h3 id="Python-Conceptual-Example-via-inheritance-概念示例（通过继承）"><a href="#Python-Conceptual-Example-via-inheritance-概念示例（通过继承）" class="headerlink" title="Python: Conceptual Example (via inheritance) 概念示例（通过继承）"></a>Python: Conceptual Example (via inheritance) 概念示例（通过继承）</h3><p>This example illustrates the structure of the Adapter design pattern. It focuses on answering these questions:<br>此示例阐释了适配器设计模式的结构。它侧重于回答以下问题：</p>
<ul>
<li>What classes does it consist of?<br>它由哪些类组成？</li>
<li>What roles do these classes play?<br>这些课程扮演什么角色？</li>
<li>In what way the elements of the pattern are related?<br>模式的元素以何种方式相关？</li>
</ul>
<h3 id="main-py：概念示例"><a href="#main-py：概念示例" class="headerlink" title="main.py：概念示例"></a>main.py：概念示例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Target</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Target defines the domain-specific interface used by the client code.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">request</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Target: The default target&#x27;s behavior.&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Adaptee</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Adaptee contains some useful behavior, but its interface is incompatible</span></span><br><span class="line"><span class="string">    with the existing client code. The Adaptee needs some adaptation before the</span></span><br><span class="line"><span class="string">    client code can use it.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">specific_request</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;.eetpadA eht fo roivaheb laicepS&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Adapter</span>(Target, Adaptee):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Adapter makes the Adaptee&#x27;s interface compatible with the Target&#x27;s</span></span><br><span class="line"><span class="string">    interface via multiple inheritance.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">request</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Adapter: (TRANSLATED) <span class="subst">&#123;self.specific_request()[::-<span class="number">1</span>]&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">client_code</span>(<span class="params">target: <span class="string">&quot;Target&quot;</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The client code supports all classes that follow the Target interface.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(target.request(), end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: I can work just fine with the Target objects:&quot;</span>)</span><br><span class="line">    target = Target()</span><br><span class="line">    client_code(target)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    adaptee = Adaptee()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: The Adaptee class has a weird interface. &quot;</span></span><br><span class="line">          <span class="string">&quot;See, I don&#x27;t understand it:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Adaptee: <span class="subst">&#123;adaptee.specific_request()&#125;</span>&quot;</span>, end=<span class="string">&quot;\n\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: But I can work with it via the Adapter:&quot;</span>)</span><br><span class="line">    adapter = Adapter()</span><br><span class="line">    client_code(adapter)</span><br></pre></td></tr></table></figure>
<h3 id="Output-txt-Execution-result"><a href="#Output-txt-Execution-result" class="headerlink" title="Output.txt: Execution result"></a>Output.txt: Execution result</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Client: I can work just fine with the Target objects:</span><br><span class="line">Target: The default target&#x27;s behavior.</span><br><span class="line"></span><br><span class="line">Client: The Adaptee class has a weird interface. See, I don&#x27;t understand it:</span><br><span class="line">Adaptee: .eetpadA eht fo roivaheb laicepS</span><br><span class="line"></span><br><span class="line">Client: But I can work with it via the Adapter:</span><br><span class="line">Adapter: (TRANSLATED) Special behavior of the Adaptee.</span><br></pre></td></tr></table></figure>

<h3 id="Python-Conceptual-Example-via-object-composition-概念示例（通过对象组合）"><a href="#Python-Conceptual-Example-via-object-composition-概念示例（通过对象组合）" class="headerlink" title="Python: Conceptual Example (via object composition) 概念示例（通过对象组合）"></a>Python: Conceptual Example (via object composition) 概念示例（通过对象组合）</h3><p>This example illustrates the structure of the Adapter design pattern. It focuses on answering these questions:<br>此示例阐释了适配器设计模式的结构。它侧重于回答以下问题：</p>
<ul>
<li>What classes does it consist of?<br>它由哪些类组成？</li>
<li>What roles do these classes play?<br>这些课程扮演什么角色？</li>
<li>In what way the elements of the pattern are related?<br>模式的元素以何种方式相关？</li>
</ul>
<h3 id="main-py：概念示例-1"><a href="#main-py：概念示例-1" class="headerlink" title="main.py：概念示例"></a>main.py：概念示例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Target</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Target defines the domain-specific interface used by the client code.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">request</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Target: The default target&#x27;s behavior.&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Adaptee</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Adaptee contains some useful behavior, but its interface is incompatible</span></span><br><span class="line"><span class="string">    with the existing client code. The Adaptee needs some adaptation before the</span></span><br><span class="line"><span class="string">    client code can use it.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">specific_request</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;.eetpadA eht fo roivaheb laicepS&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Adapter</span>(<span class="title class_ inherited__">Target</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The Adapter makes the Adaptee&#x27;s interface compatible with the Target&#x27;s</span></span><br><span class="line"><span class="string">    interface via composition.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, adaptee: Adaptee</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.adaptee = adaptee</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">request</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Adapter: (TRANSLATED) <span class="subst">&#123;self.adaptee.specific_request()[::-<span class="number">1</span>]&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">client_code</span>(<span class="params">target: Target</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    The client code supports all classes that follow the Target interface.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(target.request(), end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: I can work just fine with the Target objects:&quot;</span>)</span><br><span class="line">    target = Target()</span><br><span class="line">    client_code(target)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    adaptee = Adaptee()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: The Adaptee class has a weird interface. &quot;</span></span><br><span class="line">          <span class="string">&quot;See, I don&#x27;t understand it:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Adaptee: <span class="subst">&#123;adaptee.specific_request()&#125;</span>&quot;</span>, end=<span class="string">&quot;\n\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Client: But I can work with it via the Adapter:&quot;</span>)</span><br><span class="line">    adapter = Adapter(adaptee)</span><br><span class="line">    client_code(adapter)</span><br></pre></td></tr></table></figure>
<h3 id="Output-txt-Execution-result-1"><a href="#Output-txt-Execution-result-1" class="headerlink" title="Output.txt: Execution result"></a>Output.txt: Execution result</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Client: I can work just fine with the Target objects:</span><br><span class="line">Target: The default target&#x27;s behavior.</span><br><span class="line"></span><br><span class="line">Client: The Adaptee class has a weird interface. See, I don&#x27;t understand it:</span><br><span class="line">Adaptee: .eetpadA eht fo roivaheb laicepS</span><br><span class="line"></span><br><span class="line">Client: But I can work with it via the Adapter:</span><br><span class="line">Adapter: (TRANSLATED) Special behavior of the Adaptee.</span><br></pre></td></tr></table></figure>

<h3 id="Adapter-in-Rust-Rust-中的适配器"><a href="#Adapter-in-Rust-Rust-中的适配器" class="headerlink" title="Adapter in Rust Rust 中的适配器"></a>Adapter in Rust Rust 中的适配器</h3><p>In this example, the <code>trait SpecificTarget</code> is incompatible with a <code>call</code> function which accepts <code>trait Target</code> only.<br>在此示例中，与 <code>trait SpecificTarget</code> 仅接受 <code>call</code> <code>trait Target</code> 的函数不兼容。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">call</span>(target: <span class="keyword">impl</span> <span class="title class_">Target</span>);</span><br></pre></td></tr></table></figure>
<p>The adapter helps to pass the incompatible interface to the <code>call</code> function.<br>适配器有助于将不兼容的接口传递给 <code>call</code> 函数。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">target</span> = TargetAdapter::<span class="title function_ invoke__">new</span>(specific_target);</span><br><span class="line"><span class="title function_ invoke__">call</span>(target);</span><br></pre></td></tr></table></figure>

<h4 id="adapter-rs"><a href="#adapter-rs" class="headerlink" title="adapter.rs"></a>adapter.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::&#123;adaptee::SpecificTarget, Target&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// Converts adaptee&#x27;s specific interface to a compatible `Target` output.</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">TargetAdapter</span> &#123;</span><br><span class="line">    adaptee: SpecificTarget,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">TargetAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">new</span>(adaptee: SpecificTarget) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123; adaptee &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Target</span> <span class="keyword">for</span> <span class="title class_">TargetAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">request</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">        <span class="comment">// Here&#x27;s the &quot;adaptation&quot; of a specific output to a compatible output.</span></span><br><span class="line">        <span class="keyword">self</span>.adaptee.<span class="title function_ invoke__">specific_request</span>().<span class="title function_ invoke__">chars</span>().<span class="title function_ invoke__">rev</span>().<span class="title function_ invoke__">collect</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="adaptee-rs"><a href="#adaptee-rs" class="headerlink" title="adaptee.rs"></a>adaptee.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">SpecificTarget</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">SpecificTarget</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">specific_request</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">        <span class="string">&quot;.tseuqer cificepS&quot;</span>.<span class="title function_ invoke__">into</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="target-rs"><a href="#target-rs" class="headerlink" title="target.rs"></a>target.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">Target</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">request</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">OrdinaryTarget</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Target</span> <span class="keyword">for</span> <span class="title class_">OrdinaryTarget</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">request</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">        <span class="string">&quot;Ordinary request.&quot;</span>.<span class="title function_ invoke__">into</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="main-rs"><a href="#main-rs" class="headerlink" title="main.rs"></a>main.rs</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> adaptee;</span><br><span class="line"><span class="keyword">mod</span> adapter;</span><br><span class="line"><span class="keyword">mod</span> target;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> adaptee::SpecificTarget;</span><br><span class="line"><span class="keyword">use</span> adapter::TargetAdapter;</span><br><span class="line"><span class="keyword">use</span> target::&#123;OrdinaryTarget, Target&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// Calls any object of a `Target` trait.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// To understand the Adapter pattern better, imagine that this is</span></span><br><span class="line"><span class="comment">/// a client code, which can operate over a specific interface only</span></span><br><span class="line"><span class="comment">/// (`Target` trait only). It means that an incompatible interface cannot be</span></span><br><span class="line"><span class="comment">/// passed here without an adapter.</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">call</span>(target: <span class="keyword">impl</span> <span class="title class_">Target</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#x27;&#123;&#125;&#x27;&quot;</span>, target.<span class="title function_ invoke__">request</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">target</span> = OrdinaryTarget;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print!</span>(<span class="string">&quot;A compatible target can be directly called: &quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">call</span>(target);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">adaptee</span> = SpecificTarget;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;Adaptee is incompatible with client: &#x27;&#123;&#125;&#x27;&quot;</span>,</span><br><span class="line">        adaptee.<span class="title function_ invoke__">specific_request</span>()</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">adapter</span> = TargetAdapter::<span class="title function_ invoke__">new</span>(adaptee);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print!</span>(<span class="string">&quot;But with adapter client can call its method: &quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">call</span>(adapter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Output-输出"><a href="#Output-输出" class="headerlink" title="Output 输出"></a>Output 输出</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A compatible target can be directly called: &#x27;Ordinary request.&#x27;</span><br><span class="line">Adaptee is incompatible with client: &#x27;.tseuqer cificepS&#x27;</span><br><span class="line">But with adapter client can call its method: &#x27;Specific request.&#x27;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2023/12/01/a-catalog-of-wealth-creation-mmechanisms-translate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/01/a-catalog-of-wealth-creation-mmechanisms-translate/" class="post-title-link" itemprop="url">财富创造机制目录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-12-01 18:07:58 / Modified: 21:41:19" itemprop="dateCreated datePublished" datetime="2023-12-01T18:07:58+08:00">2023-12-01</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>3.5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>13 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="A-catalog-of-wealth-creation-mechanisms-财富创造机制目录"><a href="#A-catalog-of-wealth-creation-mechanisms-财富创造机制目录" class="headerlink" title="A catalog of wealth-creation mechanisms 财富创造机制目录"></a>A catalog of wealth-creation mechanisms 财富创造机制目录</h1><p>One of the guest lecturers aboard the ship [1] (Donald Gibbs, of Pearl-Harbor conspiracy-theory infamy) gave a very interesting talk a few days ago about some of China’s semi-recent history. He opened with a little pop-quiz, which I thought set the stage particularly well, so I’ll co-opt it here to make a different point:<br>船上的一位客座讲师（唐纳德·吉布斯，珍珠港阴谋论的臭名昭著）几天前做了一个非常有趣的演讲，关于中国半近代的一些历史。他以一个小测验开场，我认为这个小测验很好地搭建了舞台，所以我在这里选择它来说明一个不同的观点：</p>
<ol>
<li><p>Why was the Panama Canal built?<br>1.巴拿马运河为什么要建？</p>
</li>
<li><p>Why was the Lewis-and-Clark expedition funded?<br>2.为什么刘易斯和克拉克探险队得到资助？</p>
</li>
<li><p>Why was the transcontinental railroad built?<br>3.为什么要修建横贯大陆的铁路？</p>
</li>
</ol>
<p>The popular answer to these questions, taught to schoolchildren throughout the U.S., is: to link the east and west coasts of the United States. But that answer is wrong, as can be shown by examining historical records of the time. The real reason for all three of these mammoth endeavors was to link the east coast of the United States with China. And the reason for linking the east coast of the United States with China was that a ship full of goods from China (including, for example, high quality china with a lower-case ‘c’, which at the time was produced nowhere else) could be sold in the east-coast cities of the U.S. at about a 300% profit. The wealth created by this trade ultimately financed the industrialization of the U.S., so this is no mere historical trifle. (Bonus question: what did the U.S. give to China in exchange for its china?)<br>这些问题的普遍答案，教给美国各地的学童，就是：连接美国东西海岸。但是，这个答案是错误的，这可以通过检查当时的历史记录来证明。这三项猛犸工程的真实的原因是为了把美国东海岸与中国连接起来。连接美国东海岸和中国的原因是，一艘满载中国货物的船只（包括，例如，带有小写字母“c”的高质量瓷器，当时其他地方都没有生产）可以在美国东海岸城市出售，利润约为300%。这种贸易创造的财富最终为美国的工业化提供了资金，所以这不是历史的小事。（附加问题：美国给予什么来换取中国？）</p>
<p>But the point I want to draw attention to is that at the root of all wealth creation are a very few, very simple and easy-to-understand core mechanisms. It’s easy to lose sight of this in today’s complex technological world, so I thought I’d draw up a catalog of them.<br>但我想提请注意的一点是，所有财富创造的根源是一个非常简单和易于理解的核心机制。在当今复杂的技术世界中，很容易忽视这一点，所以我想我应该起草一份目录。</p>
<p>It’s important to keep in mind that there is a distinction between wealth and money. Wealth is a measure of how much stuff people have that they actually value for its own sake. Food, housing, clothing, shelter, and artwork, are all examples of wealth. Money, by way of contrast, is merely an accounting mechanism that humans have invented in order to facilitate trade. Money and wealth often go together, but they are completely different things. You can transform money into wealth, and vice versa (which is the whole point of having money), but you can have money without wealth and vice versa. And you can make (or earn) money without creating wealth, and vice versa. But historically, the most reliable and the most socially beneficial way of making money is to create wealth. So to help encourage that, here’s a more or less comprehensive list of fundamental mechanisms of creating wealth.<br>重要的是要记住，财富和金钱是有区别的。财富是衡量人们拥有多少东西，他们实际上是为了自己的价值。食物、住房、衣服、住所和艺术品都是财富的例子。相比之下，货币仅仅是人类为了促进贸易而发明的一种会计机制。金钱和财富经常相伴而行，但它们是完全不同的东西。你可以把钱变成财富，反之亦然（这就是有钱的全部意义），但你可以没有财富就有钱，反之亦然。你可以不创造财富而赚钱，反之亦然。但从历史上看，最可靠、对社会最有益的赚钱方式是创造财富。所以为了鼓励这一点，这里有一个或多或少全面的清单，列出了创造财富的基本机制。</p>
<ol>
<li><p>Move things from one place to another. Most things have value only when they are in a particular place. Food, clothing, and shelter only have value for you if they are close to where you happen to be. So you can create wealth simply by moving something from somewhere that it isn’t useful to somewhere that it is. It sounds simple, but this is the basis for the shipping industry, which is what more or less what financed the industrialization of the United States of America.<br>1.把东西从一个地方搬到另一个地方。大多数东西只有在特定的地方才有价值。食物、衣服和住所只有在你碰巧在的地方附近才对你有价值。所以你可以通过简单地把一些无用的东西从某个地方移到有用的地方来创造财富。这听起来很简单，但这是航运业的基础，这或多或少是美利坚合众国工业化的资金来源。</p>
</li>
<li><p>Store things. Just as the values of things are often bound to their location, value is also often bound to a particular time. A winter coat, for example, is more useful in winter than summer. Keeping things in serviceable condition until they become useful is often a non-trivial exercise (consider the problem of keeping fruits and vegetables available when they are out of season). So you can create value simply by holding on to something and maintaining it in working order until it becomes useful to someone. Just as moving things around is the basis for the shipping industry, storing things is the basis for the retail industry. Stores are called stores because they used to be places where things were stored, not necessarily places where things were sold.<br>2.储存东西。正如事物的价值往往与其所在的位置相联系，价值也往往与特定的时间相联系。例如，冬天的外套在冬天比夏天更有用。保持物品处于可用状态直到它们变得有用通常是一个不平凡的练习（考虑一下在水果和蔬菜过季时保持可用的问题）。因此，你可以通过简单地持有某样东西并保持它的工作状态，直到它对某人有用，来创造价值。就像运输是航运业的基础一样，存储是零售业的基础。商店之所以被称为商店，是因为它们过去是存放东西的地方，而不一定是出售东西的地方。</p>
</li>
<li><p>Transform things, either chemically or mechanically. This is the basis of the manufacturing industry. I don’t think I need to say any more about that. [Update: actually, it turns out I do need to say more about it. This is indeed the basis of manufacturing, but it’s also the basis of a lot of other things, including service industries like automobile repair, plumbing, cooking, hairdressing, painting and sculpture, carpentry, etc.]<br>3.以化学或机械的方式改变事物。这是制造业的基础。我想我不需要再多说了。【更新：其实我还得多说，这确实是制造业的基础，但也是很多其他东西的基础，包括汽车修理、管道、烹饪、美发、绘画雕塑、木工等服务业。</p>
</li>
<li><p>Farm. Technically, farming could be considered a subset of #3, since you’re transforming water, carbon dioxide and fertilizer or animal feed into other, more useful things like crops and livestock. But I put this in a separate category because it relies so much on natural processes. Some day we may be able to engineer entirely artificial crops, but until then I think it’s useful to think of farming as an endeavor separate from manufacturing.<br>4.农场从技术上讲，农业可以被认为是#3的一个子集，因为你正在将水，二氧化碳和肥料或动物饲料转化为其他更有用的东西，如农作物和牲畜。但我把它放在一个单独的类别中，因为它非常依赖于自然过程。也许有一天我们能够设计出完全人造的农作物，但在那之前，我认为把农业看作是与制造业分开的一项奋进是有用的。</p>
</li>
<li><p>Build buildings. This could also be considered a subset of #3, but I put it in a separate category because buildings are not easily moved from one place to another, so they have to be manufactured in situ. This fact makes real estate development significantly different enough from manufacturing that it deserves its own category.<br>5.盖房子这也可以被认为是#3的一个子集，但我把它放在一个单独的类别中，因为建筑物不容易从一个地方移动到另一个地方，所以它们必须在原地制造。这一事实使得真实的房地产开发与制造业有着显著的不同，因此有必要将其单独归类。</p>
</li>
<li><p>Extract natural resources from the earth or space. This category includes things like mining, oil drilling, and fishing. It used to include hunting (the answer to the question I posed above about what the U.S. traded to China in the 19th century is “fur”) but no longer.<br>6.从地球或太空中提取自然资源。这一类别包括采矿、石油钻探和渔业。它曾经包括狩猎（我上面提出的关于美国在19世纪世纪与中国进行贸易的问题的答案是“毛皮”），但现在不再包括了。</p>
</li>
<li><p>Cure disease, or at least ameliorate the symptoms. This is medicine.<br>7.治愈疾病，或者至少减轻症状。这是药</p>
</li>
<li><p>Find entirely new ways of doing any of the above more efficiently or effectively. This is “research” or “invention.” (Note that this is decidedly not the same thing as “having a brilliant idea”.)<br>8.找到全新的方法来更有效地完成上述任何一项工作。这是“研究”或“发明”。（请注意，这与“有一个绝妙的想法”绝对不是一回事。）</p>
</li>
</ol>
<p>And finally, the granddaddy of them all for the 21st century:<br>最后，21世纪最伟大的发明：</p>
<ol start="9">
<li>Provide people with useful information.<br>9.为人们提供有用的信息。</li>
</ol>
<p>This one can be broken up into a number of major sub-areas:<br>这一领域可分为若干主要的次级领域：</p>
<p>9a. Help match supply and demand. The world is so complex and diverse that you can create wealth simply by identifying sources of supply and demand and matching them up. This is the basis of modern markets. I say “modern” to distinguish them from “old-fashioned” markets where merchants display their wares directly. In this case, the information about what is available is tightly bound to the physical goods themselves. Of course, “old-fashioned” markets of this sort are still common. All brick-and-mortar stores are “old-fashioned” markets. But modern commerce decouples information about goods from the physical goods themselves. It is not uncommon nowadays to buy something without ever laying eyes on it. Amazon, EBay, ECNs and Google are all examples of “modern” markets.<br>9a.帮助供需匹配。世界是如此复杂和多样化，你可以创造财富，只要确定供应和需求的来源，并将它们匹配起来。这是现代市场的基础。我说“现代”是为了区别于商人直接展示商品的“老式”市场。在这种情况下，关于什么是可用的信息与实物商品本身紧密相连。当然，这种“老式”市场仍然很常见。所有的实体店都是“老式”市场。但现代商业将商品的信息从实物商品本身中分离出来。如今，买东西时根本不看一眼并不罕见，亚马逊、易趣、ECN和谷歌都是“现代”市场的例子。</p>
<p>A sub-category of 9a is entrepreneurialism. A company is nothing more than a bunch of people providing goods and services for each other with the matching of supply and demand being coordinated by a central planner (management) rather than by a market.<br>9a的一个子类别是物质主义。一个公司只不过是一群人相互提供商品和服务，供应和需求的匹配由中央计划者（管理层）而不是市场来协调。</p>
<p>9b. Help people figure out the rules. Modern economies operate by an often byzantine set of laws, regulations, customs and conventions. Lawyers and management consultants fall into this category.<br>9b.帮助人们理解规则。现代经济的运作往往是由一套拜占庭式的法律、法规、习俗和惯例。律师和管理顾问属于这一类。</p>
<p>9c. Provide information that is useful in and of itself. This includes journalism and creative writing. Most blogs are an example of 9c.<br>9c.提供本身有用的信息。这包括新闻和创意写作。大多数博客都是9c的一个例子。</p>
<p>This last category is of particular note because so many people seem to focus on it. Every scholar, blogger, reporter, novelist, screenwriter, composer and choreographer is working on 9c. A lot of wealth gets created this way, but of all the ways to make money it is arguably the least effective. It is very hard to transform information directly into money. Once upon a time, information was strongly bound to physical objects like books or vinyl records, and you could make money by producing these things because they were instances of #3. But with modern computer technology you can reproduce information essentially for free without doing any physical transformation. The result has been an unprecedented, almost overwhelming creation of wealth, but very little of it gets translated into money because the marginal cost of production is so close to zero. There’s a reason Google doesn’t charge for its search services. Google makes money via 9a, not 9c.<br>最后一类特别值得注意，因为似乎有太多人关注它，每个学者、博客作者、记者、小说家、编剧、作曲家和编舞家都在为9c而努力。很多财富都是通过这种方式创造的，但在所有赚钱的方式中，它可以说是最不有效的。很难将信息直接转化为金钱。曾几何时，信息与书籍或黑胶唱片等实物紧密相连，你可以通过生产这些东西来赚钱，因为它们是第三条的实例。但是有了现代计算机技术，你可以免费复制信息，而不需要做任何物理转换。其结果是前所未有的，几乎压倒性的财富创造，但很少转化为货币，因为生产的边际成本非常接近于零。谷歌不对搜索服务收费是有原因的。谷歌通过9a赚钱，而不是9c。</p>
<p>There is one sub-category of 9c where it is possible to make money, and that is providing information that is difficult to obtain and useful to a narrow vertical market segment. The Y-Combinator company Octopart is an example of this.<br>9 c中有一个子类别是可以赚钱的，那就是提供难以获得的信息，并且对狭窄的垂直细分市场有用。Y-Combinator公司的ESPART就是一个例子。</p>
<p>I’m pretty sure this is a comprehensive list. Can anyone think of anything I’ve left out?<br>我敢肯定这是一个完整的列表。有谁能想到我遗漏了什么吗？</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2023/12/01/a-catalog-of-wealth-creation-mmechanisms/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/01/a-catalog-of-wealth-creation-mmechanisms/" class="post-title-link" itemprop="url">财富创造机制清单</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-12-01 17:27:10 / Modified: 21:41:19" itemprop="dateCreated datePublished" datetime="2023-12-01T17:27:10+08:00">2023-12-01</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>468</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>今天读到一篇关于<a target="_blank" rel="noopener" href="https://blog.rongarret.info/2009/10/catalog-of-wealth-creation-mechanisms.html">财富创造机制</a>一些模式的讨论，讨论带来了一些启发，做了一下简单的总结。<br>这篇文章主要讨论了财富创造的基本机制。作者指出，财富与金钱是不同的概念，财富是人们真正看重的物质财产，而金钱只是人类为了促进交易而创造的一种会计机制。在财富创造的核心机制中，作者列举了以下几个要点：</p>
<ul>
<li>将物品从一个地方运送到另一个地方，这是航运业的基础，也是美国工业化的资金来源之一。</li>
<li>存储物品，保持其在可用状态直到有需求，这是零售业的基础。</li>
<li>对物品进行化学或机械转化，这是制造业的基础。</li>
<li>农业，通过将水、二氧化碳和肥料转化为作物和牲畜来创造价值。</li>
<li>建筑建设，由于建筑物无法轻易从一个地方搬到另一个地方，因此需要在现场制造。</li>
<li>从地球或太空中提取自然资源，包括采矿、石油钻探和捕鱼等。</li>
<li>治疗疾病或减轻症状，即医学。</li>
<li>寻找更高效或更有效的做法，即研究或发明。</li>
<li>为人们提供有用的信息，包括帮助供需匹配、解释规则和提供有用信息本身。</li>
</ul>
<p>文章最后提到，尽管许多人关注提供有用信息的领域，但直接将信息转化为金钱并不容易。现代计算机技术使得信息可以几乎免费复制，导致财富创造的同时很少被转化为金钱。然而，对于提供难以获取且对特定市场细分有用的信息，仍然可以通过这种方式赚钱。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2023/11/29/kissinger-1923-2023/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/29/kissinger-1923-2023/" class="post-title-link" itemprop="url">Henry A.Kissinger 1923 – 2023</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-11-29 11:11:20" itemprop="dateCreated datePublished" datetime="2023-11-29T11:11:20+08:00">2023-11-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-12-01 21:41:19" itemprop="dateModified" datetime="2023-12-01T21:41:19+08:00">2023-12-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/writing/" itemprop="url" rel="index"><span itemprop="name">writing</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>7.9k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>29 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Henry-A-Kissinger-1923-–-2023"><a href="#Henry-A-Kissinger-1923-–-2023" class="headerlink" title="Henry A.Kissinger 1923 – 2023"></a>Henry A.Kissinger 1923 – 2023</h1><div align="center"> <img src="/images/kissinger-header.png"/></div>
Henry A. Kissinger was the 56th Secretary of State, a respected American scholar and Nobel Peace Prize Laureate who helped create the post-World War II world order and led the U.S. through some of its most complicated foreign policy challenges.
亨利·基辛格（Henry A. Kissinger）是第56任国务卿，是一位受人尊敬的美国学者和诺贝尔和平奖获得者，他帮助建立了二战后的世界秩序，并领导美国克服了一些最复杂的外交政策挑战。

<p>With his distinct German accent, sharp wit, voluminous writings and belief in the peacemaking power of realpolitik, Dr. Kissinger was one of the most influential foreign policy and national security practitioners of the post-World War II era and remained active in national security for more than 70 years. From the age of 20, when he joined the U.S. Army, to nearly his death, Dr. Kissinger continued to travel to Washington to offer testimony on U.S. national security strategy.<br>基辛格博士有着鲜明的德国口音、敏锐的机智、大量的著作以及对现实政治缔造和平力量的信念，是二战后最有影响力的外交政策和国家安全实践者之一，并在国家安全领域活跃了70多年。从20岁加入美国陆军到几近去世，基辛格博士继续前往华盛顿，为美国的国家安全战略提供证词。</p>
<p>As National Security Advisor and then Secretary of State during the Nixon and Ford Administrations, Dr. Kissinger was the author of some of those administrations’ most important, and sometimes controversial, policies.<br>作为尼克松和福特政府的国家安全顾问和国务卿，基辛格博士是这些政府中一些最重要、有时也是有争议的政策的作者。<br>He was instrumental to opening China to the Western world and was the primary voice of détente with the Soviet Union that lowered tensions during the Cold War, a reflection of his belief in the balance of power as a tenet of global order.<br>他在向西方世界开放中国方面发挥了重要作用，并且是冷战期间与苏联缓和关系的主要声音，缓解了紧张局势，这反映了他对力量平衡作为全球秩序原则的信念。</p>
<p>Before his government service, Dr. Kissinger served on the faculty at Harvard University, where he ran the International Seminar from 1952 to 1969.<br>在担任政府职务之前，基辛格博士曾在哈佛大学任教，并于 1952 年至 1969 年主持国际研讨会。</p>
<p>Dr. Kissinger is the recipient of a number of awards and recognitions. In 1945, he was awarded a Bronze Star from the U.S. Army for meritorious service. He received the Nobel Peace Prize in 1973, the same year a Gallup Poll of Americans listed him as the most admired person in the world. He was also awarded the nation’s highest civilian honor, the Presidential Medal of Freedom, in 1977 and the Medal of Liberty, given one time to ten foreign-born American leaders, in 1986.<br>基辛格博士是许多奖项和认可的获得者。1945年，他因功勋被美国陆军授予铜星勋章。他于1973年获得诺贝尔和平奖，同年，盖洛普美国人民意调查将他列为世界上最受尊敬的人。他还于1977年被授予美国最高平民荣誉总统自由勋章，并于1986年被授予自由勋章，该勋章曾授予十位外国出生的美国领导人。</p>
<p>As the architect of a lasting era of peace, stability, prosperity and global order, he made a substantial impact on generations of citizens, from the U.S. to Europe and China.<br>作为和平、稳定、繁荣和全球秩序的持久时代的缔造者，他对从美国到欧洲和中国的几代公民产生了重大影响。</p>
<p>“After 30 years he’s still public policy’s equivalent of a rock star.”<br>“30年后，他仍然是公共政策中的摇滚明星。</p>
<p>Norman Ornstein, 2002, Political Scholar<br>诺曼·奥恩斯坦（Norman Ornstein），2002年，政治学者<br>“I salute Henry Kissinger for his many efforts at peace and security.”<br>“我向亨利·基辛格致敬，感谢他为和平与安全所做的许多努力。</p>
<p>George Shultz, 2015, former Secretary of State<br>乔治·舒尔茨，2015年，前国务卿<br>“Dr. Kissinger is one of our Nation’s most accomplished and respected public servants.”<br>“基辛格博士是我们国家最有成就和最受尊敬的公务员之一。</p>
<p>President George W. Bush, 2002<br>乔治·W·布什总统，2002年<br>“Most secretaries of state reach their peak fame as they leave office. I venture to say that Henry Kissinger is perhaps more widely known in the world today than he was when he left… He is a synonym of global diplomacy.”<br>“大多数国务卿在卸任时都会达到顶峰。我冒昧地说，亨利·基辛格在当今世界上的知名度可能比他离开时更广为人知……他是全球外交的代名词。</p>
<p>Brent Scowcroft, 2012, former National Security Adviser<br>布伦特·斯考克罗夫特（Brent Scowcroft），2012年，前国家安全顾问<br>“While his contributions are far from complete, we are now beginning to appreciate what his service has provided our country, how it has changed the way we think about strategy and how he has helped provide greater security for our citizens and people around the world.”<br>“虽然他的贡献远未完成，但我们现在开始欣赏他的服务为我们的国家提供了什么，它如何改变了我们对战略的思考方式，以及他如何帮助我们的公民和世界各地的人民提供更大的安全。</p>
<p>Ashton Carter, 2016, former Secretary of Defense<br>阿什顿·卡特，2016年，前国防部长<br>“The United States, the world is greatly indebted to this superior person… He is, so far as this American is concerned, the greatest secretary of state in the history of our Republic. His superb record of achievement is unsurpassed in the annals of American history.”<br>“美国，全世界都非常感谢这位上等人……就这位美国人而言，他是我们共和国历史上最伟大的国务卿。他的卓越成就记录在美国历史上是无与伦比的。</p>
<p>President Gerald Ford, 1977<br>杰拉尔德·福特总统，1977年<br>“Henry Kissinger has played a central role in some of the most consequential U.S. foreign policy matters of the past half-century. He continues to be a highly influential figure in thinking about global affairs.”<br>“亨利·基辛格在过去半个世纪中一些最重要的美国外交政策事务中发挥了核心作用。在思考全球事务方面，他仍然是一个极具影响力的人物。</p>
<p>Harvard University President Drew Faust, 2012<br>哈佛大学校长德鲁·浮士德，2012年<br>“Dr. Kissinger wrote in his book, World Order, and I quote, that ‘each generation will be judged by whether the greatest, most consequential issues of the human condition have been faced…’ Let us work together to bring about an even better future for China-US relations.”<br>“基辛格博士在他的《世界秩序》一书中写道，’每一代人都将根据人类状况中是否面临过最重大、最重要的问题来评判……’让我们共同努力，开创中美关系更加美好的未来。</p>
<p>President Xi Jinping of China, 2015<br>中国国家主席习近平，2015年<br>“Dear Henry - It’s hard to believe that it has been more than forty-one years since you left office (I’m not far behind, with thirty-seven). There can be no doubt that our national Ship of State has often missed your hand at the tiller, though its steerpersons (sic) and captains have frequently sought your advice. Let’s hope that you, and indeed the Ship, will be around for a long time.”<br>“亲爱的亨利——很难相信你离任已经超过四十一年了（我也不甘落后，三十七年）。毫无疑问，我们的国家之船经常错过舵柄的手，尽管它的舵手（原文如此）和船长经常征求您的建议。让我们希望你，甚至这艘船，能存在很长一段时间。</p>
<p>Harold Brown, 2018, former Secretary of Defense and CSIS Counselor and Trustee<br>哈罗德·布朗（Harold Brown），2018年，前国防部长兼CSIS顾问和受托人<br>“Congratulations, Dr. Kissinger, on your 95th birthday! The Friedrich Wilhelms University Bonn established a permanent Henry Kissinger Chair to honor you for your outstanding strategic foresight and diplomatic contributions to world order and diplomacy. This German generation knows Immanuel Kant’s wisdom that peace is not a given, it does not come from itself. Germany has accepted greater international responsibility and draws on your understanding that success as a statesman rests on the study of history to understand why nations succeed and why they failed.”<br>“恭喜基辛格博士，你95岁生日！波恩弗里德里希·威廉大学设立了亨利·基辛格常设教席，以表彰您杰出的战略远见和对世界秩序和外交的外交贡献。这一代人知道伊曼纽尔·康德（Immanuel Kant）的智慧，即和平不是给定的，它不是来自自身。德国已经承担了更大的国际责任，并借鉴了你们的理解，即作为政治家的成功取决于对历史的研究，以了解国家为什么成功，为什么失败。</p>
<p>Professor James Bindenagel, Henry Kissinger Professor, Bonn, 2018<br>詹姆斯·宾德纳格尔教授，亨利·基辛格教授，波恩，2018</p>
<h2 id="Early-Life-早年生活"><a href="#Early-Life-早年生活" class="headerlink" title="Early Life 早年生活"></a>Early Life 早年生活</h2><p>Henry A. Kissinger was born to a schoolteacher and a homemaker in Furth, Germany, in 1923, just as nationalism was beginning to sweep Germany. As Jews, the Kissinger family found many activities were off-limits, including attending public soccer matches, a sport that Dr. Kissinger loved, even if he did not excel in it. What he may have lacked in athletic talent, however, he made up for in academics. As a child, he was bookish and introverted, yet also competitive.<br>亨利·基辛格（Henry A. Kissinger）于1923年出生于德国富尔特（Furth）的一名教师和家庭主妇，当时民族主义刚刚开始席卷德国。作为犹太人，基辛格一家发现许多活动都是禁止的，包括参加公共足球比赛，这是基辛格博士喜欢的运动，即使他并不擅长这项运动。然而，他可能在运动天赋方面有所欠缺，但他在学业上弥补了这一点。小时候，他书卷气十足，性格内向，但也很争强好胜。</p>
<div align="center"> <img src="/images/Early_life_1-658x1024.jpg"/></div>

<p>In 1935, the Nuremburg Laws were enacted, and Dr. Kissinger’s father, Louis, became a casualty of the rules, losing his job as a schoolteacher. Dr. Kissinger’s mother recognized that leaving Germany was the family’s best hope for their future and in 1938, three months before Kristallnacht, Dr. Kissinger, his younger brother Walter and their parents fled Nazi Germany and settled in New York City.<br>1935年，《纽伦堡法》颁布，基辛格博士的父亲路易斯成为该法的牺牲品，失去了教师的工作。基辛格的母亲认识到，离开德国是这个家庭未来的最大希望，1938年，在水晶之夜前三个月，基辛格博士、他的弟弟沃尔特和他们的父母逃离纳粹德国，定居在纽约市。</p>
<p>Many of his extended family were not able to escape, and 13 of them perished in the Holocaust. Well into his 80s, Dr. Kissinger remarked that people managed to survive the Holocaust through “singleness of purpose,” a trait that defined him throughout his career.<br>他的许多大家庭都无法逃脱，其中13人在大屠杀中丧生。基辛格博士在80多岁时表示，人们通过“单一目标”在大屠杀中幸存下来，这是他整个职业生涯的特征。</p>
<h2 id="New-Beginnings-in-America-美国的新起点"><a href="#New-Beginnings-in-America-美国的新起点" class="headerlink" title="New Beginnings in America 美国的新起点"></a>New Beginnings in America 美国的新起点</h2><p>Dr. Kissinger’s experience of fleeing a country where he once had to cross the street to avoid being beaten by non-Jewish boys, and coming to a country where such persecution did not exist for him, was a transformative one. Upon arriving in America, he was keen to be considered an American. As he later reflected in his farewell speech as Secretary of State, “When I came here in 1938, I was asked to write an essay at George Washington High School about what it meant to be an American. I wrote that…this was a country where one could walk across the street with one’s head erect.”<br>基辛格博士逃离了一个他曾经不得不过马路以避免被非犹太男孩殴打的国家，来到一个对他来说不存在这种迫害的国家，这是一次变革性的经历。抵达美国后，他渴望被视为美国人。正如他后来在作为国务卿的告别演说中所说，“当我1938年来到这里时，我被要求在乔治华盛顿高中写一篇关于作为一个美国人意味着什么的文章。我写道……这是一个可以昂首挺胸走过马路的国家。</p>
<p>In America, Dr. Kissinger plunged into his studies at George Washington High. He eventually transitioned to night school so that he could maintain a job at a shaving brush company by day. Good grades coupled with a steady work ethic made it easy for Dr. Kissinger to get into City College of New York, where he enjoyed a free education. His goal was to become an accountant, but time in the Army would set his life on a different path.<br>在美国，基辛格博士在乔治华盛顿高中投入研究。他最终转入夜校，这样他就可以在白天在剃须刷公司工作。良好的成绩加上稳定的职业道德，使基辛格博士很容易进入纽约市立学院，在那里他享受了免费教育。他的目标是成为一名会计师，但在军队中度过的时光使他的生活走上了不同的道路。</p>
<h2 id="A-lifetime-of-service-终身服务。"><a href="#A-lifetime-of-service-终身服务。" class="headerlink" title="A lifetime of service. 终身服务。"></a>A lifetime of service. 终身服务。</h2><p><a target="_blank" rel="noopener" href="https://www.henryakissinger.com/timeline/">See the timeline →</a><br><a target="_blank" rel="noopener" href="https://www.henryakissinger.com/timeline/">查看时间线→</a></p>
<h2 id="Service-to-Country-服务国家"><a href="#Service-to-Country-服务国家" class="headerlink" title="Service to Country 服务国家"></a>Service to Country 服务国家</h2><p>In 1943, the year he became a U.S. citizen, Dr. Kissinger was drafted into the U.S. Army, where his intellect and fluency in German would make him a perfect candidate for military intelligence. His intellectual abilities earned him a placement in the Army Specialized Training Program, an opportunity that sent him from combat training to college instead. Dr. Kissinger was sent to Lafayette College in Pennsylvania, where he studied engineering, read books on history in his spare time, and tutored other students.<br>1943年，基辛格博士成为美国公民，被征召入伍，他的智慧和流利的德语使他成为军事情报部门的完美人选。他的智力为他赢得了陆军专业训练计划的安置，这个机会使他从战斗训练进入了大学。基辛格博士被送到宾夕法尼亚州的拉斐特学院，在那里他学习工程学，在业余时间阅读历史书籍，并辅导其他学生。</p>
<p>In 1944, however, the Army canceled the program, and Dr. Kissinger was returned to Camp Claiborne in Louisiana. From Camp Claiborne, Dr. Kissinger was assigned to the 84th Infantry Division, which set sail from New York to Europe in September 1944 as part of the pursuit phase of the war. When he arrived back in his homeland of Germany, Dr. Kissinger was quickly selected to become a German translator for General Alexander Bolling. Later, in the Battle of the Bulge, when most of the division was forced to withdraw, Dr. Kissinger volunteered to stay behind to be part of hazardous counter-intelligence duties, making good use of his German.<br>然而，在1944年，陆军取消了该计划，基辛格博士被送回路易斯安那州的克莱伯恩营。从克莱伯恩营出发，基辛格博士被分配到第 84 步兵师，该师于 1944 年 9 月从纽约启航前往欧洲，作为战争追击阶段的一部分。回到家乡德国后，基辛格博士很快被选为亚历山大·博林将军的德语翻译。后来，在突出部战役中，当该师的大部分部队被迫撤退时，基辛格博士自愿留下来，成为危险的反情报职责的一部分，充分利用了他的德语。</p>
<p>When the 84th Division later captured the German town of Krefeld on the Rhine River, Dr. Kissinger became the town’s administrator — relying on his language skills and his understanding of the German culture to command authority. He succeeded in restoring order and building a civilian government in the town in little more than a week, a success that enabled him to transfer to the Counter-Intelligence Corps (CIC). The mission was to identify Nazis and members of the Gestapo in areas that the Allies had captured. His work there would earn him a Bronze Star.<br>当第84师后来占领了莱茵河畔的德国小镇克雷费尔德时，基辛格博士成为该镇的行政长官——依靠他的语言技能和对德国文化的理解来指挥权威。他在短短一周多的时间里成功地恢复了秩序，并在镇上建立了一个文职政府，这一成功使他能够转移到反情报部队（CIC）。任务是在盟军占领的地区识别纳粹分子和盖世太保成员。他在那里的工作为他赢得了铜星勋章。</p>
<p>Dr. Kissinger’s work in the CIC would continue even after the war had ended, as he was called upon to provide order and detect Nazis in Hesse. He kept any feelings of anger or resentment toward the Germans — who had forced his family to flee less than a decade earlier — beneath the surface. Dr. Kissinger operated with remarkable restraint.<br>即使在战争结束后，基辛格博士在中央情报局的工作仍在继续，因为他被要求在黑森州提供秩序并侦查纳粹分子。他对德国人的任何愤怒或怨恨都隐藏在表面之下——德国人在不到十年前迫使他的家人逃离。基辛格博士非常克制。</p>
<p>In 1946, he was discharged from the Army, having obtained the rank of sergeant. As he would later reflect, his military service would become for him the highlight of his career, and also one that affirmed his American identity and gave him confidence.<br>1946年，他从陆军退伍，获得了中士军衔。正如他后来所反映的那样，服兵役将成为他职业生涯的亮点，也是肯定他的美国身份并给予他信心的亮点。</p>
<h2 id="Academia-学术界"><a href="#Academia-学术界" class="headerlink" title="Academia 学术界"></a>Academia 学术界</h2><p>Following his service in the Army, and a brief stint teaching military officers in Germany, Dr. Kissinger returned to academics, earning his B.A., M.A. and Ph.D. from Harvard University. Legend has it that his doctoral dissertation was, and remains, the longest dissertation ever submitted at Harvard University.<br>在军队服役并在德国短暂教授军官后，基辛格博士重返学术界，在哈佛大学获得学士、硕士和博士学位。传说他的博士论文是，现在仍然是哈佛大学有史以来最长的论文。</p>
<p>As the son of an educator, Dr. Kissinger wavered early on between a life in academia and a life on the front lines of shaping foreign policy. Before entering government, he held a variety of academic and think-tank posts: at Harvard University, his alma mater, where he was a professor of government; at the Rockefeller Brothers Fund; at the Council on Foreign Relations; and many others.<br>作为教育家的儿子，基辛格博士很早就在学术界的生活和制定外交政策的前线生活之间摇摆不定。在进入政府部门之前，他担任过各种学术和智囊团职位：在他的母校哈佛大学担任政府学教授;洛克菲勒兄弟基金会;在外交关系委员会;还有很多其他的。</p>
<p>At Harvard, perhaps his most passionate pursuit, and a formative precursor to his career as an international diplomat, was the International Seminar that he founded in 1952 and ran until 1969. The seminar brought together about 40 foreign dignitaries each summer for classes, lectures and, most importantly, networking sessions. Through the seminar, Dr. Kissinger built a wide base of foreign contacts with whom he could conduct direct diplomacy, including contacts in China, Europe and Latin America.<br>在哈佛，也许是他最热情的追求，也是他作为国际外交官职业生涯的形成性先驱，是他于1952年创立并一直持续到1969年的国际研讨会。每年夏天，该研讨会都会聚集约40位外国政要参加课程、讲座，最重要的是，参加社交会议。通过这次研讨会，基辛格博士建立了广泛的对外联系基础，他可以与他们进行直接外交，包括在中国、欧洲和拉丁美洲的联系。</p>
<p>It was also during his time in academia that Dr. Kissinger refined his belief in the balance of power, linkage and triangular diplomacy. This would become the driving philosophy of his time as Secretary of State. His dissertation, Peace, Legitimacy, and the Equilibrium: A Study of the Statesmanship of Castlereagh and Metternich, argued that peace and stability do not come from the pursuit of peace per se. Rather, he looked at the diplomatic successes of Klemens von Metternich and Congress of Europe and concluded that peace comes from “an international agreement about the nature of workable arrangements and the permissible aims and methods of foreign policy. It implies the acceptance of the framework of international order by all major powers.” While Dr. Kissinger’s approach to peace through rules, power and stability was controversial, it also led to his greatest accomplishments.<br>也是在学术界期间，基辛格博士完善了他对权力平衡、联系和三角外交的信念。这将成为他担任国务卿期间的驱动哲学。他的论文《和平、合法性和均衡：卡斯尔雷和梅特涅政治家风度研究》认为，和平与稳定并非来自对和平本身的追求。相反，他研究了克莱门斯·冯·梅特涅（Klemens von Metternich）和欧洲会议（Congress of Europe）的外交成功，并得出结论，和平来自“关于可行安排的性质以及外交政策的允许目标和方法的国际协议。它意味着所有大国都接受国际秩序的框架。虽然基辛格博士通过规则、权力和稳定实现和平的方法存在争议，但它也导致了他最伟大的成就。</p>
<div align="center"> <img src="/images/Academia_1.png"/></div>

<h2 id="Global-Statesman-全球政治家"><a href="#Global-Statesman-全球政治家" class="headerlink" title="Global Statesman 全球政治家"></a>Global Statesman 全球政治家</h2><p>Though successful in academia, Dr. Kissinger longed to have a direct impact on policy. He entered the political arena in 1960, serving as a senior foreign policy advisor to Gov. Nelson Rockefeller’s presidential campaigns in 1960, 1964 and 1968. When Rockefeller lost the Republican nomination in 1968, Dr. Kissinger, reluctantly at first, joined the campaign of the party nominee, Richard Nixon.<br>虽然在学术界取得了成功，但基辛格博士渴望对政策产生直接影响。他于 1960 年进入政坛，在 1960 年、1964 年和 1968 年担任纳尔逊·洛克菲勒州长总统竞选活动的高级外交政策顾问。1968年，洛克菲勒在共和党提名中落败，基辛格起初不情愿地加入了该党提名人理查德·尼克松（Richard Nixon）的竞选活动。</p>
<p>Following Nixon’s victory, Dr. Kissinger was named Assistant to the President for National Security Affairs and then National Security Advisor. In this capacity, and eventually as Secretary of State, Dr. Kissinger deftly guided the U.S. through many of the most difficult national security issues the nation would face.<br>尼克松获胜后，基辛格博士被任命为总统国家安全事务助理，然后被任命为国家安全顾问。在这个职位上，并最终作为国务卿，基辛格博士巧妙地指导美国解决了美国将面临的许多最困难的国家安全问题。</p>
<div align="center"> <img src="/images/Influence_5.png"/></div>

<p>He led the Administration’s historic efforts to open relations with China — ultimately opening the door to greater stability between the nations, greater prosperity for the citizens within, and normalized relations between the two countries for the first time in decades. Specifically, in 1971 Dr. Kissinger made two secret trips to China, laying the groundwork for Nixon’s visit to the Republic the following year.<br>他领导了本届政府开放与中国关系的历史性努力，最终为两国之间的更大稳定、国内公民的更大繁荣以及两国关系几十年来首次正常化打开了大门。具体来说，1971年，基辛格博士两次秘密访华，为尼克松次年访华奠定了基础。</p>
<div align="center"> <img src="/images/statesman_2.png"/></div>

<p>Dr. Kissinger believed in the power of triangulation as a tool for diplomacy, and this can be seen in his near-concurrent negotiations with China and the Soviet Union, as well — connecting the world’s three superpowers at the time. Dr. Kissinger later reflected that the triangular relationship was “in itself a form of pressure on each of them, and we carefully maneuvered so we would try to be closer to each than they were to each other.”<br>基辛格博士相信三角测量作为外交工具的力量，这可以从他与中国和苏联几乎同时进行的谈判中看出——当时连接了世界上三个超级大国。基辛格博士后来反映说，三角关系“本身就是对他们每个人施加压力的一种形式，我们小心翼翼地操纵着，所以我们会努力更接近彼此，而不是彼此之间。</p>
<p>“The triangular relationship between the U.S., Soviet Union and China was ‘in itself a form of pressure on each of them, and we carefully maneuvered so we would try to be closer to each than they were to each other.”<br>“美国、苏联和中国之间的三角关系’本身就是对彼此施加压力的一种形式，我们小心翼翼地操纵着，所以我们会努力更接近彼此，而不是彼此之间。<br>Ultimately, Dr. Kissinger was influential in achieving the historic détente between the United States and the Soviet Union through the 1972 Strategic Arms Limitation Treaty (SALT I) and the Anti-Ballistic Missile Treaty. In doing so, he helped to ease tensions between the world’s two superpowers amidst the tension of the Cold War era, achieving a vision for a global order that would preserve peace.<br>最终，基辛格博士通过1972年《限制战略武器条约》（SALT I）和《反弹道导弹条约》实现了美苏之间的历史性缓和，发挥了重要作用。在此过程中，他帮助缓解了冷战时期紧张局势中的世界两个超级大国之间的紧张关系，实现了维护和平的全球秩序的愿景。</p>
<div align="center"> <img src="/images/Statesman_3-1024x623.jpg"/></div>

<div align="center"> <img src="/images/Statesman_4.png"/></div>
Dr. Kissinger also worked to end America’s involvement in the Vietnam War through the Paris Peace Accords. Dr. Kissinger recognized that the conflict could not be won in conventional military terms, so he set about trying to secure peace through active diplomacy. Soon after the Nixon Administration took office in 1969, Dr. Kissinger began painstaking negotiations that lasted nearly four years. In 1973, Dr. Kissinger and the North Vietnamese negotiator struck a deal for a ceasefire that ended American involvement in the war. That same year, he received plaudits for limiting the damage of, and outside influence in, the Yom Kippur War between America’s ally Israel, and the Soviet Union’s ally Egypt — ultimately preventing the regional conflict from spiraling into a global conflict. It was this experience that helped coin the term “shuttle diplomacy,” for the number of short trips Dr. Kissinger took between Middle Eastern capitals, as he worked to contain the military activities and to address the fallout of the war.
基辛格博士还致力于通过《巴黎和平协定》结束美国对越南战争的参与。基辛格博士认识到，以常规军事手段无法赢得这场冲突，因此他开始试图通过积极的外交手段确保和平。1969年尼克松政府上台后不久，基辛格博士就开始了历时近四年的艰苦谈判。1973年，基辛格博士和北越谈判代表达成了停火协议，结束了美国对战争的介入。同年，他因限制美国盟友以色列和苏联盟友埃及之间的赎罪日战争的损害和外部影响而受到赞誉，最终阻止了地区冲突升级为全球冲突。正是这段经历帮助创造了“穿梭外交”一词，基辛格博士在中东各国首都之间进行了多次短途旅行，因为他努力遏制军事活动并解决战争的后果。

<p>In January 1974, over the course of 8 days, Dr. Kissinger worked to negotiate the first Egyptian-Israeli disengagement agreement, and later that spring he arranged a Syrian-Israeli disengagement. The following year, his shuttle diplomacy helped to arrange one final negotiation through a second Egyptian-Israeli disengagement agreement.<br>1974 年 1 月，在 8 天的时间里，基辛格博士致力于谈判第一份埃及-以色列脱离接触协议，并于当年春天晚些时候安排了叙利亚-以色列脱离接触。次年，他的穿梭外交通过第二份埃及-以色列脱离接触协议帮助安排了最后一次谈判。</p>
<p>A force for international stability, Dr. Kissinger was also a steady hand at home when the Nixon Administration was caught in twin scandals that overwhelmed all other matters. As President Nixon was under siege from the Watergate investigation and Vice President Spiro Agnew was about to resign due to corruption allegations, Dr. Kissinger was critical to keeping the Administration afloat. Serving as a credible face for foreign leaders when many other major players in the Nixon Administration were tainted by the Watergate scandal, Dr. Kissinger held the country together on the international stage.<br>基辛格博士是国际稳定的力量，当尼克松政府陷入压倒所有其他事务的双重丑闻时，基辛格博士在国内也是一个稳定的手。当尼克松总统受到水门事件调查的围攻，副总统斯皮罗·阿格纽（Spiro Agnew）因腐败指控而即将辞职时，基辛格博士对维持政府的运转至关重要。当尼克松政府的许多其他主要人物受到水门事件丑闻的玷污时，基辛格博士是外国领导人的可信面孔，他在国际舞台上将国家团结在一起。</p>
<p>While his choices were not without controversy, and his behavior — as he operated with single-minded intent to realize his vision — was sometimes maddening to colleagues, Dr. Kissinger was aware of who he was, and owned it. In his own words, “Accept everything about yourself — I mean everything. You are you and that is the beginning and the end — no apologies, no regrets.”<br>虽然他的选择并非没有争议，而且他的行为——他一心一意地实现自己的愿景——有时会让同事们抓狂，但基辛格博士知道自己是谁，并拥有它。用他自己的话说，“接受关于你自己的一切——我的意思是一切。你就是你，这就是开始和结束——没有道歉，没有遗憾。</p>
<h2 id="Enduring-Influence-持久的影响"><a href="#Enduring-Influence-持久的影响" class="headerlink" title="Enduring Influence 持久的影响"></a>Enduring Influence 持久的影响</h2><p>After Dr. Kissinger stepped down as Secretary of State, he remained an advisor and voice on matters of foreign policy. At the bequest of President Ronald Reagan, Dr. Kissinger chaired the National Bipartisan Commission on Central America, and would later serve on the President’s Foreign Intelligence Advisory Board under Presidents Reagan and George H.W. Bush.<br>基辛格博士卸任国务卿后，他仍然是外交政策事务的顾问和代言人。在罗纳德·里根总统的遗赠下，基辛格博士担任了中美洲国家两党委员会主席，后来在里根总统和乔治·H·W·布什总统的领导下担任总统外国情报顾问委员会的成员。</p>
<div align="center"> <img src="/images/Influence_1.png"/></div>
<div align="center"> <img src="/images/Influence_2.png"/></div>
<div align="center"> <img src="/images/Influence_3.png"/></div>
<div align="center"> <img src="/images/Influence_4.png"/></div>
<div align="center"> <img src="/images/Influence_5.png"/></div>

<p>After leaving government, Dr. Kissinger remained a frequent commentator on national security issues, as well as a prolific writer and founder of the consulting firm Kissinger Associates. As such, he remained an informal, but frequent, advisor to U.S. presidents, and he welcomed and met with countless heads of state and dignitaries from nearly every country in the world.<br>离开政府后，基辛格博士仍然经常就国家安全问题发表评论，也是一位多产的作家和咨询公司基辛格协会的创始人。因此，他仍然是美国总统的非正式顾问，但经常担任顾问，他欢迎并会见了来自世界上几乎每个国家的无数国家元首和政要。</p>
<p>He published 21 books, including 2014’s World Order, 1994’s Diplomacy which has become essential reading for those who study international affairs and U.S. diplomacy, and 2011’s On China, as well as memoirs covering his time in the White House and as Secretary of State.<br>他出版了21本书，包括2014年的《世界秩序》、1994年的《外交》，该书已成为研究国际事务和美国外交的人的必读书目，以及2011年的《论中国》，以及涵盖他在白宫和担任国务卿期间的回忆录。</p>
<p>With his sharp wit and encyclopedic knowledge of philosophy, history and current events, Dr. Kissinger was known as one of the most quotable men in Washington. His most famous witticisms include his observations that “nobody will ever win the battle of the sexes. There’s too much fraternizing with the enemy,” and that “there can’t be a crisis this week. My schedule is already full.”<br>凭借其敏锐的机智和对哲学、历史和时事的百科全书式知识，基辛格博士被称为华盛顿最容易被引用的人之一。他最著名的诙谐包括他的观察：“没有人会赢得两性之战。与敌人有太多的兄弟情谊“，并且”本周不会有危机。我的日程安排已经排得满满的。</p>
<p>He was also aware of his own reputation for having a healthy ego. As he once said during a speech, “I want to thank you for stopping the applause. It’s impossible for me to look humble for any period of time.”<br>他也意识到自己拥有健康的自我的声誉。正如他曾经在一次演讲中所说，“我要感谢你停止了掌声。我不可能在任何一段时间内显得谦虚。</p>
<p>And yet, it was an ego that was earned. International stateman, lifelong scholar, skilled negotiator and architect of a lasting era of peace, stability, prosperity and global order — Dr. Kissinger’s impact on generations of citizens, from the U.S. to China, cannot be minimized.<br>然而，这是一个挣来的自我。基辛格博士是一位国际政治家、终身学者、熟练的谈判者，也是和平、稳定、繁荣和全球秩序的持久时代的缔造者——基辛格博士对从美国到中国的几代公民的影响不容小觑。</p>
<p>Dr. Kissinger is survived by his wife Nancy, his two grown children and five grandchildren.<br>基辛格博士幸存下来的是他的妻子南希、他的两个成年子女和五个孙子孙女。</p>
<p>In lieu of flowers the family suggests considering donations to:<br>为了代替鲜花，家人建议考虑捐赠给：</p>
<p>Animal Medical Center 动物医疗中心</p>
<p>Development Office 发展办公室</p>
<p>510 East 62nd Street<br>东62街510号</p>
<p>New York, NY 10065<br>纽约， NY 10065</p>
<p>Henry A. Kissinger Center for Global Affairs<br>亨利·基辛格全球事务中心</p>
<p>Johns Hopkins University School of Advanced International Studies<br>约翰霍普金斯大学高级国际研究学院</p>
<p>1717 Massachusetts Avenue, NW<br>1717马萨诸塞大道，西北</p>
<p>Washington, DC 20036 华盛顿特区 20036</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://tonymistark.github.io/2023/11/28/Remembering-Charlie-Munger/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ice">
      <meta itemprop="description" content="安静地坐着学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/28/Remembering-Charlie-Munger/" class="post-title-link" itemprop="url">伯克希尔·哈撒韦公司悼念查理·芒格：致敬一位伟大的领导者</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-11-28 12:14:30" itemprop="dateCreated datePublished" datetime="2023-11-28T12:14:30+08:00">2023-11-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-12-01 21:41:19" itemprop="dateModified" datetime="2023-12-01T21:41:19+08:00">2023-12-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/writing/" itemprop="url" rel="index"><span itemprop="name">writing</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>399</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="伯克希尔·哈撒韦公司悼念查理·芒格：致敬一位伟大的领导者"><a href="#伯克希尔·哈撒韦公司悼念查理·芒格：致敬一位伟大的领导者" class="headerlink" title="伯克希尔·哈撒韦公司悼念查理·芒格：致敬一位伟大的领导者"></a>伯克希尔·哈撒韦公司悼念查理·芒格：致敬一位伟大的领导者</h1><p><a target="_blank" rel="noopener" href="https://www.berkshirehathaway.com/news/nov2823.pdf">November 28, 2023 News Release</a><br>伯克希尔·哈撒韦公司新闻发布</p>
<h1 id="NEWS-RELEASE-新闻发布"><a href="#NEWS-RELEASE-新闻发布" class="headerlink" title="NEWS RELEASE  新闻发布"></a>NEWS RELEASE  新闻发布</h1><h2 id="FOR-IMMEDIATE-RELEASE-立即发布-November-28-2023-2023年11月28日"><a href="#FOR-IMMEDIATE-RELEASE-立即发布-November-28-2023-2023年11月28日" class="headerlink" title="FOR IMMEDIATE RELEASE  立即发布       November 28, 2023  2023年11月28日"></a>FOR IMMEDIATE RELEASE  立即发布       November 28, 2023  2023年11月28日</h2><p>Omaha, NE (BRK.A; BRK.B) –  内布拉斯加州奥马哈（BRK.A; BRK.B）-</p>
<p>Berkshire Hathaway a few minutes ago was advised by members of Charlie Munger’s family<br>伯克希尔·哈撒韦公司几分钟前得到了查理·芒格家人的通知</p>
<p>that he peacefully died this morning at a California hospital.<br>他于今天早上在加利福尼亚的一家医院平静离世。</p>
<p>Warren Buffett, CEO of Berkshire Hathaway, wishes to say: “Berkshire Hathaway could not have been built to its present status without Charlie’s inspiration, wisdom and participation.”<br>伯克希尔·哈撒韦公司的首席执行官沃伦·巴菲特希望说：“没有查理的灵感、智慧和参与，伯克希尔·哈撒韦公司不可能建立到现在的地位。”</p>
<p>The family will handle all affairs pursuant to Charlie’s instructions.<br>芒格的家人将根据他的指示处理所有事务。</p>
<h1 id="About-Berkshire-关于伯克希尔"><a href="#About-Berkshire-关于伯克希尔" class="headerlink" title="About Berkshire  关于伯克希尔"></a>About Berkshire  关于伯克希尔</h1><p>Berkshire Hathaway and its subsidiaries engage in diverse business activities including insurance and reinsurance, utilities and energy, freight rail transportation, manufacturing, retailing and services.<br>伯克希尔·哈撒韦及其子公司从事多种业务活动，包括保险和再保险、公用事业和能源、货运铁路运输、制造、零售和服务。</p>
<p>Common stock of the company is listed on the New York Stock Exchange, trading symbols BRK.A and BRK.B.<br>该公司的普通股在纽约证券交易所上市，交易符号为BRK.A和BRK.B。</p>
<p>— END —  - 结束 -</p>
<p>Contact  联系人</p>
<p>Marc D. Hamburg  马克·汉堡</p>
<p>402-346-1400</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Ice</p>
  <div class="site-description" itemprop="description">安静地坐着学习</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">72</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/TonyMistark" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;TonyMistark" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitee.com/Micestark" title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;Micestark" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>Gitee</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:tony_mistark@163.com" title="E-Mail → mailto:tony_mistark@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Tony_Mistark" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;Tony_Mistark" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ice</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">112k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">6:46</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


</body>
</html>
